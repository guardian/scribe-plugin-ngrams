(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.scribePluginNgrams=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){},{}],2:[function(require,module,exports){var util=require("util/");var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return""+value}if(util.isNumber(value)&&!isFinite(value)){return value.toString()}if(util.isFunction(value)||util.isRegExp(value)){return value.toString()}return value}function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n)}else{return s}}function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};function _deepEqual(actual,expected){if(actual===expected){return true}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false}return true}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected}else{return objEquiv(actual,expected)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b}var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b)}var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}else if(actual instanceof expected){return true}else if(expected.call({},actual)===true){return true}return false}function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null}try{block()}catch(e){actual=e}message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)))};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)))};assert.ifError=function(err){if(err){throw err}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}},{"util/":13}],3:[function(require,module,exports){(function(global){var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("is-array");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);arr.foo=function(){return 42};arr.constructor=Bar;return arr.foo()===42&&arr.constructor===Bar&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){if(!(this instanceof Buffer)){if(arguments.length>1)return new Buffer(arg,arguments[1]);return new Buffer(arg)}this.length=0;this.parent=undefined;if(typeof arg==="number"){return fromNumber(this,arg)}if(typeof arg==="string"){return fromString(this,arg,arguments.length>1?arguments[1]:"utf8")}return fromObject(this,arg)}function fromNumber(that,length){that=allocate(that,length<0?0:checked(length)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<length;i++){that[i]=0}}return that}function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding==="")encoding="utf8";var length=byteLength(string,encoding)|0;that=allocate(that,length);that.write(string,encoding);return that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(object==null){throw new TypeError("must start with number, buffer, array or string")}if(typeof ArrayBuffer!=="undefined"){if(object.buffer instanceof ArrayBuffer){return fromTypedArray(that,object)}if(object instanceof ArrayBuffer){return fromArrayBuffer(that,object)}}if(object.length)return fromArrayLike(that,object);return fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=checked(buffer.length)|0;that=allocate(that,length);buffer.copy(that,0,0,length);return that}function fromArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromTypedArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array){if(Buffer.TYPED_ARRAY_SUPPORT){array.byteLength;that=Buffer._augment(new Uint8Array(array))}else{that=fromTypedArray(that,new Uint8Array(array))}return that}function fromArrayLike(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromJsonObject(that,object){var array;var length=0;if(object.type==="Buffer"&&isArray(object.data)){array=object.data;length=checked(array.length)|0}that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array}function allocate(that,length){if(Buffer.TYPED_ARRAY_SUPPORT){that=Buffer._augment(new Uint8Array(length));that.__proto__=Buffer.prototype}else{that.length=length;that._isBuffer=true}var fromPool=length!==0&&length<=Buffer.poolSize>>>1;if(fromPool)that.parent=rootParent;return that}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;var i=0;var len=Math.min(x,y);while(i<len){if(a[i]!==b[i])break;++i}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(list.length===0){return new Buffer(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;i++){length+=list[i].length}}var buf=new Buffer(length);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};function byteLength(string,encoding){if(typeof string!=="string")string=""+string;var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;Buffer.prototype.length=undefined;Buffer.prototype.parent=undefined;function slowToString(encoding,start,end){var loweredCase=false;start=start|0;end=end===undefined||end===Infinity?this.length:end|0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.indexOf=function indexOf(val,byteOffset){if(byteOffset>2147483647)byteOffset=2147483647;else if(byteOffset<-2147483648)byteOffset=-2147483648;byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==="string"){if(val.length===0)return-1;return String.prototype.indexOf.call(this,val,byteOffset)}if(Buffer.isBuffer(val)){return arrayIndexOf(this,val,byteOffset)}if(typeof val==="number"){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,val,byteOffset)}return arrayIndexOf(this,[val],byteOffset)}function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++){if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex}else{foundIndex=-1}}return-1}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.get=function get(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function set(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length|0;length=swap}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}else{target._set(this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;
arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=leadSurrogate-55296<<10|codePoint-56320|65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)},{}],5:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],6:[function(require,module,exports){var isArray=Array.isArray;var str=Object.prototype.toString;module.exports=isArray||function(val){return!!val&&"[object Array]"==str.call(val)}},{}],7:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}throw TypeError('Uncaught, unspecified "error" event.')}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];handler.apply(this,args)}}else if(isObject(handler)){len=arguments.length;args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){var m;if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else{while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.listenerCount=function(emitter,type){var ret;if(!emitter._events||!emitter._events[type])ret=0;else if(isFunction(emitter._events[type]))ret=1;else ret=emitter._events[type].length;return ret};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],8:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],9:[function(require,module,exports){module.exports=function(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],10:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:11}],11:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]()}len=queue.length}draining=false}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0)}};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],12:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},{}],13:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}if(process.noDeprecation===true){return fn}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=require("./support/isBuffer");function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=require("inherits");exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":12,_process:11,inherits:8}],14:[function(require,module,exports){(function(Buffer){var FFI=require("ffi");function fortranArrayToJSMatrix(fortranArray,m,n,elementSize){var op=elementSize==8?"readDoubleLE":"readFloatLE";var array=[];var rowWidth=elementSize*n;var columnOffset=m*elementSize;for(var i=0;i<m;i++){var row=[];var rowStart=i*elementSize;for(var j=0;j<n;j++){row.push(fortranArray[op](columnOffset*j+rowStart))}array.push(row)}return array}function jsMatrixToFortranArray(array,elementSize){var op=elementSize==8?"writeDoubleLE":"writeFloatLE";var m=array.length;var n=array[0].length;var fortranArrayStart=fortranArray=new Buffer(m*n*elementSize);for(var j=0;j<n;j++){for(var i=0;i<m;i++){fortranArray[op](array[i][j],elementSize*(j*m+i))}}return fortranArrayStart}function fortranArrayToJSArray(fortranArray,n,op,elementSize){var array=[];for(var i=0;i<n;i++){array.push(fortranArray[op](i*elementSize))}return array}module.exports.fortranArrayToJSMatrix=fortranArrayToJSMatrix;module.exports.jsMatrixToFortranArray=jsMatrixToFortranArray;module.exports.fortranArrayToJSArray=fortranArrayToJSArray}).call(this,require("buffer").Buffer)},{buffer:3,ffi:24}],15:[function(require,module,exports){var lapack=require("./lapack.js");exports.sgeqrf=lapack.sgeqrf;exports.dgeqrf=lapack.dgeqrf;exports.sgesvd=lapack.sgesvd;exports.qr=lapack.qr;exports.lu=lapack.lu;exports.sgetrf=lapack.sgetrf;exports.sgesv=lapack.sgesv},{"./lapack.js":16}],16:[function(require,module,exports){(function(Buffer){var fortranArray=require("./fortranArray");var FFI=require("ffi");var LAPACK;try{LAPACK=new FFI.Library("liblapack",{sgeqrf_:["void",["pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer"]],dgeqrf_:["void",["pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer"]],sorgqr_:["void",["pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer"]],sgesvd_:["void",["pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer"]],sgetrf_:["void",["pointer","pointer","pointer","pointer","pointer","pointer"]],dgetrf_:["void",["pointer","pointer","pointer","pointer","pointer","pointer"]],sgesv_:["void",["pointer","pointer","pointer","pointer","pointer","pointer","pointer","pointer"]]})}catch(e){console.log("!!! node-lapack requires the native lapack to be built as a shared lib.");console.log(e)}var FORTRAN_INT=4;var FORTRAN_CHAR=1;var FORTRAN_FLOAT=4;var FORTRAN_DOUBLE=8;function eye(m){var matrix=[];for(var i=0;i<m;i++){var row=[];matrix.push(row);for(var j=0;j<m;j++){if(i==j)row.push(1);else row.push(0)}}return matrix}function matrixOp(matrix,elementSize,callback){var m=matrix.length;var n=matrix[0].length;var f_m=new Buffer(FORTRAN_INT);var f_n=new Buffer(FORTRAN_INT);var f_a=fortranArray.jsMatrixToFortranArray(matrix,elementSize);var f_lda=new Buffer(FORTRAN_INT);f_m.writeInt32LE(m,0);f_n.writeInt32LE(n,0);f_lda.writeInt32LE(Math.max(1,m),0);callback(m,n,f_m,f_n,f_a,f_lda)}function zeroBottomLeft(matrix){for(var i=1;i<matrix.length;i++){for(var j=0;j<i&&j<matrix[0].length;j++)matrix[i][j]=0}return matrix}function sgesv(a,b){var f_info=new Buffer(FORTRAN_INT);var result={};matrixOp(a,FORTRAN_FLOAT,function(am,an,af_m,af_n,f_a){var f_ipiv=new Buffer(am*FORTRAN_INT);matrixOp(b,FORTRAN_FLOAT,function(bm,bn,bf_m,bf_n,f_b){LAPACK.sgesv_(af_m,bf_n,f_a,af_n,f_ipiv,f_b,bf_m,f_info);result.X=fortranArray.fortranArrayToJSMatrix(f_b,bm,bn,FORTRAN_FLOAT);result.P=ipivToP(bm,fortranArray.fortranArrayToJSArray(f_ipiv,bm,"readInt32LE",FORTRAN_FLOAT))})});return result}function qr(matrix){var result;sgeqrf(matrix,function(qr,m,n,f_m,f_n,f_a,f_lda,f_tau,f_work,f_lwork,f_info){var f_k=new Buffer(FORTRAN_INT);f_k.writeInt32LE(Math.min(m,n),0);LAPACK.sorgqr_(f_m,f_n,f_k,f_a,f_lda,f_tau,f_work,f_lwork,f_info);qr.Q=fortranArray.fortranArrayToJSMatrix(f_a,m,n,FORTRAN_FLOAT);qr.R=zeroBottomLeft(qr.R);result=qr});return result}function sgeqrf(matrix,callback){return geqrf(matrix,"readFloatLE",LAPACK.sgeqrf_,FORTRAN_FLOAT,callback)}function dgeqrf(matrix,callback){return geqrf(matrix,"readDoubleLE",LAPACK.dgeqrf_,FORTRAN_DOUBLE,callback)}function geqrf(matrix,op,lapackFunc,elementSize,callback){var qr;matrixOp(matrix,elementSize,function(m,n,f_m,f_n,f_a,f_lda){var f_tau=new Buffer(m*n*elementSize);var f_info=new Buffer(FORTRAN_INT);var f_lwork=new Buffer(FORTRAN_INT);var f_work;f_lwork.writeInt32LE(-1,0);f_work=new Buffer(FORTRAN_DOUBLE);lapackFunc(f_m,f_n,f_a,f_lda,f_tau,f_work,f_lwork,f_info);lwork=f_work[op](0);f_work=new Buffer(lwork*elementSize);f_lwork.writeInt32LE(lwork,0);lapackFunc(f_m,f_n,f_a,f_lda,f_tau,f_work,f_lwork,f_info);qr={R:fortranArray.fortranArrayToJSMatrix(f_a,m,n,elementSize),tau:fortranArray.fortranArrayToJSArray(f_tau,Math.min(m,n),op,elementSize)};if(callback)qr=callback(qr,m,n,f_m,f_n,f_a,f_lda,f_tau,f_work,f_lwork,f_info)});return qr}function cloneMatrix(matrix,height,width){var clone=[];height=height||matrix.length;width=width||matrix[0].length;for(var i=0;i<height;i++){var row=[];clone.push(row);for(var j=0;j<width;j++){row.push(matrix[i][j])}}return clone}function swapRows(matrix,i,j){var tmp=matrix[j];matrix[j]=matrix[i];matrix[i]=tmp;return matrix}function lu(matrix){var result=sgetrf(matrix);var P=ipivToP(matrix.length,result.IPIV);var L=cloneMatrix(result.LU);var m=n=Math.min(matrix.length,matrix[0].length);for(var i=0;i<L.length;i++){for(var j=i;j<L[i].length;j++){if(i==j)L[i][j]=1;else L[i][j]=0}}return{L:L,U:zeroBottomLeft(cloneMatrix(result.LU,n,n)),P:P,IPIV:result.IPIV}}function ipivToP(m,ipiv){var P=eye(m);for(var i=0;i<ipiv.length;i++){
if(i!=ipiv[i]-1)swapRows(P,i,ipiv[i]-1)}return P}function sgetrf(matrix){return getrf(matrix,LAPACK.sgetrf_,FORTRAN_FLOAT)}function dgetrf(matrix){return getrf(matrix,LAPACK.dgetrf_,FORTRAN_DOUBLE)}function getrf(matrix,lapackFunc,elementSize){var result={};matrixOp(matrix,elementSize,function(m,n,f_m,f_n,f_a,f_lda){var f_ipiv=new Buffer(Math.min(m,n)*FORTRAN_INT);var f_info=new Buffer(FORTRAN_INT);lapackFunc(f_m,f_n,f_a,f_m,f_ipiv,f_info);result.LU=fortranArray.fortranArrayToJSMatrix(f_a,m,n,elementSize);result.IPIV=fortranArray.fortranArrayToJSArray(f_ipiv,Math.min(m,n),"readInt32LE",elementSize)});return result}function sgesvd(jobu,jobvt,matrix){var f_jobu=new Buffer(FORTRAN_CHAR);var f_jobvt=new Buffer(FORTRAN_CHAR);f_jobu.writeUInt8(jobu.charCodeAt(0),0);f_jobvt.writeUInt8(jobvt.charCodeAt(0),0);var svd;matrixOp(matrix,FORTRAN_FLOAT,function(m,n,f_m,f_n,f_a,f_lda){var f_s=new Buffer(Math.pow(Math.min(m,n),2)*FORTRAN_FLOAT);var f_u=new Buffer(Math.pow(m,2)*FORTRAN_FLOAT);var f_ldu=new Buffer(FORTRAN_INT);f_ldu.writeInt32LE(m,0);var f_vt=new Buffer(Math.pow(n,2)*FORTRAN_FLOAT);var f_ldvt=new Buffer(FORTRAN_INT);f_ldvt.writeInt32LE(n,0);var lwork=-1;var f_work=new Buffer(FORTRAN_FLOAT);var f_lwork=new Buffer(FORTRAN_INT);f_lwork.writeInt32LE(lwork,0);var f_info=new Buffer(FORTRAN_INT);LAPACK.sgesvd_(f_jobu,f_jobvt,f_m,f_n,f_a,f_lda,f_s,f_u,f_ldu,f_vt,f_ldvt,f_work,f_lwork,f_info);lwork=f_work.readFloatLE(0);f_work=new Buffer(lwork*FORTRAN_FLOAT);f_lwork.writeInt32LE(lwork,0);LAPACK.sgesvd_(f_jobu,f_jobvt,f_m,f_n,f_a,f_lda,f_s,f_u,f_ldu,f_vt,f_ldvt,f_work,f_lwork,f_info);svd={U:fortranArray.fortranArrayToJSMatrix(f_u,m,m,FORTRAN_FLOAT),S:fortranArray.fortranArrayToJSMatrix(f_s,n,n,FORTRAN_FLOAT),VT:fortranArray.fortranArrayToJSMatrix(f_vt,n,n,FORTRAN_FLOAT)}});return svd}exports.sgeqrf=sgeqrf;exports.dgeqrf=dgeqrf;exports.sgesvd=sgesvd;exports.sgetrf=sgetrf;exports.dgetrf=sgetrf;exports.sgesv=sgesv;exports.qr=qr;exports.lu=lu}).call(this,require("buffer").Buffer)},{"./fortranArray":14,buffer:3,ffi:24}],17:[function(require,module,exports){(function(process,Buffer){var assert=require("assert"),debug=require("debug")("ffi:_ForeignFunction"),ref=require("ref"),bindings=require("./bindings"),POINTER_SIZE=ref.sizeof.pointer,FFI_ARG_SIZE=bindings.FFI_ARG_SIZE;function ForeignFunction(cif,funcPtr,returnType,argTypes){debug("creating new ForeignFunction",funcPtr);var numArgs=argTypes.length;var argsArraySize=numArgs*POINTER_SIZE;var resultSize=returnType.size>=ref.sizeof.long?returnType.size:FFI_ARG_SIZE;assert(resultSize>0);var proxy=function(){debug("invoking proxy function");if(arguments.length!==numArgs){throw new TypeError("Expected "+numArgs+" arguments, got "+arguments.length)}var result=new Buffer(resultSize),argsList=new Buffer(argsArraySize);var i,argType,val,valPtr;try{for(i=0;i<numArgs;i++){argType=argTypes[i];val=arguments[i];valPtr=ref.alloc(argType,val);argsList.writePointer(valPtr,i*POINTER_SIZE)}}catch(e){e.message="error setting argument "+i+" - "+e.message;throw e}bindings.ffi_call(cif,funcPtr,result,argsList);result.type=returnType;return result.deref()};proxy.async=function(){debug("invoking async proxy function");var argc=arguments.length;if(argc!==numArgs+1){throw new TypeError("Expected "+(numArgs+1)+" arguments, got "+argc)}var callback=arguments[argc-1];if(typeof callback!=="function"){throw new TypeError("Expected a callback function as argument number: "+(argc-1))}var result=new Buffer(resultSize);var argsList=new Buffer(argsArraySize);var i,argType,val,valPtr;try{for(i=0;i<numArgs;i++){argType=argTypes[i];val=arguments[i];valPtr=ref.alloc(argType,val);argsList.writePointer(valPtr,i*POINTER_SIZE)}}catch(e){e.message="error setting argument "+i+" - "+e.message;return process.nextTick(callback.bind(null,e))}bindings.ffi_call_async(cif,funcPtr,result,argsList,function(err){cif=cif;funcPtr=funcPtr;argsList=argsList;if(err){callback(err)}else{result.type=returnType;callback(null,result.deref())}})};return proxy}module.exports=ForeignFunction}).call(this,require("_process"),require("buffer").Buffer)},{"./bindings":18,_process:11,assert:2,buffer:3,debug:31,ref:35}],18:[function(require,module,exports){module.exports=require("bindings")("ffi_bindings.node")},{bindings:30}],19:[function(require,module,exports){(function(process){var ref=require("ref"),CIF=require("./cif"),assert=require("assert"),debug=require("debug")("ffi:Callback"),_Callback=require("./bindings").Callback;function errorReportCallback(err){if(err){process.nextTick(function(){if(typeof err==="string"){throw new Error(err)}else{throw err}})}}function Callback(retType,argTypes,abi,func){debug("creating new Callback");if(typeof abi==="function"){func=abi;abi=void 0}assert(!!retType,'expected a return "type" object as the first argument');assert(Array.isArray(argTypes),'expected Array of arg "type" objects as the second argument');assert.equal(typeof func,"function","expected a function as the third argument");retType=ref.coerceType(retType);argTypes=argTypes.map(ref.coerceType);var cif=CIF(retType,argTypes,abi);var argc=argTypes.length;var callback=_Callback(cif,retType.size,argc,errorReportCallback,function(retval,params){debug("Callback function being invoked");try{var args=[];for(var i=0;i<argc;i++){var type=argTypes[i];var argPtr=params.readPointer(i*ref.sizeof.pointer,type.size);argPtr.type=type;args.push(argPtr.deref())}var result=func.apply(null,args);try{ref.set(retval,0,result,retType)}catch(e){e.message="error setting return value - "+e.message;throw e}}catch(e){return e}});callback._cif=cif;return callback}module.exports=Callback}).call(this,require("_process"))},{"./bindings":18,"./cif":20,_process:11,assert:2,debug:31,ref:35}],20:[function(require,module,exports){(function(Buffer){var Type=require("./type"),assert=require("assert"),debug=require("debug")("ffi:cif"),ref=require("ref"),bindings=require("./bindings"),POINTER_SIZE=ref.sizeof.pointer,ffi_prep_cif=bindings.ffi_prep_cif,FFI_CIF_SIZE=bindings.FFI_CIF_SIZE,FFI_DEFAULT_ABI=bindings.FFI_DEFAULT_ABI,FFI_OK=bindings.FFI_OK,FFI_BAD_TYPEDEF=bindings.FFI_BAD_TYPEDEF,FFI_BAD_ABI=bindings.FFI_BAD_ABI;function CIF(rtype,types,abi){debug("creating `ffi_cif *` instance");assert(!!rtype,'expected a return "type" object as the first argument');assert(Array.isArray(types),'expected an Array of arg "type" objects as the second argument');var cif=new Buffer(FFI_CIF_SIZE);var numArgs=types.length;var _argtypesptr=new Buffer(numArgs*POINTER_SIZE);var _rtypeptr=Type(rtype);for(var i=0;i<numArgs;i++){var type=types[i];var ffiType=Type(type);_argtypesptr.writePointer(ffiType,i*POINTER_SIZE)}cif.rtnTypePtr=_rtypeptr;cif.argTypesPtr=_argtypesptr;if(typeof abi==="undefined"){debug("no ABI specified (this is OK), using FFI_DEFAULT_ABI");abi=FFI_DEFAULT_ABI}var status=ffi_prep_cif(cif,numArgs,_rtypeptr,_argtypesptr,abi);if(status!==FFI_OK){switch(status){case FFI_BAD_TYPEDEF:var err=new Error("ffi_prep_cif() returned an FFI_BAD_TYPEDEF error");err.code="FFI_BAD_TYPEDEF";err.errno=status;throw err;break;case FFI_BAD_ABI:var err=new Error("ffi_prep_cif() returned an FFI_BAD_ABI error");err.code="FFI_BAD_ABI";err.errno=status;throw err;break;default:throw new Error("ffi_prep_cif() returned an error: "+status);break}}return cif}module.exports=CIF}).call(this,require("buffer").Buffer)},{"./bindings":18,"./type":29,assert:2,buffer:3,debug:31,ref:35}],21:[function(require,module,exports){(function(Buffer){var Type=require("./type"),assert=require("assert"),debug=require("debug")("ffi:cif_var"),ref=require("ref"),bindings=require("./bindings"),POINTER_SIZE=ref.sizeof.pointer,ffi_prep_cif_var=bindings.ffi_prep_cif_var,FFI_CIF_SIZE=bindings.FFI_CIF_SIZE,FFI_DEFAULT_ABI=bindings.FFI_DEFAULT_ABI,FFI_OK=bindings.FFI_OK,FFI_BAD_TYPEDEF=bindings.FFI_BAD_TYPEDEF,FFI_BAD_ABI=bindings.FFI_BAD_ABI;function CIF_var(rtype,types,numFixedArgs,abi){debug("creating `ffi_cif *` instance with `ffi_prep_cif_var()`");assert(!!rtype,'expected a return "type" object as the first argument');assert(Array.isArray(types),'expected an Array of arg "type" objects as the second argument');assert(numFixedArgs>=1,"expected the number of fixed arguments to be at least 1");var cif=new Buffer(FFI_CIF_SIZE);var numTotalArgs=types.length;var _argtypesptr=new Buffer(numTotalArgs*POINTER_SIZE);var _rtypeptr=Type(rtype);for(var i=0;i<numTotalArgs;i++){var ffiType=Type(types[i]);_argtypesptr.writePointer(ffiType,i*POINTER_SIZE)}cif.rtnTypePtr=_rtypeptr;cif.argTypesPtr=_argtypesptr;if(typeof abi==="undefined"){debug("no ABI specified (this is OK), using FFI_DEFAULT_ABI");abi=FFI_DEFAULT_ABI}var status=ffi_prep_cif_var(cif,numFixedArgs,numTotalArgs,_rtypeptr,_argtypesptr,abi);if(status!==FFI_OK){switch(status){case FFI_BAD_TYPEDEF:var err=new Error("ffi_prep_cif_var() returned an FFI_BAD_TYPEDEF error");err.code="FFI_BAD_TYPEDEF";err.errno=status;throw err;break;case FFI_BAD_ABI:var err=new Error("ffi_prep_cif_var() returned an FFI_BAD_ABI error");err.code="FFI_BAD_ABI";err.errno=status;throw err;break;default:var err=new Error("ffi_prep_cif_var() returned an error: "+status);err.errno=status;throw err;break}}return cif}module.exports=CIF_var}).call(this,require("buffer").Buffer)},{"./bindings":18,"./type":29,assert:2,buffer:3,debug:31,ref:35}],22:[function(require,module,exports){(function(Buffer){var ForeignFunction=require("./foreign_function"),assert=require("assert"),debug=require("debug")("ffi:DynamicLibrary"),bindings=require("./bindings"),funcs=bindings.StaticFunctions,ref=require("ref"),read=require("fs").readFileSync;var int=ref.types.int,voidPtr=ref.refType(ref.types.void);var dlopen=ForeignFunction(funcs.dlopen,voidPtr,["string",int]),dlclose=ForeignFunction(funcs.dlclose,int,[voidPtr]),dlsym=ForeignFunction(funcs.dlsym,voidPtr,[voidPtr,"string"]),dlerror=ForeignFunction(funcs.dlerror,"string",[]);function DynamicLibrary(path,mode){if(!(this instanceof DynamicLibrary)){return new DynamicLibrary(path,mode)}debug("new DynamicLibrary()",path,mode);if(null==mode){mode=DynamicLibrary.FLAGS.RTLD_LAZY}this._handle=dlopen(path,mode);assert(Buffer.isBuffer(this._handle),"expected a Buffer instance to be returned from `dlopen()`");if(this._handle.isNull()){var err=this.error();var match;if(match=err.match(/^(([^ \t()])+\.so([^ \t:()])*):([ \t])*/)){var content=read(match[1],"ascii");if(match=content.match(/GROUP *\( *(([^ )])+)/)){return DynamicLibrary.call(this,match[1],mode)}}throw new Error("Dynamic Linking Error: "+err)}}module.exports=DynamicLibrary;DynamicLibrary.FLAGS={};Object.keys(bindings).forEach(function(k){if(!/^RTLD_/.test(k))return;var desc=Object.getOwnPropertyDescriptor(bindings,k);Object.defineProperty(DynamicLibrary.FLAGS,k,desc)});DynamicLibrary.prototype.close=function(){debug("dlclose()");return dlclose(this._handle)};DynamicLibrary.prototype.get=function(symbol){debug("dlsym()",symbol);assert.equal("string",typeof symbol);var ptr=dlsym(this._handle,symbol);assert(Buffer.isBuffer(ptr));if(ptr.isNull()){throw new Error("Dynamic Symbol Retrieval Error: "+this.error())}ptr.name=symbol;return ptr};DynamicLibrary.prototype.error=function error(){debug("dlerror()");return dlerror()}}).call(this,{isBuffer:require("/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"./bindings":18,"./foreign_function":25,"/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":9,assert:2,debug:31,fs:1,ref:35}],23:[function(require,module,exports){(function(process){var DynamicLibrary=require("./dynamic_library"),ForeignFunction=require("./foreign_function"),ref=require("ref"),errnoPtr=null,int=ref.types.int,intPtr=ref.refType(int);if(process.platform=="darwin"||process.platform=="mac"){var __error=DynamicLibrary().get("__error");errnoPtr=ForeignFunction(__error,intPtr,[])}else if(process.platform=="win32"){var _errno=DynamicLibrary("msvcrt.dll").get("_errno");errnoPtr=ForeignFunction(_errno,intPtr,[])}else{var errnoGlobal=DynamicLibrary().get("errno").reinterpret(int.size);errnoPtr=function(){return errnoGlobal};errnoGlobal.type=int}function errno(){return errnoPtr().deref()}module.exports=errno}).call(this,require("_process"))},{"./dynamic_library":22,"./foreign_function":25,_process:11,ref:35}],24:[function(require,module,exports){var ref=require("ref");var assert=require("assert");var debug=require("debug")("ffi:ffi");var Struct=require("ref-struct");var bindings=require("./bindings");["HAS_OBJC","FFI_TYPES",,"FFI_OK","FFI_BAD_TYPEDEF","FFI_BAD_ABI","FFI_DEFAULT_ABI","FFI_FIRST_ABI","FFI_LAST_ABI","FFI_SYSV","FFI_UNIX64","FFI_WIN64","FFI_VFP","FFI_STDCALL","FFI_THISCALL","FFI_FASTCALL","RTLD_LAZY","RTLD_NOW","RTLD_LOCAL","RTLD_GLOBAL","RTLD_NOLOAD","RTLD_NODELETE","RTLD_FIRST","RTLD_NEXT","RTLD_DEFAULT","RTLD_SELF","RTLD_MAIN_ONLY","FFI_MS_CDECL"].forEach(function(prop){if(!bindings.hasOwnProperty(prop)){return debug("skipping exporting of non-existant property",prop)}var desc=Object.getOwnPropertyDescriptor(bindings,prop);Object.defineProperty(exports,prop,desc)});Object.keys(bindings.FFI_TYPES).forEach(function(name){var type=bindings.FFI_TYPES[name];type.name=name;if(name==="pointer")return;ref.types[name].ffi_type=type});ref.types.size_t.ffi_type=bindings.FFI_TYPES.pointer;var CString=ref.types.CString||ref.types.Utf8String;CString.ffi_type=bindings.FFI_TYPES.pointer;ref.types.Object.ffi_type=bindings.FFI_TYPES.pointer;switch(ref.sizeof.long){case 4:ref.types.ulong.ffi_type=bindings.FFI_TYPES.uint32;ref.types.long.ffi_type=bindings.FFI_TYPES.int32;break;case 8:ref.types.ulong.ffi_type=bindings.FFI_TYPES.uint64;ref.types.long.ffi_type=bindings.FFI_TYPES.int64;break;default:throw new Error('unsupported "long" size: '+ref.sizeof.long)}exports.types=ref.types;exports.CIF=require("./cif");exports.CIF_var=require("./cif_var");exports.Function=require("./function");exports.ForeignFunction=require("./foreign_function");exports.VariadicForeignFunction=require("./foreign_function_var");exports.DynamicLibrary=require("./dynamic_library");exports.Library=require("./library");exports.Callback=require("./callback");exports.errno=require("./errno");exports.ffiType=require("./type");exports.LIB_EXT=exports.Library.EXT;exports.FFI_TYPE=exports.ffiType.FFI_TYPE},{"./bindings":18,"./callback":19,"./cif":20,"./cif_var":21,"./dynamic_library":22,"./errno":23,"./foreign_function":25,"./foreign_function_var":26,"./function":27,"./library":28,"./type":29,assert:2,debug:31,ref:35,"ref-struct":34}],25:[function(require,module,exports){(function(Buffer){var CIF=require("./cif"),_ForeignFunction=require("./_foreign_function"),debug=require("debug")("ffi:ForeignFunction"),assert=require("assert"),ref=require("ref");function ForeignFunction(funcPtr,returnType,argTypes,abi){debug("creating new ForeignFunction",funcPtr);assert(Buffer.isBuffer(funcPtr),"expected Buffer as first argument");assert(!!returnType,'expected a return "type" object as the second argument');assert(Array.isArray(argTypes),'expected Array of arg "type" objects as the third argument');returnType=ref.coerceType(returnType);argTypes=argTypes.map(ref.coerceType);var cif=CIF(returnType,argTypes,abi);return _ForeignFunction(cif,funcPtr,returnType,argTypes)}module.exports=ForeignFunction}).call(this,{isBuffer:require("/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"./_foreign_function":17,"./cif":20,"/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":9,assert:2,debug:31,ref:35}],26:[function(require,module,exports){(function(Buffer){var CIF_var=require("./cif_var"),Type=require("./type"),_ForeignFunction=require("./_foreign_function"),assert=require("assert"),debug=require("debug")("ffi:VariadicForeignFunction"),ref=require("ref"),bindings=require("./bindings"),POINTER_SIZE=ref.sizeof.pointer,FFI_ARG_SIZE=bindings.FFI_ARG_SIZE;function VariadicForeignFunction(funcPtr,returnType,fixedArgTypes,abi){debug("creating new VariadicForeignFunction",funcPtr);var cache={};assert(Buffer.isBuffer(funcPtr),"expected Buffer as first argument");assert(!!returnType,'expected a return "type" object as the second argument');assert(Array.isArray(fixedArgTypes),'expected Array of arg "type" objects as the third argument');var numFixedArgs=fixedArgTypes.length;fixedArgTypes=fixedArgTypes.map(ref.coerceType);var fixedKey=fixedArgTypes.map(function(type){return getId(type)});function variadic_function_generator(){debug("variadic_function_generator invoked");var argTypes=fixedArgTypes.slice();var key=fixedKey.slice();for(var i=0;i<arguments.length;i++){var type=ref.coerceType(arguments[i]);argTypes.push(type);var ffi_type=Type(type);assert(ffi_type.name);key.push(getId(type))}var rtnType=ref.coerceType(variadic_function_generator.returnType);var rtnName=getId(rtnType);assert(rtnName);key=rtnName+key.join("");var func=cache[key];if(func){debug("cache hit for key:",key)}else{debug("creating the variadic ffi_cif instance for key:",key);var cif=CIF_var(returnType,argTypes,numFixedArgs,abi);func=cache[key]=_ForeignFunction(cif,funcPtr,rtnType,argTypes)}return func}variadic_function_generator.returnType=returnType;return variadic_function_generator}module.exports=VariadicForeignFunction;var idKey="_ffiId";function getId(type){if(!type.hasOwnProperty(idKey)){type[idKey]=((1+Math.random())*65536|0).toString(16)}return type[idKey]}}).call(this,{isBuffer:require("/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"./_foreign_function":17,"./bindings":18,"./cif_var":21,"./type":29,"/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":9,assert:2,debug:31,ref:35}],27:[function(require,module,exports){(function(Buffer){var ref=require("ref"),assert=require("assert"),bindings=require("./bindings"),Callback=require("./callback"),ForeignFunction=require("./foreign_function"),debug=require("debug")("ffi:FunctionType");module.exports=Function;function Function(retType,argTypes,abi){if(!(this instanceof Function)){return new Function(retType,argTypes,abi)}debug("creating new FunctionType");assert(!!retType,'expected a return "type" object as the first argument');assert(Array.isArray(argTypes),'expected Array of arg "type" objects as the second argument');this.retType=ref.coerceType(retType);this.argTypes=argTypes.map(ref.coerceType);this.abi=null==abi?bindings.FFI_DEFAULT_ABI:abi}Function.prototype.ffi_type=bindings.FFI_TYPES.pointer;Function.prototype.size=ref.sizeof.pointer;Function.prototype.alignment=ref.alignof.pointer;Function.prototype.indirection=1;Function.prototype.toPointer=function toPointer(fn){return Callback(this.retType,this.argTypes,this.abi,fn)};Function.prototype.toFunction=function toFunction(buf){return ForeignFunction(buf,this.retType,this.argTypes,this.abi)};Function.prototype.get=function get(buffer,offset){debug('ffi FunctionType "get" function');var ptr=buffer.readPointer(offset);return this.toFunction(ptr)};Function.prototype.set=function set(buffer,offset,value){debug('ffi FunctionType "set" function');var ptr;if("function"==typeof value){ptr=this.toPointer(value)}else if(Buffer.isBuffer(value)){ptr=value}else{throw new Error("don't know how to set callback function for: "+value)}buffer.writePointer(ptr,offset)}}).call(this,{isBuffer:require("/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"./bindings":18,"./callback":19,"./foreign_function":25,"/Users/hgibson/git/scribe-dev/scribe-plugins/scribe-plugin-ngrams/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":9,assert:2,debug:31,ref:35}],28:[function(require,module,exports){(function(process){var DynamicLibrary=require("./dynamic_library"),ForeignFunction=require("./foreign_function"),VariadicForeignFunction=require("./foreign_function_var"),debug=require("debug")("ffi:Library"),RTLD_NOW=DynamicLibrary.FLAGS.RTLD_NOW;var EXT=Library.EXT={linux:".so",linux2:".so",sunos:".so",solaris:".so",freebsd:".so",openbsd:".so",darwin:".dylib",mac:".dylib",win32:".dll"}[process.platform];function Library(libfile,funcs,lib){debug("creating Library object for",libfile);if(libfile&&libfile.indexOf(EXT)===-1){debug("appending library extension to library name",EXT);libfile+=EXT}if(!lib){lib={}}var dl=new DynamicLibrary(libfile||null,RTLD_NOW);Object.keys(funcs||{}).forEach(function(func){debug("defining function",func);var fptr=dl.get(func),info=funcs[func];if(fptr.isNull()){throw new Error('Library: "'+libfile+'" returned NULL function pointer for "'+func+'"')}var resultType=info[0],paramTypes=info[1],fopts=info[2],abi=fopts&&fopts.abi,async=fopts&&fopts.async,varargs=fopts&&fopts.varargs;if(varargs){lib[func]=VariadicForeignFunction(fptr,resultType,paramTypes,abi)}else{var ff=ForeignFunction(fptr,resultType,paramTypes,abi);lib[func]=async?ff.async:ff}});return lib}module.exports=Library}).call(this,require("_process"))},{"./dynamic_library":22,"./foreign_function":25,"./foreign_function_var":26,_process:11,debug:31}],29:[function(require,module,exports){(function(Buffer){var ref=require("ref");var assert=require("assert");var debug=require("debug")("ffi:types");var Struct=require("ref-struct");var bindings=require("./bindings");var FFI_TYPE=Type.FFI_TYPE=Struct();FFI_TYPE.defineProperty("size",ref.types.size_t);FFI_TYPE.defineProperty("alignment",ref.types.ushort);FFI_TYPE.defineProperty("type",ref.types.ushort);var ffi_type_ptr_array=ref.refType(ref.refType(FFI_TYPE));FFI_TYPE.defineProperty("elements",ffi_type_ptr_array);assert.equal(bindings.FFI_TYPE_SIZE,FFI_TYPE.size);function Type(type){type=ref.coerceType(type);debug("Type()",type.name||type);assert(type.indirection>=1,'invalid "type" given: '+(type.name||type));var rtn;if(type.indirection===1){rtn=type.ffi_type}else{rtn=bindings.FFI_TYPES.pointer}if(!rtn&&type.type){rtn=bindings.FFI_TYPES.pointer}if(!rtn&&type.fields){debug('creating an `ffi_type` for given "ref-struct" type');var fields=type.fields,fieldNames=Object.keys(fields),numFields=fieldNames.length,numElements=0,ffi_type=new FFI_TYPE,i=0,field,ffi_type_ptr;ffi_type.size=0;ffi_type.alignment=0;ffi_type.type=13;for(i=0;i<numFields;i++){field=fields[fieldNames[i]];if(field.type.fixedLength>0){numElements+=field.type.fixedLength}else{numElements+=1}}var size=ref.sizeof.pointer*(numElements+1);var elements=ffi_type.elements=new Buffer(size);var index=0;for(i=0;i<numFields;i++){field=fields[fieldNames[i]];if(field.type.fixedLength>0){ffi_type_ptr=Type(field.type.type);for(var j=0;j<field.type.fixedLength;j++){elements.writePointer(ffi_type_ptr,index++*ref.sizeof.pointer)}}else{ffi_type_ptr=Type(field.type);elements.writePointer(ffi_type_ptr,index++*ref.sizeof.pointer)}}elements.writePointer(ref.NULL,index*ref.sizeof.pointer);rtn=type.ffi_type=ffi_type.ref()}if(!rtn&&type.name){if("CString"==type.name){rtn=type.ffi_type=bindings.FFI_TYPES.pointer}else{var cur=type;while(!rtn&&cur){rtn=cur.ffi_type=bindings.FFI_TYPES[cur.name];cur=Object.getPrototypeOf(cur)}}}assert(rtn,"Could not determine the `ffi_type` instance for type: "+(type.name||type));debug("returning `ffi_type`",rtn.name);return rtn}module.exports=Type}).call(this,require("buffer").Buffer)},{"./bindings":18,assert:2,buffer:3,debug:31,ref:35,"ref-struct":34}],30:[function(require,module,exports){(function(process,__filename){var fs=require("fs"),path=require("path"),join=path.join,dirname=path.dirname,exists=fs.existsSync||path.existsSync,defaults={arrow:process.env.NODE_BINDINGS_ARROW||"  ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,version:process.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};function bindings(opts){if(typeof opts=="string"){opts={bindings:opts}}else if(!opts){opts={}}opts.__proto__=defaults;if(!opts.module_root){opts.module_root=exports.getRoot(exports.getFileName())}if(path.extname(opts.bindings)!=".node"){opts.bindings+=".node"}var tries=[],i=0,l=opts.try.length,n,b,err;for(;i<l;i++){n=join.apply(null,opts.try[i].map(function(p){return opts[p]||p}));tries.push(n);try{b=opts.path?require.resolve(n):require(n);if(!opts.path){b.path=n}return b}catch(e){if(!/not find/i.test(e.message)){throw e}}}err=new Error("Could not locate the bindings file. Tried:\n"+tries.map(function(a){return opts.arrow+a}).join("\n"));err.tries=tries;throw err}module.exports=exports=bindings;exports.getFileName=function getFileName(calling_file){var origPST=Error.prepareStackTrace,origSTL=Error.stackTraceLimit,dummy={},fileName;Error.stackTraceLimit=10;Error.prepareStackTrace=function(e,st){for(var i=0,l=st.length;i<l;i++){fileName=st[i].getFileName();if(fileName!==__filename){if(calling_file){if(fileName!==calling_file){return}}else{return}}}};Error.captureStackTrace(dummy);dummy.stack;Error.prepareStackTrace=origPST;Error.stackTraceLimit=origSTL;return fileName};exports.getRoot=function getRoot(file){var dir=dirname(file),prev;while(true){if(dir==="."){dir=process.cwd()}if(exists(join(dir,"package.json"))||exists(join(dir,"node_modules"))){return dir}if(prev===dir){throw new Error('Could not find module root given file: "'+file+'". Do you have a `package.json` file? ')}prev=dir;dir=join(dir,"..")}}}).call(this,require("_process"),"/node_modules/lapack/node_modules/ffi/node_modules/bindings/bindings.js")},{_process:11,fs:1,path:10}],31:[function(require,module,exports){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}exports.formatters.j=function(v){return JSON.stringify(v)};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c);return args}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}},{"./debug":32}],32:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args=["%o"].concat(args)}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});if("function"===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args)}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn}function enable(namespaces){exports.save(namespaces);var split=(namespaces||"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:33}],33:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if("string"==typeof val)return parse(val);return options.long?long(val):short(val)};function parse(str){str=""+str;if(str.length>1e4)return;var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}function short(ms){if(ms>=d)return Math.round(ms/d)+"d";if(ms>=h)return Math.round(ms/h)+"h";if(ms>=m)return Math.round(ms/m)+"m";if(ms>=s)return Math.round(ms/s)+"s";return ms+"ms"}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+" "+name;return Math.ceil(ms/n)+" "+name+"s"}},{}],34:[function(require,module,exports){(function(Buffer){var ref=require("ref");var util=require("util");var assert=require("assert");var debug=require("debug")("ref:struct");module.exports=Struct;function Struct(){debug('defining new struct "type"');function StructType(arg,data){if(!(this instanceof StructType)){return new StructType(arg,data)}debug("creating new struct instance");var store;if(Buffer.isBuffer(arg)){debug("using passed-in Buffer instance to back the struct",arg);assert(arg.length>=StructType.size,"Buffer instance must be at least "+StructType.size+" bytes to back this struct type");store=arg;arg=data}else{debug("creating new Buffer instance to back the struct (size: %d)",StructType.size);
store=new Buffer(StructType.size)}store.type=StructType;this["ref.buffer"]=store;if(arg){for(var key in arg){this[key]=arg[key]}}StructType._instanceCreated=true}StructType.prototype=Object.create(proto,{constructor:{value:StructType,enumerable:false,writable:true,configurable:true}});StructType.defineProperty=defineProperty;StructType.toString=toString;StructType.fields={};StructType.size=0;StructType.alignment=0;StructType.indirection=1;StructType.get=get;StructType.set=set;var arg=arguments[0];if(Array.isArray(arg)){arg.forEach(function(a){var type=a[0];var name=a[1];StructType.defineProperty(name,type)})}else if(typeof arg==="object"){Object.keys(arg).forEach(function(name){var type=arg[name];StructType.defineProperty(name,type)})}return StructType}function get(buffer,offset){debug('Struct "type" getter for buffer at offset',buffer,offset);if(offset>0){buffer=buffer.slice(offset)}return new this(buffer)}function set(buffer,offset,value){debug('Struct "type" setter for buffer at offset',buffer,offset,value);var isStruct=value instanceof this;if(isStruct){value["ref.buffer"].copy(buffer,offset,0,this.size)}else{if(offset>0){buffer=buffer.slice(offset)}new this(buffer,value)}}function toString(){return"[StructType]"}function defineProperty(name,type){debug("defining new struct type field",name);type=ref.coerceType(type);assert(!this._instanceCreated,"an instance of this Struct type has already "+'been created, cannot add new "fields" anymore');assert.equal("string",typeof name,'expected a "string" field name');assert(type&&/object|function/i.test(typeof type)&&"size"in type&&"indirection"in type,'expected a "type" object describing the field type: "'+type+'"');assert(type.indirection>1||type.size>0,'"type" object must have a size greater than 0');assert(!(name in this.prototype),'the field "'+name+'" already exists in this Struct type');var field={type:type};this.fields[name]=field;var desc={enumerable:true,configurable:true};desc.get=function(){debug('getting "%s" struct field (offset: %d)',name,field.offset);return ref.get(this["ref.buffer"],field.offset,type)};desc.set=function(value){debug('setting "%s" struct field (offset: %d)',name,field.offset,value);return ref.set(this["ref.buffer"],field.offset,value,type)};recalc(this);Object.defineProperty(this.prototype,name,desc)}function recalc(struct){struct.size=0;struct.alignment=0;var fieldNames=Object.keys(struct.fields);fieldNames.forEach(function(name){var field=struct.fields[name];var type=field.type;var alignment=type.alignment||ref.alignof.pointer;if(type.indirection>1){alignment=ref.alignof.pointer}struct.alignment=Math.max(struct.alignment,alignment)});fieldNames.forEach(function(name){var field=struct.fields[name];var type=field.type;if(null!=type.fixedLength){field.offset=addType(type.type);for(var i=1;i<type.fixedLength;i++){addType(type.type)}}else{field.offset=addType(type)}});function addType(type){var offset=struct.size;var align=type.indirection===1?type.alignment:ref.alignof.pointer;var padding=(align-offset%align)%align;var size=type.indirection===1?type.size:ref.sizeof.pointer;offset+=padding;assert.equal(offset%align,0,"offset should align");struct.size=offset+size;return offset}var left=struct.size%struct.alignment;if(left>0){debug("additional padding to the end of struct:",struct.alignment-left);struct.size+=struct.alignment-left}}var proto={};proto["ref.buffer"]=ref.NULL;proto.toObject=function toObject(){var obj={};Object.keys(this.constructor.fields).forEach(function(k){obj[k]=this[k]},this);return obj};proto.toJSON=function toJSON(){return this.toObject()};proto.inspect=function inspect(){var obj=this.toObject();Object.keys(this).forEach(function(k){obj[k]=this[k]},this);return util.inspect(obj)};proto.ref=function ref(){return this["ref.buffer"]}}).call(this,require("buffer").Buffer)},{assert:2,buffer:3,debug:31,ref:35,util:13}],35:[function(require,module,exports){(function(Buffer){var assert=require("assert");var debug=require("debug")("ref");exports=module.exports=require("bindings")("binding");exports.refType=function refType(type){var _type=exports.coerceType(type);var rtn=Object.create(_type);rtn.indirection++;if(_type.name){rtn.name=_type.name+"*"}return rtn};exports.derefType=function derefType(type){var _type=exports.coerceType(type);if(_type.indirection===1){throw new Error("Cannot create deref'd type for type with indirection 1")}var rtn=Object.getPrototypeOf(_type);if(rtn.indirection!==_type.indirection-1){rtn=Object.create(_type);rtn.indirection--}return rtn};exports.coerceType=function coerceType(type){var rtn=type;if(typeof rtn==="string"){rtn=exports.types[type];if(rtn)return rtn;rtn=type.replace(/\s+/g,"").toLowerCase();if(rtn==="pointer"){rtn=exports.refType(exports.types.void)}else if(rtn==="string"){rtn=exports.types.CString}else{var refCount=0;rtn=rtn.replace(/\*/g,function(){refCount++;return""});rtn=exports.types[rtn];if(refCount>0){if(!(rtn&&"size"in rtn&&"indirection"in rtn)){throw new TypeError('could not determine a proper "type" from: '+JSON.stringify(type))}for(var i=0;i<refCount;i++){rtn=exports.refType(rtn)}}}}if(!(rtn&&"size"in rtn&&"indirection"in rtn)){throw new TypeError('could not determine a proper "type" from: '+JSON.stringify(type))}return rtn};exports.getType=function getType(buffer){if(!buffer.type){debug('WARN: no "type" found on buffer, setting default "type"',buffer);buffer.type={};buffer.type.size=buffer.length;buffer.type.indirection=1;buffer.type.get=function get(){throw new Error('unknown "type"; cannot get()')};buffer.type.set=function set(){throw new Error('unknown "type"; cannot set()')}}return exports.coerceType(buffer.type)};exports.get=function get(buffer,offset,type){if(!offset){offset=0}if(type){type=exports.coerceType(type)}else{type=exports.getType(buffer)}debug("get(): (offset: %d)",offset,buffer);assert(type.indirection>0,'"indirection" level must be at least 1');if(type.indirection===1){return type.get(buffer,offset)}else{var size=type.indirection===2?type.size:exports.sizeof.pointer;var reference=exports.readPointer(buffer,offset,size);reference.type=exports.derefType(type);return reference}};exports.set=function set(buffer,offset,value,type){if(!offset){offset=0}if(type){type=exports.coerceType(type)}else{type=exports.getType(buffer)}debug("set(): (offset: %d)",offset,buffer,value);assert(type.indirection>=1,'"indirection" level must be at least 1');if(type.indirection===1){type.set(buffer,offset,value)}else{exports.writePointer(buffer,offset,value)}};exports.alloc=function alloc(_type,value){var type=exports.coerceType(_type);debug('allocating Buffer for type with "size"',type.size);var size;if(type.indirection===1){size=type.size}else{size=exports.sizeof.pointer}var buffer=new Buffer(size);buffer.type=type;if(arguments.length>=2){debug("setting value on allocated buffer",value);exports.set(buffer,0,value,type)}return buffer};exports.allocCString=function allocCString(string,encoding){if(null==string||Buffer.isBuffer(string)&&exports.isNull(string)){return exports.NULL}var size=Buffer.byteLength(string,encoding)+1;var buffer=new Buffer(size);exports.writeCString(buffer,0,string,encoding);buffer.type=charPtrType;return buffer};exports.writeCString=function writeCString(buffer,offset,string,encoding){assert(Buffer.isBuffer(buffer),"expected a Buffer as the first argument");assert.equal("string",typeof string,'expected a "string" as the third argument');if(!offset){offset=0}if(!encoding){encoding="utf8"}var size=buffer.length-offset;var len=buffer.write(string,offset,size,encoding);buffer.writeUInt8(0,offset+len)};exports["readInt64"+exports.endianness]=exports.readInt64;exports["readUInt64"+exports.endianness]=exports.readUInt64;exports["writeInt64"+exports.endianness]=exports.writeInt64;exports["writeUInt64"+exports.endianness]=exports.writeUInt64;var opposite=exports.endianness=="LE"?"BE":"LE";var int64temp=new Buffer(exports.sizeof.int64);var uint64temp=new Buffer(exports.sizeof.uint64);exports["readInt64"+opposite]=function(buffer,offset){for(var i=0;i<exports.sizeof.int64;i++){int64temp[i]=buffer[offset+exports.sizeof.int64-i-1]}return exports.readInt64(int64temp,0)};exports["readUInt64"+opposite]=function(buffer,offset){for(var i=0;i<exports.sizeof.uint64;i++){uint64temp[i]=buffer[offset+exports.sizeof.uint64-i-1]}return exports.readUInt64(uint64temp,0)};exports["writeInt64"+opposite]=function(buffer,offset,value){exports.writeInt64(int64temp,0,value);for(var i=0;i<exports.sizeof.int64;i++){buffer[offset+i]=int64temp[exports.sizeof.int64-i-1]}};exports["writeUInt64"+opposite]=function(buffer,offset,value){exports.writeUInt64(uint64temp,0,value);for(var i=0;i<exports.sizeof.uint64;i++){buffer[offset+i]=uint64temp[exports.sizeof.uint64-i-1]}};exports.ref=function ref(buffer){debug("creating a reference to buffer",buffer);var type=exports.refType(exports.getType(buffer));return exports.alloc(type,buffer)};exports.deref=function deref(buffer){debug("dereferencing buffer",buffer);return exports.get(buffer)};exports._attach=function _attach(buf,obj){if(!buf._refs){buf._refs=[]}buf._refs.push(obj)};exports._writeObject=exports.writeObject;exports.writeObject=function writeObject(buf,offset,obj,persistent){debug("writing Object to buffer",buf,offset,obj,persistent);exports._writeObject(buf,offset,obj,persistent);exports._attach(buf,obj)};exports._writePointer=exports.writePointer;exports.writePointer=function writePointer(buf,offset,ptr){debug("writing pointer to buffer",buf,offset,ptr);exports._writePointer(buf,offset,ptr);exports._attach(buf,ptr)};exports._reinterpret=exports.reinterpret;exports.reinterpret=function reinterpret(buffer,size,offset){debug('reinterpreting buffer to "%d" bytes',size);var rtn=exports._reinterpret(buffer,size,offset||0);exports._attach(rtn,buffer);return rtn};exports._reinterpretUntilZeros=exports.reinterpretUntilZeros;exports.reinterpretUntilZeros=function reinterpretUntilZeros(buffer,size,offset){debug('reinterpreting buffer to until "%d" NULL (0) bytes are found',size);var rtn=exports._reinterpretUntilZeros(buffer,size,offset||0);exports._attach(rtn,buffer);return rtn};var types=exports.types={};types.void={size:0,indirection:1,get:function get(buf,offset){debug("getting `void` type (returns `null`)");return null},set:function set(buf,offset,val){debug("setting `void` type (no-op)")}};types.int8={size:exports.sizeof.int8,indirection:1,get:function get(buf,offset){return buf.readInt8(offset||0)},set:function set(buf,offset,val){if(typeof val==="string"){val=val.charCodeAt(0)}return buf.writeInt8(val,offset||0)}};types.uint8={size:exports.sizeof.uint8,indirection:1,get:function get(buf,offset){return buf.readUInt8(offset||0)},set:function set(buf,offset,val){if(typeof val==="string"){val=val.charCodeAt(0)}return buf.writeUInt8(val,offset||0)}};types.int16={size:exports.sizeof.int16,indirection:1,get:function get(buf,offset){return buf["readInt16"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeInt16"+exports.endianness](val,offset||0)}};types.uint16={size:exports.sizeof.uint16,indirection:1,get:function get(buf,offset){return buf["readUInt16"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeUInt16"+exports.endianness](val,offset||0)}};types.int32={size:exports.sizeof.int32,indirection:1,get:function get(buf,offset){return buf["readInt32"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeInt32"+exports.endianness](val,offset||0)}};types.uint32={size:exports.sizeof.uint32,indirection:1,get:function get(buf,offset){return buf["readUInt32"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeUInt32"+exports.endianness](val,offset||0)}};types.int64={size:exports.sizeof.int64,indirection:1,get:function get(buf,offset){return buf["readInt64"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeInt64"+exports.endianness](val,offset||0)}};types.uint64={size:exports.sizeof.uint64,indirection:1,get:function get(buf,offset){return buf["readUInt64"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeUInt64"+exports.endianness](val,offset||0)}};types.float={size:exports.sizeof.float,indirection:1,get:function get(buf,offset){return buf["readFloat"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeFloat"+exports.endianness](val,offset||0)}};types.double={size:exports.sizeof.double,indirection:1,get:function get(buf,offset){return buf["readDouble"+exports.endianness](offset||0)},set:function set(buf,offset,val){return buf["writeDouble"+exports.endianness](val,offset||0)}};types.Object={size:exports.sizeof.Object,indirection:1,get:function get(buf,offset){return buf.readObject(offset||0)},set:function set(buf,offset,val){return buf.writeObject(val,offset||0)}};types.CString={size:exports.sizeof.pointer,alignment:exports.alignof.pointer,indirection:1,get:function get(buf,offset){var _buf=exports.readPointer(buf,offset);if(exports.isNull(_buf)){return null}return exports.readCString(_buf,0)},set:function set(buf,offset,val){var _buf;if(Buffer.isBuffer(val)){_buf=val}else{_buf=exports.allocCString(val)}return exports.writePointer(buf,offset,_buf)}};var utfstringwarned=false;Object.defineProperty(types,"Utf8String",{enumerable:false,configurable:true,get:function(){if(!utfstringwarned){utfstringwarned=true;console.error('"Utf8String" type is deprecated, use "CString" instead')}return types.CString}});["bool","byte","char","uchar","short","ushort","int","uint","long","ulong","longlong","ulonglong","size_t"].forEach(function(name){var unsigned=name==="bool"||name==="byte"||name==="size_t"||name[0]==="u";var size=exports.sizeof[name];assert(size>=1&&size<=8);var typeName="int"+size*8;if(unsigned){typeName="u"+typeName}var type=exports.types[typeName];assert(type);exports.types[name]=Object.create(type)});Object.keys(exports.alignof).forEach(function(name){if(name==="pointer")return;exports.types[name].alignment=exports.alignof[name];assert(exports.types[name].alignment>0)});exports.types.bool.get=function(_get){return function get(buf,offset){return _get(buf,offset)?true:false}}(exports.types.bool.get);exports.types.bool.set=function(_set){return function set(buf,offset,val){if(typeof val!=="number"){val=val?1:0}return _set(buf,offset,val)}}(exports.types.bool.set);Object.keys(exports.types).forEach(function(name){exports.types[name].name=name});var charPtrType=exports.refType(exports.types.char);exports.NULL.type=exports.types.void;exports.NULL_POINTER=exports.ref(exports.NULL);Buffer.prototype.address=function address(){return exports.address(this,0)};Buffer.prototype.hexAddress=function hexAddress(){return exports.hexAddress(this,0)};Buffer.prototype.isNull=function isNull(){return exports.isNull(this,0)};Buffer.prototype.ref=function ref(){return exports.ref(this)};Buffer.prototype.deref=function deref(){return exports.deref(this)};Buffer.prototype.readObject=function readObject(offset){return exports.readObject(this,offset)};Buffer.prototype.writeObject=function writeObject(obj,offset){return exports.writeObject(this,offset,obj)};Buffer.prototype.readPointer=function readPointer(offset,size){return exports.readPointer(this,offset,size)};Buffer.prototype.writePointer=function writePointer(ptr,offset){return exports.writePointer(this,offset,ptr)};Buffer.prototype.readCString=function readCString(offset){return exports.readCString(this,offset)};Buffer.prototype.writeCString=function writeCString(string,offset,encoding){return exports.writeCString(this,offset,string,encoding)};Buffer.prototype.readInt64BE=function readInt64BE(offset){return exports.readInt64BE(this,offset)};Buffer.prototype.writeInt64BE=function writeInt64BE(val,offset){return exports.writeInt64BE(this,offset,val)};Buffer.prototype.readUInt64BE=function readUInt64BE(offset){return exports.readUInt64BE(this,offset)};Buffer.prototype.writeUInt64BE=function writeUInt64BE(val,offset){return exports.writeUInt64BE(this,offset,val)};Buffer.prototype.readInt64LE=function readInt64LE(offset){return exports.readInt64LE(this,offset)};Buffer.prototype.writeInt64LE=function writeInt64LE(val,offset){return exports.writeInt64LE(this,offset,val)};Buffer.prototype.readUInt64LE=function readUInt64LE(offset){return exports.readUInt64LE(this,offset)};Buffer.prototype.writeUInt64LE=function writeUInt64LE(val,offset){return exports.writeUInt64LE(this,offset,val)};Buffer.prototype.reinterpret=function reinterpret(size,offset){return exports.reinterpret(this,size,offset)};Buffer.prototype.reinterpretUntilZeros=function reinterpretUntilZeros(size,offset){return exports.reinterpretUntilZeros(this,size,offset)};Buffer.prototype.inspect=overwriteInspect(Buffer.prototype.inspect);if(!(exports.NULL instanceof Buffer)){debug("extending SlowBuffer's prototype since it doesn't inherit from Buffer.prototype");var SlowBuffer=require("buffer").SlowBuffer;SlowBuffer.prototype.address=Buffer.prototype.address;SlowBuffer.prototype.hexAddress=Buffer.prototype.hexAddress;SlowBuffer.prototype.isNull=Buffer.prototype.isNull;SlowBuffer.prototype.ref=Buffer.prototype.ref;SlowBuffer.prototype.deref=Buffer.prototype.deref;SlowBuffer.prototype.readObject=Buffer.prototype.readObject;SlowBuffer.prototype.writeObject=Buffer.prototype.writeObject;SlowBuffer.prototype.readPointer=Buffer.prototype.readPointer;SlowBuffer.prototype.writePointer=Buffer.prototype.writePointer;SlowBuffer.prototype.readCString=Buffer.prototype.readCString;SlowBuffer.prototype.writeCString=Buffer.prototype.writeCString;SlowBuffer.prototype.reinterpret=Buffer.prototype.reinterpret;SlowBuffer.prototype.reinterpretUntilZeros=Buffer.prototype.reinterpretUntilZeros;SlowBuffer.prototype.readInt64BE=Buffer.prototype.readInt64BE;SlowBuffer.prototype.writeInt64BE=Buffer.prototype.writeInt64BE;SlowBuffer.prototype.readUInt64BE=Buffer.prototype.readUInt64BE;SlowBuffer.prototype.writeUInt64BE=Buffer.prototype.writeUInt64BE;SlowBuffer.prototype.readInt64LE=Buffer.prototype.readInt64LE;SlowBuffer.prototype.writeInt64LE=Buffer.prototype.writeInt64LE;SlowBuffer.prototype.readUInt64LE=Buffer.prototype.readUInt64LE;SlowBuffer.prototype.writeUInt64LE=Buffer.prototype.writeUInt64LE;SlowBuffer.prototype.inspect=overwriteInspect(SlowBuffer.prototype.inspect)}function overwriteInspect(inspect){if(inspect.name==="refinspect"){return inspect}else{return function refinspect(){var v=inspect.apply(this,arguments);return v.replace("Buffer","Buffer@0x"+this.hexAddress())}}}}).call(this,require("buffer").Buffer)},{assert:2,bindings:30,buffer:3,debug:31}],36:[function(require,module,exports){var _=require("underscore")._;var Sentences=function(pos,callback){this.posObj=pos;this.senType=null;callback(this)};Sentences.prototype.part=function(callback){var subject=[],predicat=[],verbFound=false;this.prepositionPhrases();for(var i=0;i<this.posObj.tags.length;i++){if(this.posObj.tags[i].pos=="VB"){if(i===0){verbFound=true}else{if(this.posObj.tags[i-1].pos!="EX"){verbFound=true}else{predicat.push(this.posObj.tags[i].token)}}}if(!verbFound){if(this.posObj.tags[i].pp!=true)this.posObj.tags[i].spos="SP";subject.push(this.posObj.tags[i].token)}else{if(this.posObj.tags[i].pp!=true)this.posObj.tags[i].spos="PP";predicat.push(this.posObj.tags[i].token)}}if(subject.length==0){this.posObj.tags.push({token:"You",spos:"SP",pos:"PRP",added:true})}callback(this)};Sentences.prototype.prepositionPhrases=function(){var remove=false;for(var i=0;i<this.posObj.tags.length;i++){if(this.posObj.tags[i].pos.match("IN")){remove=true}if(remove){this.posObj.tags[i].pp=true}if(this.posObj.tags[i].pos.match("NN")){remove=false}}};Sentences.prototype.subjectToString=function(){return this.posObj.tags.map(function(t){if(t.spos=="SP"||t.spos=="S")return t.token}).join(" ")};Sentences.prototype.predicateToString=function(){return this.posObj.tags.map(function(t){if(t.spos=="PP"||t.spos=="P")return t.token}).join(" ")};Sentences.prototype.implicitYou=function(){for(var i=0;i<this.posObj.tags.length;i++){if(this.posObj.tags[i].added){return true}}return false};Sentences.prototype.toString=function(){return this.posObj.tags.map(function(t){return t.token}).join(" ")};Sentences.prototype.type=function(callback){var callback=callback||false;var implicitYou=this.implicitYou();var lastElement=this.posObj.punct();lastElement=lastElement.length!=0?lastElement.pop():this.posObj.tags.pop();if(lastElement.pos!=="."){if(implicitYou){this.senType="COMMAND"}else if(_(["WDT","WP","WP$","WRB"]).contains(this.posObj.tags[0].pos)){this.senType="INTERROGATIVE"}else if(_(["PRP"]).contains(lastElement.pos)){this.senType="INTERROGATIVE"}else{this.senType="UNKNOWN"}}else{switch(lastElement.token){case"?":this.senType="INTERROGATIVE";break;case"!":this.senType=implicitYou?"COMMAND":"EXCLAMATORY";break;case".":this.senType=implicitYou?"COMMAND":"DECLARATIVE";break}}if(callback&&_(callback).isFunction()){callback(this)}else{return this.senType}};module.exports=Sentences},{underscore:128}],37:[function(require,module,exports){var PorterStemmer=require("../stemmers/porter_stemmer"),util=require("util"),Classifier=require("./classifier"),ApparatusBayesClassifier=require("apparatus").BayesClassifier;var BayesClassifier=function(stemmer,smoothing){var abc=new ApparatusBayesClassifier;if(smoothing&&isFinite(smoothing)){abc=new ApparatusBayesClassifier(smoothing)}Classifier.call(this,abc,stemmer)};util.inherits(BayesClassifier,Classifier);function restore(classifier,stemmer){classifier=Classifier.restore(classifier,stemmer);classifier.__proto__=BayesClassifier.prototype;classifier.classifier=ApparatusBayesClassifier.restore(classifier.classifier);return classifier}function load(filename,stemmer,callback){Classifier.load(filename,function(err,classifier){if(err){callback(err)}callback(err,restore(classifier,stemmer))})}BayesClassifier.restore=restore;BayesClassifier.load=load;module.exports=BayesClassifier},{"../stemmers/porter_stemmer":64,"./classifier":38,apparatus:120,util:13}],38:[function(require,module,exports){var PorterStemmer=require("../stemmers/porter_stemmer"),util=require("util"),events=require("events");var Classifier=function(classifier,stemmer){this.classifier=classifier;this.docs=[];this.features={};this.stemmer=stemmer||PorterStemmer;this.lastAdded=0;this.events=new events.EventEmitter};function addDocument(text,classification){if(typeof text==="string")text=this.stemmer.tokenizeAndStem(text);if(text.length===0){return}this.docs.push({label:classification,text:text});for(var i=0;i<text.length;i++){this.features[text[i]]=1}}function removeDocument(text,classification){var docs=this.docs,doc,pos;if(typeof text==="string"){text=this.stemmer.tokenizeAndStem(text)}for(var i=0,ii=docs.length;i<ii;i++){doc=docs[i];if(doc.text.join(" ")==text.join(" ")&&doc.label==classification){pos=i}}if(!isNaN(pos)){this.docs.splice(pos,1);for(var i=0,ii=text.length;i<ii;i++){delete this.features[text[i]]}}}function textToFeatures(observation){var features=[];if(typeof observation==="string")observation=this.stemmer.tokenizeAndStem(observation);for(var feature in this.features){if(observation.indexOf(feature)>-1)features.push(1);else features.push(0)}return features}function train(){var totalDocs=this.docs.length;for(var i=this.lastAdded;i<totalDocs;i++){var features=this.textToFeatures(this.docs[i].text);this.classifier.addExample(features,this.docs[i].label);this.events.emit("trainedWithDocument",{index:i,total:totalDocs,doc:this.docs[i]});this.lastAdded++}this.events.emit("doneTraining",true);this.classifier.train()}function retrain(){this.classifier=new this.classifier.constructor;this.lastAdded=0;this.train()}function getClassifications(observation){return this.classifier.getClassifications(this.textToFeatures(observation))}function classify(observation){return this.classifier.classify(this.textToFeatures(observation))}function restore(classifier,stemmer){classifier.stemmer=stemmer||PorterStemmer;classifier.events=new events.EventEmitter;return classifier}function save(filename,callback){var data=JSON.stringify(this);var fs=require("fs");var classifier=this;fs.writeFile(filename,data,"utf8",function(err){if(callback){callback(err,err?null:classifier)}})}function load(filename,callback){var fs=require("fs");fs.readFile(filename,"utf8",function(err,data){var classifier;if(!err){classifier=JSON.parse(data)}if(callback)callback(err,classifier)})}Classifier.prototype.addDocument=addDocument;Classifier.prototype.removeDocument=removeDocument;Classifier.prototype.train=train;Classifier.prototype.retrain=retrain;Classifier.prototype.classify=classify;Classifier.prototype.textToFeatures=textToFeatures;Classifier.prototype.save=save;Classifier.prototype.getClassifications=getClassifications;Classifier.restore=restore;Classifier.load=load;module.exports=Classifier},{"../stemmers/porter_stemmer":64,events:7,fs:1,util:13}],39:[function(require,module,exports){var PorterStemmer=require("../stemmers/porter_stemmer"),util=require("util"),Classifier=require("./classifier"),ApparatusLogisticRegressionClassifier=require("apparatus").LogisticRegressionClassifier;var LogisticRegressionClassifier=function(stemmer){Classifier.call(this,new ApparatusLogisticRegressionClassifier,stemmer)};util.inherits(LogisticRegressionClassifier,Classifier);function restore(classifier,stemmer){classifier=Classifier.restore(classifier,stemmer);classifier.__proto__=LogisticRegressionClassifier.prototype;classifier.classifier=ApparatusLogisticRegressionClassifier.restore(classifier.classifier);return classifier}function load(filename,stemmer,callback){Classifier.load(filename,function(err,classifier){callback(err,restore(classifier,stemmer))})}function train(){this.lastAdded=0;this.classifier=new ApparatusLogisticRegressionClassifier;Classifier.prototype.train.call(this)}LogisticRegressionClassifier.prototype.train=train;LogisticRegressionClassifier.restore=restore;LogisticRegressionClassifier.load=load;module.exports=LogisticRegressionClassifier},{"../stemmers/porter_stemmer":64,"./classifier":38,apparatus:120,util:13}],40:[function(require,module,exports){var letterPairs=function(str){var numPairs=str.length-1;var pairs=new Array(numPairs);for(var i=0;i<numPairs;i++){pairs[i]=str.substring(i,i+2)}return pairs};var wordLetterPairs=function(str){var allPairs=[],pairs;var words=str.split(/\s+/);for(var i=0;i<words.length;i++){pairs=letterPairs(words[i]);allPairs.push.apply(allPairs,pairs)}return allPairs};var sanitize=function(str){return str.toLowerCase().replace(/^\s+|\s+$/g,"")};var compare=function(str1,str2){var pairs1=wordLetterPairs(sanitize(str1));var pairs2=wordLetterPairs(sanitize(str2));var intersection=0,union=pairs1.length+pairs2.length;var i,j,pair1,pair2;for(i=0;i<pairs1.length;i++){pair1=pairs1[i];for(j=0;j<pairs2.length;j++){pair2=pairs2[j];if(pair1==pair2){intersection++;delete pairs2[j];break}}}return 2*intersection/union};module.exports=compare},{}],41:[function(require,module,exports){function distance(s1,s2){if(typeof s1!="string"||typeof s2!="string")return 0;if(s1.length==0||s2.length==0)return 0;s1=s1.toLowerCase(),s2=s2.toLowerCase();var matchWindow=Math.floor(Math.max(s1.length,s2.length)/2)-1;var matches1=new Array(s1.length);var matches2=new Array(s2.length);var m=0;var t=0;for(var i=0;i<s1.length;i++){var matched=false;if(s1[i]==s2[i]){matches1[i]=matches2[i]=matched=true;m++}else{for(k=i<=matchWindow?0:i-matchWindow;k<=i+matchWindow&&k<s2.length&&!matched;k++){if(s1[i]==s2[k]){if(!matches1[i]&&!matches2[k]){m++}matches1[i]=matches2[k]=matched=true}}}}if(m==0)return 0;var k=0;for(var i=0;i<s1.length;i++){if(matches1[k]){while(!matches2[k]&&k<matches2.length)k++;if(s1[i]!=s2[k]&&k<matches2.length){t++}k++}}t=t/2;return(m/s1.length+m/s2.length+(m-t)/m)/3}function JaroWinklerDistance(s1,s2,dj){if(s1==s2){return 1}else{var jaro;typeof dj=="undefined"?jaro=distance(s1,s2):jaro=dj;var p=.1;var l=0;while(s1[l]==s2[l]&&l<4)l++;return jaro+l*p*(1-jaro)}}module.exports=JaroWinklerDistance},{}],42:[function(require,module,exports){function LevenshteinDistance(source,target,options){options=options||{};if(isNaN(options.insertion_cost))options.insertion_cost=1;if(isNaN(options.deletion_cost))options.deletion_cost=1;if(isNaN(options.substitution_cost))options.substitution_cost=1;var sourceLength=source.length;var targetLength=target.length;var distanceMatrix=[[0]];for(var row=1;row<=sourceLength;row++){distanceMatrix[row]=[];distanceMatrix[row][0]=distanceMatrix[row-1][0]+options.deletion_cost}for(var column=1;column<=targetLength;column++){distanceMatrix[0][column]=distanceMatrix[0][column-1]+options.insertion_cost}for(var row=1;row<=sourceLength;row++){for(var column=1;column<=targetLength;column++){var costToInsert=distanceMatrix[row][column-1]+options.insertion_cost;var costToDelete=distanceMatrix[row-1][column]+options.deletion_cost;var sourceElement=source[row-1];var targetElement=target[column-1];var costToSubstitute=distanceMatrix[row-1][column-1];if(sourceElement!==targetElement){costToSubstitute=costToSubstitute+options.substitution_cost}distanceMatrix[row][column]=Math.min(costToInsert,costToDelete,costToSubstitute)}}return distanceMatrix[sourceLength][targetLength]}module.exports=LevenshteinDistance},{}],43:[function(require,module,exports){exports.SoundEx=require("./phonetics/soundex");exports.Metaphone=require("./phonetics/metaphone");exports.DoubleMetaphone=require("./phonetics/double_metaphone");exports.SoundExDM=require("./phonetics/dm_soundex");exports.PorterStemmer=require("./stemmers/porter_stemmer");exports.PorterStemmerFa=require("./stemmers/porter_stemmer_fa");exports.PorterStemmerFr=require("./stemmers/porter_stemmer_fr");exports.PorterStemmerRu=require("./stemmers/porter_stemmer_ru");exports.PorterStemmerEs=require("./stemmers/porter_stemmer_es");exports.PorterStemmerIt=require("./stemmers/porter_stemmer_it");exports.PorterStemmerNo=require("./stemmers/porter_stemmer_no");exports.LancasterStemmer=require("./stemmers/lancaster_stemmer");exports.StemmerFr=require("./stemmers/stemmer_fr");exports.StemmerPl=require("./stemmers/stemmer_pl");exports.StemmerJa=require("./stemmers/stemmer_ja");exports.AggressiveTokenizerNl=require("./tokenizers/aggressive_tokenizer_nl");exports.AggressiveTokenizerFa=require("./tokenizers/aggressive_tokenizer_fa");exports.AggressiveTokenizerRu=require("./tokenizers/aggressive_tokenizer_ru");exports.AggressiveTokenizerEs=require("./tokenizers/aggressive_tokenizer_es");exports.AggressiveTokenizerIt=require("./tokenizers/aggressive_tokenizer_it");exports.AggressiveTokenizerPl=require("./tokenizers/aggressive_tokenizer_pl");exports.AggressiveTokenizerPt=require("./tokenizers/aggressive_tokenizer_pt");exports.AggressiveTokenizerNo=require("./tokenizers/aggressive_tokenizer_no");exports.AggressiveTokenizer=require("./tokenizers/aggressive_tokenizer");exports.RegexpTokenizer=require("./tokenizers/regexp_tokenizer").RegexpTokenizer;exports.WordTokenizer=require("./tokenizers/regexp_tokenizer").WordTokenizer;exports.WordPunctTokenizer=require("./tokenizers/regexp_tokenizer").WordPunctTokenizer;exports.TreebankWordTokenizer=require("./tokenizers/treebank_word_tokenizer");exports.TokenizerJa=require("./tokenizers/tokenizer_ja");exports.BayesClassifier=require("./classifiers/bayes_classifier");exports.LogisticRegressionClassifier=require("./classifiers/logistic_regression_classifier");exports.NounInflector=require("./inflectors/noun_inflector");exports.NounInflectorFr=require("./inflectors/fr/noun_inflector");exports.NounInflectorJa=require("./inflectors/ja/noun_inflector");exports.PresentVerbInflector=require("./inflectors/present_verb_inflector");exports.CountInflector=require("./inflectors/count_inflector");exports.WordNet=require("./wordnet/wordnet");exports.TfIdf=require("./tfidf/tfidf");exports.Trie=require("./trie/trie");exports.SentenceAnalyzer=require("./analyzers/sentence_analyzer");exports.stopwords=require("./util/stopwords").words;
exports.ShortestPathTree=require("./util/shortest_path_tree");exports.LongestPathTree=require("./util/longest_path_tree");exports.EdgeWeightedDigraph=require("./util/edge_weighted_digraph");exports.NGrams=require("./ngrams/ngrams");exports.NGramsZH=require("./ngrams/ngrams_zh");exports.JaroWinklerDistance=require("./distance/jaro-winkler_distance");exports.LevenshteinDistance=require("./distance/levenshtein_distance");exports.DiceCoefficient=require("./distance/dice_coefficient");exports.normalize=require("./normalizers/normalizer").normalize_tokens;exports.normalize_ja=require("./normalizers/normalizer_ja").normalize_ja;exports.removeDiacritics=require("./normalizers/remove_diacritics");exports.transliterate_ja=require("./transliterators/ja")},{"./analyzers/sentence_analyzer":36,"./classifiers/bayes_classifier":37,"./classifiers/logistic_regression_classifier":39,"./distance/dice_coefficient":40,"./distance/jaro-winkler_distance":41,"./distance/levenshtein_distance":42,"./inflectors/count_inflector":44,"./inflectors/fr/noun_inflector":46,"./inflectors/ja/noun_inflector":47,"./inflectors/noun_inflector":48,"./inflectors/present_verb_inflector":49,"./ngrams/ngrams":51,"./ngrams/ngrams_zh":52,"./normalizers/normalizer":53,"./normalizers/normalizer_ja":54,"./normalizers/remove_diacritics":56,"./phonetics/dm_soundex":57,"./phonetics/double_metaphone":58,"./phonetics/metaphone":59,"./phonetics/soundex":61,"./stemmers/lancaster_stemmer":63,"./stemmers/porter_stemmer":64,"./stemmers/porter_stemmer_es":65,"./stemmers/porter_stemmer_fa":66,"./stemmers/porter_stemmer_fr":67,"./stemmers/porter_stemmer_it":68,"./stemmers/porter_stemmer_no":69,"./stemmers/porter_stemmer_ru":70,"./stemmers/stemmer_fr":74,"./stemmers/stemmer_ja":76,"./stemmers/stemmer_pl":78,"./tfidf/tfidf":80,"./tokenizers/aggressive_tokenizer":81,"./tokenizers/aggressive_tokenizer_es":82,"./tokenizers/aggressive_tokenizer_fa":83,"./tokenizers/aggressive_tokenizer_it":85,"./tokenizers/aggressive_tokenizer_nl":86,"./tokenizers/aggressive_tokenizer_no":87,"./tokenizers/aggressive_tokenizer_pl":88,"./tokenizers/aggressive_tokenizer_pt":89,"./tokenizers/aggressive_tokenizer_ru":90,"./tokenizers/regexp_tokenizer":91,"./tokenizers/tokenizer_ja":93,"./tokenizers/treebank_word_tokenizer":94,"./transliterators/ja":95,"./trie/trie":96,"./util/edge_weighted_digraph":98,"./util/longest_path_tree":99,"./util/shortest_path_tree":100,"./util/stopwords":101,"./wordnet/wordnet":114}],44:[function(require,module,exports){function nthForm(i){var teenth=i%100;if(teenth>10&&teenth<14)return"th";else{switch(i%10){case 1:return"st";break;case 2:return"nd";break;case 3:return"rd";break;default:return"th"}}}function nth(i){return i.toString()+nthForm(i)}var CountInflector=function(){};CountInflector.nth=nth;module.exports=CountInflector},{}],45:[function(require,module,exports){var FormSet=function(){this.regularForms=[];this.irregularForms={}};module.exports=FormSet},{}],46:[function(require,module,exports){var SingularPluralInflector=require("../singular_plural_inflector"),util=require("util"),FormSet=require("../form_set");function attach(){var inflector=this;String.prototype.singularizeNoun=function(){return inflector.singularize(this)};String.prototype.pluralizeNoun=function(){return inflector.pluralize(this)}}var NounInflector=function(){this.ambiguous=["-peu-prs","-propos","abattis","abcs","abois","abribus","abus","accs","acquis","adnovirus","adonis","ados","agrs","aguets","ailleurs","ais","albatros","albinos","alias","alos","amaryllis","amas","amplopsis","ananas","anchois","anglus","anis","anticorps","antihros","antirides","anus","appas","appentis","appui-bras","appuie-bras","arcanes","argus","arrrages","arrire-pays","as","ascaris","asparagus","atlas","atours","aurochs","autobus","autofocus","avant-bras","avant-corps","avant-propos","avers","avis","axis","barbouillis","bas","beaujolais","beaux-arts","biais","bibliobus","biceps","bicross","bien-fonds","bloc-notes","blockhaus","blocus","blues","bois","bonus","bout-dehors","bouts-rims","branle-bas","bras","brebis","bris","brise-lames","brise-mottes","brlis","buis","burnous","bus","business","cabas","cacatos","cacatois","cactus","cadenas","cafouillis","caillebotis","calvados","cambouis","campus","canevas","cannabis","carquois","cas","casse-noisettes","casse-pieds","cassis","caucus","cens","cervelas","chablis","chamois","chaos","chas","chasselas","chssis","chatouillis","chauffe-assiettes","chauve-souris","chorus","choucas","circoncis","cirrus","clafoutis","clapotis","cliquetis","clos","cochylis","colis","coloris","commis","compas","compromis","compte-chques","compte-gouttes","compte-tours","concours","confins","congrs","consensus","contrepoids","contresens","contretemps","corn flakes","corps","corps--corps","corpus","cosinus","cosmos","coulis","coupe-ongles","cours","court-jus","couscous","coutelas","crocus","croquis","cross","cubitus","cumulus","cure-dents","cure-ongles","cure-pipes","cursus","cyclo-cross","cyprs","dais","damas","dbarras","dbours","dbris","dcs","dedans","dehors","delirium tremens","demi-gros","dpens","dessous","dessus","dtritus","deux-mts","deux-pices","deux-points","deux-roues","deux-temps","dvers","devis","diplodocus","discours","dos","bats","boulis","chalas","edelweiss","laeis","leis","lphantiasis","embarras","empois","en-cas","encens","enclos","endos","engrais","entrelacs","entremets","envers","pluche-lgumes","ers","espace-temps","essuie-mains","eucalyptus","ex-libris","excs","express","extrados","facis","fait-divers","fatras","faux-sens","favoris","ficus","fier--bras","finnois","flors","focus","ftus","fois","forceps","fouillis","fracas","frais","franais","franglais","frimas","friselis","frisottis","froncis","frottis","fucus","gchis","galetas","galimatias","garde--vous","garde-corps","gargouillis","gars","gte-bois","gazouillis","gnois","gibus","glacis","glas","gneiss","gobe-mouches","grs","gribouillis","guet-apens","habeas corpus","hachis","haras","hardes","harnais","haut-le-corps","hautbois","herbe-aux-chats","hros","herps","hiatus","hibiscus","hors-concours","hors-pistes","hourdis","huis-clos","humrus","humus","ibis","ilus","indique-fuites","infarctus","inlandsis","insuccs","intercours","intrados","intrus","iris","isatis","jais","jars","jeans","jeuconcours","judas","julinas","jus","justaucorps","kakatos","kerms","kriss","lacis","laus","lambris","lapis","laps","lapsus","laquais","las","lattis","lave-mains","lavis","lche-bottes","lche-vitrines","legs","lias","ligeois","lilas","lis","lss","logis","loris","lotus","louis","lupus","lys","mchicoulis","madras","mas","malappris","malus","mnes","maquis","marais","maroilles","marquis","mas","mass-mdias","matelas","matois","mdius","mpris","mrinos","mess","mets","mi-bas","micro-ondes","mille-pattes","millepertuis","minibus","minois","minus","mirabilis","mois","monocorps","monte-plats","mors","motocross","mots-croiss","motus","mouchetis","mucus","myosotis","nvus","ngus","niais","nimbo-stratus","nimbus","norois","nounours","nu-pieds","oasis","obus","olibrius","omnibus","opus","os","ours","ouvre-botes","ouvre-bouteilles","palais","palis","palmars","palus","panais","panaris","pancras","papyrus","par-dehors","paradis","parcours","pardessus","pare-balles","pare-chocs","parvis","pas","passe-temps","pataqus","pathos","patois","pavois","pays","permis","petit-bourgeois","petit-gris","petit-pois","phallus","phimosis","pickles","pilotis","pique-fleurs","pis","pithiviers","pityriasis","plateau-repas","pltras","plein-temps","plexiglas","plexus","plus","poids","pois","pont-levis","porte-avions","porte-bagages","porte-billets","porte-bouteilles","porte-cls","porte-hlicoptres","porte-jarretelles","porte-revues","pouls","pravis","presse-fruits","presse-papiers","princeps","printemps","procs","processus","progrs","propos","prospectus","protge-dents","psoriasis","pubis","puits","pus","putois","quatre-pices","quatre-feuilles","quatre-heures","quatre-mts","quatre-quarts","quatre-temps","quitus","rabais","rachis","radis","radius","ras","ramassis","rbus","reclus","recours","refus","relais","remords","remous","remue-mninges","rendez-vous","repas","rpons","repos","repris","reps","rtrovirus","revers","rhinocros","rictus","rince-doigts","ris","rollmops","ros-des-prs","roulis","rubis","salmigondis","salsifis","sans-logis","sas","sassafras","sauternes","schnaps","schuss","secours","semis","sens","serre-fils","serre-livres","svices","sinus","skunks","souris","sournois","sous-bois","stradivarius","stras","strass","strato-cumulus","stratus","stress","succs","surdos","surplus","surpoids","sursis","suspens","synopsis","syphilis","taffetas","taillis","talus","tamaris","tamis","tapis","tas","taudis","temps","tennis","terminus","terre-neuvas","ttanos","ttras","thalamus","thermos","thesaurus","thsaurus","thymus","tire-fesses","tonus","torchis","torticolis","tournedos","tournevis","tournis","tracas","trane-savates","travers","trfonds","treillis","trpas","trias","triceps","trichomonas","trois-toiles","trois-mts","trois-quarts","trolleybus","tumulus","typhus","univers","us","utrus","vasistas","vlocross","velours","verglas","verjus","vernis","vers","vert-de-gris","vide-ordures","vide-poches","villageois","virus","vis--vis","volubilis","vulgum pecus","waters","williams","xrs","abat-voix","afflux","alpax","anthrax","apex","aptryx","archoptryx","arrire-faix","bombyx","borax","bordeaux","bouseux","box","carex","casse-noix","cedex","cphalothorax","crambyx","chaux","choix","coccyx","codex","contumax","coqueleux","cortex","courroux","croix","crucifix","culex","demodex","duplex","entre-deux","poux","quivaux","eux","ex","faix","faucheux","faux","fax","ferreux","flux","fox","freux","furax","hapax","harengueux","hlix","horse-pox","houx","index","influx","inox","juke-box","kleenex","lagothrix","larynx","lastex","latex","lux","lynx","macareux","max","msothorax","mi-voix","mirepoix","motteux","multiplex","murex","narthex","noix","onyx","opopanax","oropharynx","paix","panax","perdrix","pharynx","phnix","phlox","phoenix","pneumothorax","poix","portefaix","pousse-cailloux","preux","prix","prothorax","pucheux","pyrex","pyroligneux","quadruplex","queux","redoux","reflex","reflux","relax","rhinopharynx","rose-croix","rouvieux","roux","rumex","saindoux","sardonyx","scolex","sche-cheveux","silex","simplex","sioux","sirex","smilax","solex","songe-creux","spalax","sphex","sphinx","storax","strix","styrax","surfaix","surtaux","syrinx","tamarix","taux","tlex","thorax","tord-boyaux","toux","trionyx","tripoux","tubifex","vertex","vidotex","vielleux","vieux","violoneux","voix","volvox","vortex","allume-gaz","assez","biogaz","cache-nez","camping-gaz","chez","chintz","ersatz","fez","free-jazz","fritz","gaz","gin-fizz","hertz","jazz","jerez","kibboutz","kilohertz","kolkhoz","kronprinz","lapiaz","lez","mgahertz","merguez","nez","pince-nez","quartz","quiz","ranz","raz","recez","rmiz","rez","riz","ruolz","seltz","serre-nez"];this.customPluralForms=[];this.customSingularForms=[];this.singularForms=new FormSet;this.pluralForms=new FormSet;this.attach=attach;this.addIrregular("ail","aulx");this.addIrregular("btail","bestiaux");this.addIrregular("bonhomme","bonshommes");this.addIrregular("ciel","cieux");this.addIrregular("monsieur","messieurs");this.addIrregular("mafioso","mafiosi");this.addIrregular("il","yeux");this.addIrregular("putto","putti");this.addIrregular("targui","touareg");this.pluralForms.regularForms.push([/^(av|b|c|carnav|crmoni|chac|corr|emment|emmenth|festiv|fut|gavi|gra|narv|p|rcit|rg|rit|rorqu|st)al$/i,"$1als"]);this.pluralForms.regularForms.push([/^(aspir|b|cor|m|ferm|gemm|soupir|trav|vant|vent|vitr)ail$/i,"$1aux"]);this.pluralForms.regularForms.push([/^(bij|caill|ch|gen|hib|jouj|p|rip|chouch)ou$/i,"$1oux"]);this.pluralForms.regularForms.push([/^(gr|berimb|don|karb|land|pil|rest|sarr|un)au$/i,"$1aus"]);this.pluralForms.regularForms.push([/^(bl|m|enf|pn)eu$/i,"$1eus"]);this.pluralForms.regularForms.push([/(au|eau|eu|u)$/i,"$1x"]);this.pluralForms.regularForms.push([/al$/i,"aux"]);this.pluralForms.regularForms.push([/(s|x)$/i,"$1"]);this.pluralForms.regularForms.push([/(.*)$/i,"$1s"]);this.singularForms.regularForms.push([/^(aspir|b|cor|m|ferm|gemm|soupir|trav|vant|vent|vitr)aux$/i,"$1ail"]);this.singularForms.regularForms.push([/^(aloy|b|bouc|boy|burg|conoy|coy|cr|esquim|t|fabli|fl|flti|glu|gr|gru|hoy|joy|krab|matri|nobli|noy|pr|sen|sn|t|touch|tuss|tuy|v|ypr)aux$/i,"$1au"]);this.singularForms.regularForms.push([/^(bij|caill|ch|gen|hib|jouj|p|rip|chouch)oux$/i,"$1ou"]);this.singularForms.regularForms.push([/^(bis)?aeux$/i,"$1aeul"]);this.singularForms.regularForms.push([/^apparaux$/i,"appareil"]);this.singularForms.regularForms.push([/^ciels$/i,"ciel"]);this.singularForms.regularForms.push([/^ils$/i,"il"]);this.singularForms.regularForms.push([/(eau|eu|u)x$/i,"$1"]);this.singularForms.regularForms.push([/aux$/i,"al"]);this.singularForms.regularForms.push([/(.*)s$/i,"$1"]);this.pluralize=function(token){return this.ize(token,this.pluralForms,this.customPluralForms)};this.singularize=function(token){return this.ize(token,this.singularForms,this.customSingularForms)}};util.inherits(NounInflector,SingularPluralInflector);module.exports=NounInflector},{"../form_set":45,"../singular_plural_inflector":50,util:13}],47:[function(require,module,exports){var SingularPluralInflector=require("../singular_plural_inflector"),util=require("util"),FormSet=require("../form_set");function attach(){var inflector=this;String.prototype.singularizeNoun=function(){return inflector.singularize(this)};String.prototype.pluralizeNoun=function(){return inflector.pluralize(this)}}var NounInflector=function(){this.ambiguous=["","","","","","","","","","",""];this.customPluralForms=[];this.customSingularForms=[];this.singularForms=new FormSet;this.pluralForms=new FormSet;this.attach=attach;this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.addIrregular("","");this.pluralForms.regularForms.push([/^(.+)$/i,"$1"]);this.singularForms.regularForms.push([/^(.+)$/i,function(a,mask){if(["","","","","","","","","",""].indexOf(mask)>=0)return mask+"";return mask}]);this.singularForms.regularForms.push([/^(.+)$/i,function(a,mask){if(["","","","","","","","","","","","","","","","","","","","","","","","","","",""].indexOf(mask)>=0)return mask+"";return mask}]);this.singularForms.regularForms.push([/^(.+)$/i,function(a,mask){if(["","","","","","","","","","","","","","","","","","","","","","","",""].indexOf(mask)>=0)return mask+"";return mask}]);this.singularForms.regularForms.push([/^(||||||||||||||)(|)$/i,"$1"]);this.singularForms.regularForms.push([/^(|||||)(|)$/i,"$1"]);this.pluralize=function(token){return this.ize(token,this.pluralForms,this.customPluralForms)};this.singularize=function(token){return this.ize(token,this.singularForms,this.customSingularForms)}};util.inherits(NounInflector,SingularPluralInflector);module.exports=NounInflector},{"../form_set":45,"../singular_plural_inflector":50,util:13}],48:[function(require,module,exports){var SingularPluralInflector=require("./singular_plural_inflector"),util=require("util"),FormSet=require("./form_set");function attach(){var inflector=this;String.prototype.singularizeNoun=function(){return inflector.singularize(this)};String.prototype.pluralizeNoun=function(){return inflector.pluralize(this)}}var NounInflector=function(){this.ambiguous=["bison","bream","carp","chassis","cod","corps","debris","deer","diabetes","equipment","elk","fish","flounder","gallows","graffiti","headquarters","herpes","highjinks","homework","information","mackerel","mews","money","news","rice","rabies","salmon","series","sheep","shrimp","species","swine","trout","tuna","whiting","wildebeest"];this.customPluralForms=[];this.customSingularForms=[];this.singularForms=new FormSet;this.pluralForms=new FormSet;this.attach=attach;this.addIrregular("child","children");this.addIrregular("man","men");this.addIrregular("person","people");this.addIrregular("sex","sexes");this.addIrregular("mouse","mice");this.addIrregular("ox","oxen");this.addIrregular("foot","feet");this.addIrregular("tooth","teeth");this.addIrregular("goose","geese");this.addIrregular("ephemeris","ephemerides");this.pluralForms.regularForms.push([/y$/i,"ies"]);this.pluralForms.regularForms.push([/ife$/i,"ives"]);this.pluralForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"]);this.pluralForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]);this.pluralForms.regularForms.push([/(buffal|tomat|tornad)o$/i,"$1oes"]);this.pluralForms.regularForms.push([/(sis)$/i,"ses"]);this.pluralForms.regularForms.push([/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"]);this.pluralForms.regularForms.push([/(x|ch|ss|sh|s|z)$/i,"$1es"]);this.pluralForms.regularForms.push([/^(?!talis|.*hu)(.*)man$/i,"$1men"]);this.pluralForms.regularForms.push([/(.*)/i,"$1s"]);this.singularForms.regularForms.push([/([^v])ies$/i,"$1y"]);this.singularForms.regularForms.push([/ives$/i,"ife"]);this.singularForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"]);this.singularForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"]);this.singularForms.regularForms.push([/(buffal|tomat|tornad)(oes)$/i,"$1o"]);this.singularForms.regularForms.push([/(analy|naly|synop|parenthe|diagno|the)ses$/i,"$1sis"]);this.singularForms.regularForms.push([/(vert|ind|cort)(ices)$/i,"$1ex"]);this.singularForms.regularForms.push([/(matr|append)(ices)$/i,"$1ix"]);this.singularForms.regularForms.push([/(x|ch|ss|sh|s|z)es$/i,"$1"]);this.singularForms.regularForms.push([/men$/i,"man"]);this.singularForms.regularForms.push([/s$/i,""]);this.pluralize=function(token){return this.ize(token,this.pluralForms,this.customPluralForms)};this.singularize=function(token){return this.ize(token,this.singularForms,this.customSingularForms)}};util.inherits(NounInflector,SingularPluralInflector);module.exports=NounInflector},{"./form_set":45,"./singular_plural_inflector":50,util:13}],49:[function(require,module,exports){var util=require("util"),SingularPluralInflector=require("./singular_plural_inflector"),FormSet=require("./form_set");function attach(){var inflector=this;String.prototype.singularizePresentVerb=function(){return inflector.singularize(this)};String.prototype.pluralizePresentVerb=function(){return inflector.pluralize(this)}}var VerbInflector=function(){this.ambiguous=["will"];this.attach=attach;this.customPluralForms=[];this.customSingularForms=[];this.singularForms=new FormSet;this.pluralForms=new FormSet;this.addIrregular("am","are");this.addIrregular("is","are");this.addIrregular("was","were");this.addIrregular("has","have");this.singularForms.regularForms.push([/ed$/i,"ed"]);this.singularForms.regularForms.push([/ss$/i,"sses"]);this.singularForms.regularForms.push([/x$/i,"xes"]);this.singularForms.regularForms.push([/(h|z|o)$/i,"$1es"]);this.singularForms.regularForms.push([/$zz/i,"zzes"]);this.singularForms.regularForms.push([/([^a|e|i|o|u])y$/i,"$1ies"]);this.singularForms.regularForms.push([/$/i,"s"]);this.pluralForms.regularForms.push([/sses$/i,"ss"]);this.pluralForms.regularForms.push([/xes$/i,"x"]);this.pluralForms.regularForms.push([/([cs])hes$/i,"$1h"]);this.pluralForms.regularForms.push([/zzes$/i,"zz"]);this.pluralForms.regularForms.push([/([^h|z|o|i])es$/i,"$1e"]);this.pluralForms.regularForms.push([/ies$/i,"y"]);this.pluralForms.regularForms.push([/e?s$/i,""])};util.inherits(VerbInflector,SingularPluralInflector);module.exports=VerbInflector},{"./form_set":45,"./singular_plural_inflector":50,util:13}],50:[function(require,module,exports){var TenseInflector=function(){};TenseInflector.prototype.addSingular=function(pattern,replacement){this.customSingularForms.push([pattern,replacement])};TenseInflector.prototype.addPlural=function(pattern,replacement){this.customPluralForms.push([pattern,replacement])};TenseInflector.prototype.ize=function(token,formSet,customForms){var restoreCase=this.restoreCase(token);return restoreCase(this.izeRegExps(token,customForms)||this.izeAbiguous(token)||this.izeRegulars(token,formSet)||this.izeRegExps(token,formSet.regularForms)||token)};TenseInflector.prototype.izeAbiguous=function(token){if(this.ambiguous.indexOf(token.toLowerCase())>-1)return token.toLowerCase();return false};TenseInflector.prototype.pluralize=function(token){return this.ize(token,this.pluralForms,this.customPluralForms)};TenseInflector.prototype.singularize=function(token){return this.ize(token,this.singularForms,this.customSingularForms)};var uppercaseify=function(token){return token.toUpperCase()};var capitalize=function(token){return token[0].toUpperCase()+token.slice(1)};var lowercaseify=function(token){return token.toLowerCase()};TenseInflector.prototype.restoreCase=function(token){if(token[0]===token[0].toUpperCase()){if(token[1]&&token[1]===token[1].toLowerCase()){return capitalize}else{return uppercaseify}}else{return lowercaseify}};TenseInflector.prototype.izeRegulars=function(token,formSet){token=token.toLowerCase();if(formSet.irregularForms.hasOwnProperty(token)&&formSet.irregularForms[token])return formSet.irregularForms[token];return false};TenseInflector.prototype.addForm=function(singularTable,pluralTable,singular,plural){singular=singular.toLowerCase();plural=plural.toLowerCase();pluralTable[singular]=plural;singularTable[plural]=singular};TenseInflector.prototype.addIrregular=function(singular,plural){this.addForm(this.singularForms.irregularForms,this.pluralForms.irregularForms,singular,plural)};TenseInflector.prototype.izeRegExps=function(token,forms){var i,form;for(i=0;i<forms.length;i++){form=forms[i];if(token.match(form[0]))return token.replace(form[0],form[1])}return false};module.exports=TenseInflector},{}],51:[function(require,module,exports){var _=require("underscore")._,Tokenizer=require("../tokenizers/regexp_tokenizer").WordTokenizer,tokenizer=new Tokenizer;exports.setTokenizer=function(t){if(!_.isFunction(t.tokenize))throw new Error("Expected a valid Tokenizer");tokenizer=t};exports.ngrams=function(sequence,n,startSymbol,endSymbol){return ngrams(sequence,n,startSymbol,endSymbol)};exports.bigrams=function(sequence,startSymbol,endSymbol){return ngrams(sequence,2,startSymbol,endSymbol)};exports.trigrams=function(sequence,startSymbol,endSymbol){return ngrams(sequence,3,startSymbol,endSymbol)};var ngrams=function(sequence,n,startSymbol,endSymbol){var result=[];if(!_(sequence).isArray()){sequence=tokenizer.tokenize(sequence)}var count=_.max([0,sequence.length-n+1]);if(typeof startSymbol!=="undefined"&&startSymbol!==null){var blanks=[];for(var i=0;i<n;i++){blanks.push(startSymbol)}for(var p=n-1;p>0;p--){result.push(blanks.slice(0,p).concat(sequence.slice(0,n-p)))}}for(var i=0;i<count;i++){result.push(sequence.slice(i,i+n))}if(typeof endSymbol!=="undefined"&&endSymbol!==null){var blanks=[];for(var i=0;i<n;i++){blanks.push(endSymbol)}for(var p=n-1;p>0;p--){result.push(sequence.slice(sequence.length-p,sequence.length).concat(blanks.slice(0,n-p)))}}return result}},{"../tokenizers/regexp_tokenizer":91,underscore:128}],52:[function(require,module,exports){var _=require("underscore")._;exports.ngrams=function(sequence,n,startSymbol,endSymbol){return ngrams(sequence,n,startSymbol,endSymbol)};exports.bigrams=function(sequence,startSymbol,endSymbol){return ngrams(sequence,2,startSymbol,endSymbol)};exports.trigrams=function(sequence,startSymbol,endSymbol){return ngrams(sequence,3,startSymbol,endSymbol)};var ngrams=function(sequence,n,startSymbol,endSymbol){var result=[],i;if(!_(sequence).isArray()){sequence=sequence.split("")}var count=_.max([0,sequence.length-n+1]);if(typeof startSymbol!=="undefined"&&startSymbol!==null){var blanks=[];for(i=0;i<n;i++){blanks.push(startSymbol)}for(var p=n-1;p>0;p--){result.push(blanks.slice(0,p).concat(sequence.slice(0,n-p)))}}for(i=0;i<count;i++){result.push(sequence.slice(i,i+n))}if(typeof endSymbol!=="undefined"&&endSymbol!==null){var blanks=[];for(var i=0;i<n;i++){blanks.push(endSymbol)}for(var p=n-1;p>0;p--){result.push(sequence.slice(sequence.length-p,sequence.length).concat(blanks.slice(0,n-p)))}}return result}},{underscore:128}],53:[function(require,module,exports){var replacer=require("../util/utils").replacer;var conversionTable={"can't":"can not","won't":"will not","couldn't've":"could not have","i'm":"I am","how'd":"how did"};var rules=[{regex:/([azAZ]*)n\'[tT]/g,output:"$1 not"},{regex:/([azAZ]*)\'[sS]/g,output:"$1 is"},{regex:/([azAZ]*)\'[lL][lL]/g,output:"$1 will"},{regex:/([azAZ]*)\'[rR][eE]/g,output:"$1 are"},{regex:/([azAZ]*)\'[vV][eE]/g,output:"$1 have"},{regex:/([azAZ]*)\'[dD]/g,output:"$1 would"}];var normalize_tokens=function(tokens){if(typeof tokens==="string"){tokens=[tokens]}var results=[];var rule_count=rules.length;var num_tokens=tokens.length;var i,token,r,rule;for(i=0;i<num_tokens;i++){token=tokens[i];if(conversionTable[token.toLowerCase()]){results=results.concat(conversionTable[token.toLowerCase()].split(/\W+/))}else{var matched=false;for(r=0;r<rule_count;r++){rule=rules[r];if(token.match(rule.regex)){results=results.concat(token.replace(rule.regex,rule.output).split(/\W+/));matched=true;break}}if(!matched){results.push(token)}}}return results};exports.normalize_tokens=normalize_tokens},{"../util/utils":111}],54:[function(require,module,exports){var flip=require("../util/utils.js").flip;var merge=require("../util/utils.js").merge;var replacer=require("../util/utils").replacer;var conversionTables={fullwidthToHalfwidth:{alphabet:{"":"a","":"b","":"c","":"d","":"e","":"f","":"g","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"q","":"r","":"s","":"t","":"u","":"v","":"w","":"x","":"y","":"z","":"A","":"B","":"C","":"D","":"E","":"F","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"Q","":"R","":"S","":"T","":"U","":"V","":"W","":"X","":"Y","":"Z","":" "},numbers:{"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"},symbol:{"":"_","":"-","":",","":";","":":","":"!","":"?","":".","":"(","":")","":"[","":"]","":"{","":"}","":"@","":"*","":"\\","":"/","":"&","":"#","":"%","":"`","":"^","":"+","":"<","":"=","":">","":"|","":"","":"","":"-","":"$","":'"'},purePunctuation:{"":"","":"","":"","":"","":""},punctuation:{},katakana:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}},halfwidthToFullwidth:{}};var fixFullwidthKana={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var fixCompositeSymbolsTable={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"10","":"11","":"12","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"10","":"11","":"12","":"13","":"14","":"15","":"16","":"17","":"18","":"19","":"20","":"21","":"22","":"23","":"24","":"25","":"26","":"27","":"28","":"29","":"30","":"31","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"10","":"11","":"12","":"13","":"14","":"15","":"16","":"17","":"18","":"19","":"20","":"21","":"22","":"23","":"24","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};conversionTables.fullwidthToHalfwidth.punctuation=merge(conversionTables.fullwidthToHalfwidth.symbol,conversionTables.fullwidthToHalfwidth.purePunctuation);conversionTables.halfwidthToFullwidth.alphabet=flip(conversionTables.fullwidthToHalfwidth.alphabet);conversionTables.halfwidthToFullwidth.numbers=flip(conversionTables.fullwidthToHalfwidth.numbers);conversionTables.halfwidthToFullwidth.symbol=flip(conversionTables.fullwidthToHalfwidth.symbol);conversionTables.halfwidthToFullwidth.purePunctuation=flip(conversionTables.fullwidthToHalfwidth.purePunctuation);conversionTables.halfwidthToFullwidth.punctuation=flip(conversionTables.fullwidthToHalfwidth.punctuation);conversionTables.halfwidthToFullwidth.katakana=flip(conversionTables.fullwidthToHalfwidth.katakana);conversionTables.normalize=merge(conversionTables.fullwidthToHalfwidth.alphabet,conversionTables.fullwidthToHalfwidth.numbers,conversionTables.fullwidthToHalfwidth.symbol,conversionTables.halfwidthToFullwidth.purePunctuation,conversionTables.halfwidthToFullwidth.katakana);var converters={fullwidthToHalfwidth:{alphabet:replacer(conversionTables.fullwidthToHalfwidth.alphabet),numbers:replacer(conversionTables.fullwidthToHalfwidth.numbers),symbol:replacer(conversionTables.fullwidthToHalfwidth.symbol),purePunctuation:replacer(conversionTables.fullwidthToHalfwidth.purePunctuation),punctuation:replacer(conversionTables.fullwidthToHalfwidth.punctuation),katakana:replacer(conversionTables.fullwidthToHalfwidth.katakana)},halfwidthToFullwidth:{alphabet:replacer(conversionTables.halfwidthToFullwidth.alphabet),numbers:replacer(conversionTables.halfwidthToFullwidth.numbers),symbol:replacer(conversionTables.halfwidthToFullwidth.symbol),purePunctuation:replacer(conversionTables.halfwidthToFullwidth.purePunctuation),punctuation:replacer(conversionTables.halfwidthToFullwidth.punctuation),katakana:replacer(conversionTables.halfwidthToFullwidth.katakana)},fixFullwidthKana:replacer(fixFullwidthKana),normalize:replacer(conversionTables.normalize)};var fixCompositeSymbols=replacer(fixCompositeSymbolsTable);converters.hiraganaToKatakana=function(str){
str=converters.halfwidthToFullwidth.katakana(str);str=converters.fixFullwidthKana(str);str=str.replace(//g,"");str=str.replace(//g,"");str=str.replace(/[-]/g,function(str){return String.fromCharCode(str.charCodeAt(0)+96)});return str};converters.katakanaToHiragana=function(str){str=converters.halfwidthToFullwidth.katakana(str);str=converters.fixFullwidthKana(str);str=str.replace(//g,"");str=str.replace(//g,"");str=str.replace(/[-]/g,function(str){return String.fromCharCode(str.charCodeAt(0)-96)});return str};var normalize_ja=function(str){str=str.replace(/(..)/g,"$1$1").replace(/(.)/g,"$1$1");str=converters.normalize(str);str=converters.fixFullwidthKana(str);str=fixCompositeSymbols(str);return str};exports.normalize_ja=normalize_ja;exports.converters=converters},{"../util/utils":111,"../util/utils.js":111}],55:[function(require,module,exports){var remove_diacritics=function(text){text=text.replace("","a");text=text.replace("","A");text=text.replace("","a");text=text.replace("","A");text=text.replace("","a");text=text.replace("","A");text=text.replace("","c");text=text.replace("","C");text=text.replace("","e");text=text.replace("","E");text=text.replace("","e");text=text.replace("","E");text=text.replace("","e");text=text.replace("","E");text=text.replace("","i");text=text.replace("","I");text=text.replace("","n");text=text.replace("","N");text=text.replace("","o");text=text.replace("","O");text=text.replace("","o");text=text.replace("","O");text=text.replace("","u");text=text.replace("","U");text=text.replace("","s");text=text.replace("","S");return text};exports.remove_diacritics=remove_diacritics},{}],56:[function(require,module,exports){var diacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];module.exports=function(str){var rules=diacriticsRemovalMap;for(var i=0;i<rules.length;i++){str=str.replace(rules[i].letters,rules[i].base)}return str}},{}],57:[function(require,module,exports){var codes={A:{0:[0,-1,-1],I:[[0,1,-1]],J:[[0,1,-1]],Y:[[0,1,-1]],U:[[0,7,-1]]},B:[[7,7,7]],C:{0:[5,5,5],Z:{0:[4,4,4],S:[[4,4,4]]},S:{0:[4,4,4],Z:[[4,4,4]]},K:[[5,5,5],[45,45,45]],H:{0:[5,5,5],S:[[5,54,54]]}},D:{0:[3,3,3],T:[[3,3,3]],Z:{0:[4,4,4],H:[[4,4,4]],S:[[4,4,4]]},S:{0:[4,4,4],H:[[4,4,4]],Z:[[4,4,4]]},R:{S:[[4,4,4]],Z:[[4,4,4]]}},E:{0:[0,-1,-1],I:[[0,1,-1]],J:[[0,1,-1]],Y:[[0,1,-1]],U:[[1,1,-1]],W:[[1,1,-1]]},F:{0:[7,7,7],B:[[7,7,7]]},G:[[5,5,5]],H:[[5,5,-1]],I:{0:[0,-1,-1],A:[[1,-1,-1]],E:[[1,-1,-1]],O:[[1,-1,-1]],U:[[1,-1,-1]]},J:[[4,4,4]],K:{0:[5,5,5],H:[[5,5,5]],S:[[5,54,54]]},L:[[8,8,8]],M:{0:[6,6,6],N:[[66,66,66]]},N:{0:[6,6,6],M:[[66,66,66]]},O:{0:[0,-1,-1],I:[[0,1,-1]],J:[[0,1,-1]],Y:[[0,1,-1]]},P:{0:[7,7,7],F:[[7,7,7]],H:[[7,7,7]]},Q:[[5,5,5]],R:{0:[9,9,9],Z:[[94,94,94],[94,94,94]],S:[[94,94,94],[94,94,94]]},S:{0:[4,4,4],Z:{0:[4,4,4],T:[[2,43,43]],C:{Z:[[2,4,4]],S:[[2,4,4]]},D:[[2,43,43]]},D:[[2,43,43]],T:{0:[2,43,43],R:{Z:[[2,4,4]],S:[[2,4,4]]},C:{H:[[2,4,4]]},S:{H:[[2,4,4]],C:{H:[[2,4,4]]}}},C:{0:[2,4,4],H:{0:[4,4,4],T:{0:[2,43,43],S:{C:{H:[[2,4,4]]},H:[[2,4,4]]},C:{H:[[2,4,4]]}},D:[[2,43,43]]}},H:{0:[4,4,4],T:{0:[2,43,43],C:{H:[[2,4,4]]},S:{H:[[2,4,4]]}},C:{H:[[2,4,4]]},D:[[2,43,43]]}},T:{0:[3,3,3],C:{0:[4,4,4],H:[[4,4,4]]},Z:{0:[4,4,4],S:[[4,4,4]]},S:{0:[4,4,4],Z:[[4,4,4]],H:[[4,4,4]],C:{H:[[4,4,4]]}},T:{S:{0:[4,4,4],Z:[[4,4,4]],C:{H:[[4,4,4]]}},C:{H:[[4,4,4]]},Z:[[4,4,4]]},H:[[3,3,3]],R:{Z:[[4,4,4]],S:[[4,4,4]]}},U:{0:[0,-1,-1],E:[[0,-1,-1]],I:[[0,1,-1]],J:[[0,1,-1]],Y:[[0,1,-1]]},V:[[7,7,7]],W:[[7,7,7]],X:[[5,54,54]],Y:[[1,-1,-1]],Z:{0:[4,4,4],D:{0:[2,43,43],Z:{0:[2,4,4],H:[[2,4,4]]}},H:{0:[4,4,4],D:{0:[2,43,43],Z:{H:[[2,4,4]]}}},S:{0:[4,4,4],H:[[4,4,4]],C:{H:[[4,4,4]]}}}};function process(word,codeLength){codeLength=codeLength||6;word=word.toUpperCase();var output="";var pos=0,lastCode=-1;while(pos<word.length){var substr=word.slice(pos);var rules=findRules(substr);var code;if(pos==0){code=rules.mapping[0]}else if(substr[rules.length]&&findRules(substr[rules.length]).mapping[0]==0){code=rules.mapping[1]}else{code=rules.mapping[2]}if(code!=-1&&code!=lastCode)output+=code;lastCode=code;pos+=rules.length}return normalizeLength(output,codeLength)}function findRules(str){var state=codes[str[0]];var legalState=state||[[-1,-1,-1]],charsInvolved=1;for(var offs=1;offs<str.length;offs++){if(!state||!state[str[offs]])break;state=state[str[offs]];if(state[0]){legalState=state;charsInvolved=offs+1}}return{length:charsInvolved,mapping:legalState[0]}}function normalizeLength(token,length){length=length||6;if(token.length<length){token+=new Array(length-token.length+1).join("0")}return token.slice(0,length)}var Phonetic=require("./phonetic");var soundex=new Phonetic;soundex.process=process;module.exports=soundex},{"./phonetic":60}],58:[function(require,module,exports){var Phonetic=require("./phonetic");var DoubleMetaphone=new Phonetic;module.exports=DoubleMetaphone;function isVowel(c){return c&&c.match(/[aeiouy]/i)}function truncate(string,length){if(string.length>=length)string=string.substring(0,length);return string}function process(token,maxLength){token=token.toUpperCase();var primary="",secondary="";var pos=0;maxLength==maxLength||32;function subMatch(startOffset,stopOffset,terms){return subMatchAbsolute(pos+startOffset,pos+stopOffset,terms)}function subMatchAbsolute(startOffset,stopOffset,terms){return terms.indexOf(token.substring(startOffset,stopOffset))>-1}function addSecondary(primaryAppendage,secondaryAppendage){primary+=primaryAppendage;secondary+=secondaryAppendage}function add(primaryAppendage){addSecondary(primaryAppendage,primaryAppendage)}function addCompressedDouble(c,encoded){if(token[pos+1]==c)pos++;add(encoded||c)}function handleC(){if(pos>=1&&!isVowel(token[pos-2])&&token[pos-1]=="A"&&token[pos+1]=="H"&&(token[pos+2]!="I"&&token[pos+2]!="I")||subMatch(-2,4,["BACHER","MACHER"])){add("K");pos++}else if(pos==0&&token.substring(1,6)=="EASAR"){add("S");add("S");add("R");pos+=6}else if(token.substring(pos+1,pos+4)=="HIA"){add("K");pos++}else if(token[pos+1]=="H"){if(pos>0&&token.substring(pos+2,pos+4)=="AE"){addSecondary("K","X");pos++}else if(pos==0&&(subMatch(1,6,["HARAC","HARIS"])||subMatch(1,4,["HOR","HUM","HIA","HEM"]))&&token.substring(pos+1,pos+5)!="HORE"){add("K");pos++}else{if(subMatchAbsolute(0,3,["VAN","VON"])||token.substring(0,3)=="SCH"||subMatch(-2,4,["ORCHES","ARCHIT","ORCHID"])||subMatch(2,3,["T","S"])||(subMatch(-1,0,["A","O","U","E"])||pos==0)&&subMatch(2,3,["B","F","H","L","M","N","R","V","W"])){add("K")}else if(pos>0){if(token.substring(0,2)=="MC"){add("K")}else{addSecondary("X","K")}}else{add("X")}pos++}}else if(token.substring(pos,pos+2)=="CZ"&&token.substring(pos-2,pos+1)!="WICZ"){addSecondary("S","X");pos++}else if(token.substring(pos,pos+3)=="CIA"){add("X");pos+=2}else if(token[pos+1]=="C"&&pos!=1&&token[0]!="M"){if(["I","E","H"].indexOf(token[pos+2])>-1&&token.substring(pos+2,pos+4)!="HU"){if(pos==1&&token[pos-1]=="A"||subMatch(-1,4,["UCCEE","UCCES"])){add("KS")}else{add("X")}pos+=2}else{add("K");pos++}}else if(["K","G","Q"].indexOf(token[pos+1])>-1){add("K");pos++}else if(["E","I","Y"].indexOf(token[pos+1])>-1){if(subMatch(1,3,["IA","IE","IO"])){addSecondary("S","X")}else{add("S")}pos++}else{add("K");if(token[pos+1]==" "&&["C","Q","G"].indexOf(token[pos+2])){pos+=2}else if(["C","K","Q"].indexOf(token[pos+1])>-1&&!subMatch(1,3,["CE","CI"])){pos++}}}function handleD(){if(token[pos+1]=="G"){if(["I","E","Y"].indexOf(token[pos+2])>-1){add("J");pos+=2}else{add("TK");pos++}}else if(token[pos+1]=="T"){add("T");pos++}else addCompressedDouble("D","T")}function handleG(){if(token[pos+1]=="H"){if(pos>0&&!isVowel(token[pos-1])){add("K");pos++}else if(pos==0){if(token[pos+2]=="I"){add("J")}else{add("K")}pos++}else if(pos>1&&(["B","H","D"].indexOf(token[pos-2])>-1||["B","H","D"].indexOf(token[pos-3])>-1||["B","H"].indexOf(token[pos-4])>-1)){pos++}else{if(pos>2&&token[pos-1]=="U"&&["C","G","L","R","T"].indexOf(token[pos-3])>-1){add("F")}else if(token[pos-1]!="I"){add("K")}pos++}}else if(token[pos+1]=="N"){if(pos==1&&startsWithVowel&&!slavoGermanic){addSecondary("KN","N")}else{if(token.substring(pos+2,pos+4)!="EY"&&(token[pos+1]!="Y"&&!slavoGermanic)){addSecondary("N","KN")}else add("KN")}pos++}else if(token.substring(pos+1,pos+3)=="LI"&&!slavoGermanic){addSecondary("KL","L");pos++}else if(pos==0&&(token[pos+1]=="Y"||subMatch(1,3,["ES","EP","EB","EL","EY","IB","IL","IN","IE","EI","ER"]))){addSecondary("K","J")}else{addCompressedDouble("G","K")}}function handleH(){if((pos==0||isVowel(token[pos-1]))&&isVowel(token[pos+1])){add("H");pos++}}function handleJ(){var jose=token.substring(pos+1,pos+4)=="OSE";if(san||jose){if(pos==0&&token[pos+4]==" "||san){add("H")}else add("J","H")}else{if(pos==0){addSecondary("J","A")}else if(isVowel(token[pos-1])&&!slavoGermanic&&(token[pos+1]=="A"||token[pos+1]=="O")){addSecondary("J","H")}else if(pos==token.length-1){addSecondary("J"," ")}else addCompressedDouble("J")}}function handleL(){if(token[pos+1]=="L"){if(pos==token.length-3&&(subMatch(-1,3,["ILLO","ILLA","ALLE"])||token.substring(pos-1,pos+3)=="ALLE"&&(subMatch(-2,-1,["AS","OS"])>-1||["A","O"].indexOf(token[token.length-1])>-1))){addSecondary("L","");pos++;return}pos++}add("L")}function handleM(){addCompressedDouble("M");if(token[pos-1]=="U"&&token[pos+1]=="B"&&(pos==token.length-2||token.substring(pos+2,pos+4)=="ER"))pos++}function handleP(){if(token[pos+1]=="H"){add("F");pos++}else{addCompressedDouble("P");if(token[pos+1]=="B")pos++}}function handleR(){if(pos==token.length-1&&!slavoGermanic&&token.substring(pos-2,pos)=="IE"&&!subMatch(-4,-3,["ME","MA"])){addSecondary("","R")}else addCompressedDouble("R")}function handleS(){if(pos==0&&token.substring(0,5)=="SUGAR"){addSecondary("X","S")}else if(token[pos+1]=="H"){if(subMatch(2,5,["EIM","OEK","OLM","OLZ"])){add("S")}else{add("X")}pos++}else if(subMatch(1,3,["IO","IA"])){if(slavoGermanic){add("S")}else{addSecondary("S","X")}pos++}else if(pos==0&&["M","N","L","W"].indexOf(token[pos+1])>-1||token[pos+1]=="Z"){addSecondary("S","X");if(token[pos+1]=="Z")pos++}else if(token.substring(pos,pos+2)=="SC"){if(token[pos+2]=="H"){if(subMatch(3,5,["ER","EN"])){addSecondary("X","SK")}else if(subMatch(3,5,["OO","UY","ED","EM"])){add("SK")}else if(pos==0&&!isVowel(token[3])&&token[3]!="W"){addSecondary("X","S")}else{add("X")}}else if(["I","E","Y"].indexOf(token[pos+2])>-1){add("S")}else{add("SK")}pos+=2}else if(pos==token.length-1&&subMatch(-2,0,["AI","OI"])){addSecondary("","S")}else if(token[pos+1]!="L"&&(token[pos-1]!="A"&&token[pos-1]!="I")){addCompressedDouble("S");if(token[pos+1]=="Z")pos++}}function handleT(){if(token.substring(pos+1,pos+4)=="ION"){add("XN");pos+=3}else if(subMatch(1,3,["IA","CH"])){add("X");pos+=2}else if(token[pos+1]=="H"||token.substring(1,2)=="TH"){if(subMatch(2,4,["OM","AM"])||["VAN ","VON "].indexOf(token.substring(0,4))>-1||token.substring(0,3)=="SCH"){add("T")}else addSecondary("0","T");pos++}else{addCompressedDouble("T");if(token[pos+1]=="D")pos++}}function handleX(){if(pos==0){add("S")}else if(!(pos==token.length-1&&(["IAU","EAU","IEU"].indexOf(token.substring(pos-3,pos))>-1||["AU","OU"].indexOf(token.substring(pos-2,pos))>-1))){add("KS")}}function handleW(){if(pos==0){if(token[1]=="H"){add("A")}else if(isVowel(token[1])){addSecondary("A","F")}}else if(pos==token.length-1&&isVowel(token[pos-1])||subMatch(-1,4,["EWSKI","EWSKY","OWSKI","OWSKY"])||token.substring(0,3)=="SCH"){addSecondary("","F");pos++}else if(["ICZ","ITZ"].indexOf(token.substring(pos+1,pos+4))>-1){addSecondary("TS","FX");pos+=3}}function handleZ(){if(token[pos+1]=="H"){add("J");pos++}else if(subMatch(1,3,["ZO","ZI","ZA"])||slavoGermanic&&pos>0&&token[pos-1]!="T"){addSecondary("S","TS");pos++}else addCompressedDouble("Z","S")}var san=token.substring(0,3)=="SAN";var startsWithVowel=isVowel(token[0]);var slavoGermanic=token.match(/(W|K|CZ|WITZ)/);if(subMatch(0,2,["GN","KN","PN","WR","PS"])){pos++}while(pos<token.length){switch(token[pos]){case"A":case"E":case"I":case"O":case"U":case"Y":case"":case"":case"":case"":if(pos==0)add("A");break;case"B":addCompressedDouble("B","P");break;case"C":handleC();break;case"":add("S");break;case"D":handleD();break;case"F":case"K":case"N":addCompressedDouble(token[pos]);break;case"G":handleG();break;case"H":handleH();break;case"J":handleJ();break;case"L":handleL();break;case"M":handleM();break;case"":add("N");break;case"P":handleP();break;case"Q":addCompressedDouble("Q","K");break;case"R":handleR();break;case"S":handleS();break;case"T":handleT();break;case"V":addCompressedDouble("V","F");break;case"W":handleW();break;case"X":handleX();break;case"Z":handleZ();break}if(primary.length>=maxLength&&secondary.length>=maxLength){break}pos++}return[truncate(primary,maxLength),truncate(secondary,maxLength)]}function compare(stringA,stringB){var encodingsA=process(stringA),encodingsB=process(stringB);return encodingsA[0]==encodingsB[0]||encodingsA[1]==encodingsB[1]}DoubleMetaphone.compare=compare;DoubleMetaphone.process=process;DoubleMetaphone.isVowel=isVowel},{"./phonetic":60}],59:[function(require,module,exports){var Phonetic=require("./phonetic");function dedup(token){return token.replace(/([^c])\1/g,"$1")}function dropInitialLetters(token){if(token.match(/^(kn|gn|pn|ae|wr)/))return token.substr(1,token.length-1);return token}function dropBafterMAtEnd(token){return token.replace(/mb$/,"m")}function cTransform(token){token=token.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();token=token.replace(/cia/g,"xia");token=token.replace(/c(i|e|y)/g,"s$1");token=token.replace(/c/g,"k");return token}function dTransform(token){token=token.replace(/d(ge|gy|gi)/g,"j$1");token=token.replace(/d/g,"t");return token}function dropG(token){token=token.replace(/gh(^$|[^aeiou])/g,"h$1");token=token.replace(/g(n|ned)$/g,"$1");return token}function transformG(token){token=token.replace(/gh/g,"f");token=token.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");token=token.replace(/gg/g,"g");token=token.replace(/g/g,"k");return token}function dropH(token){return token.replace(/([aeiou])h([^aeiou]|$)/g,"$1$2")}function transformCK(token){return token.replace(/ck/g,"k")}function transformPH(token){return token.replace(/ph/g,"f")}function transformQ(token){return token.replace(/q/g,"k")}function transformS(token){return token.replace(/s(h|io|ia)/g,"x$1")}function transformT(token){token=token.replace(/t(ia|io)/g,"x$1");token=token.replace(/th/,"0");return token}function dropT(token){return token.replace(/tch/g,"ch")}function transformV(token){return token.replace(/v/g,"f")}function transformWH(token){return token.replace(/^wh/,"w")}function dropW(token){return token.replace(/w([^aeiou]|$)/g,"$1")}function transformX(token){token=token.replace(/^x/,"s");token=token.replace(/x/g,"ks");return token}function dropY(token){return token.replace(/y([^aeiou]|$)/g,"$1")}function transformZ(token){return token.replace(/z/,"s")}function dropVowels(token){return token.charAt(0)+token.substr(1,token.length).replace(/[aeiou]/g,"")}var Metaphone=new Phonetic;module.exports=Metaphone;Metaphone.process=function(token,maxLength){maxLength==maxLength||32;token=token.toLowerCase();token=dedup(token);token=dropInitialLetters(token);token=dropBafterMAtEnd(token);token=transformCK(token);token=cTransform(token);token=dTransform(token);token=dropG(token);token=transformG(token);token=dropH(token);token=transformPH(token);token=transformQ(token);token=transformS(token);token=transformX(token);token=transformT(token);token=dropT(token);token=transformV(token);token=transformWH(token);token=dropW(token);token=dropY(token);token=transformZ(token);token=dropVowels(token);token.toUpperCase();if(token.length>=maxLength)token=token.substring(0,maxLength);return token.toUpperCase()};Metaphone.dedup=dedup;Metaphone.dropInitialLetters=dropInitialLetters;Metaphone.dropBafterMAtEnd=dropBafterMAtEnd;Metaphone.cTransform=cTransform;Metaphone.dTransform=dTransform;Metaphone.dropG=dropG;Metaphone.transformG=transformG;Metaphone.dropH=dropH;Metaphone.transformCK=transformCK;Metaphone.transformPH=transformPH;Metaphone.transformQ=transformQ;Metaphone.transformS=transformS;Metaphone.transformT=transformT;Metaphone.dropT=dropT;Metaphone.transformV=transformV;Metaphone.transformWH=transformWH;Metaphone.dropW=dropW;Metaphone.transformX=transformX;Metaphone.dropY=dropY;Metaphone.transformZ=transformZ;Metaphone.dropVowels=dropVowels},{"./phonetic":60}],60:[function(require,module,exports){var stopwords=require("../util/stopwords");var Tokenizer=require("../tokenizers/aggressive_tokenizer"),tokenizer=new Tokenizer;module.exports=function(){this.compare=function(stringA,stringB){return this.process(stringA)==this.process(stringB)};this.attach=function(){var phonetic=this;String.prototype.soundsLike=function(compareTo){return phonetic.compare(this,compareTo)};String.prototype.phonetics=function(){return phonetic.process(this)};String.prototype.tokenizeAndPhoneticize=function(keepStops){var phoneticizedTokens=[];tokenizer.tokenize(this).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)<0)phoneticizedTokens.push(token.phonetics())});return phoneticizedTokens}}}},{"../tokenizers/aggressive_tokenizer":81,"../util/stopwords":101}],61:[function(require,module,exports){var Phonetic=require("./phonetic");function transformLipps(token){return token.replace(/[bfpv]/g,"1")}function transformThroats(token){return token.replace(/[cgjkqsxz]/g,"2")}function transformToungue(token){return token.replace(/[dt]/g,"3")}function transformL(token){return token.replace(/l/g,"4")}function transformHum(token){return token.replace(/[mn]/g,"5")}function transformR(token){return token.replace(/r/g,"6")}function condense(token){return token.replace(/(\d)?\1+/g,"$1")}function padRight0(token){if(token.length<4)return token+Array(4-token.length).join("0");else return token}function transform(token){return transformLipps(transformThroats(transformToungue(transformL(transformHum(transformR(token))))))}var SoundEx=new Phonetic;module.exports=SoundEx;SoundEx.process=function(token,maxLength){token=token.toLowerCase();var transformed=condense(transform(token.substr(1,token.length-1)));transformed=transformed.replace(new RegExp("^"+transform(token.charAt(0))),"");return token.charAt(0).toUpperCase()+padRight0(transformed.replace(/\D/g,"")).substr(0,maxLength&&maxLength-1||3)};SoundEx.transformLipps=transformLipps;SoundEx.transformThroats=transformThroats;SoundEx.transformToungue=transformToungue;SoundEx.transformL=transformL;SoundEx.transformHum=transformHum;SoundEx.transformR=transformR;SoundEx.condense=condense;SoundEx.padRight0=padRight0},{"./phonetic":60}],62:[function(require,module,exports){exports.rules={a:[{continuation:false,intact:true,pattern:"ia",size:"2"},{continuation:false,intact:true,pattern:"a",size:"1"}],b:[{continuation:false,intact:false,pattern:"bb",size:"1"}],c:[{appendage:"s",continuation:false,intact:false,pattern:"ytic",size:"3"},{continuation:true,intact:false,pattern:"ic",size:"2"},{appendage:"t",continuation:true,intact:false,pattern:"nc",size:"1"}],d:[{continuation:false,intact:false,pattern:"dd",size:"1"},{appendage:"y",continuation:true,intact:false,pattern:"ied",size:"3"},{appendage:"ss",continuation:false,intact:false,pattern:"ceed",size:"2"},{continuation:false,intact:false,pattern:"eed",size:"1"},{continuation:true,intact:false,pattern:"ed",size:"2"},{continuation:true,intact:false,pattern:"hood",size:"4"}],e:[{continuation:true,intact:false,pattern:"e",size:"1"}],f:[{appendage:"v",continuation:false,intact:false,pattern:"lief",size:"1"},{continuation:true,intact:false,pattern:"if",size:"2"}],g:[{continuation:true,intact:false,pattern:"ing",size:"3"},{appendage:"y",continuation:false,intact:false,pattern:"iag",size:"3"},{continuation:true,intact:false,pattern:"ag",size:"2"},{continuation:false,intact:false,pattern:"gg",size:"1"}],h:[{continuation:false,intact:true,pattern:"th",size:"2"},{appendage:"ct",continuation:false,intact:false,pattern:"guish",size:"5"},{continuation:true,intact:false,pattern:"ish",size:"3"}],i:[{continuation:false,intact:true,pattern:"i",size:"1"},{appendage:"y",continuation:true,intact:false,pattern:"i",size:"1"}],j:[{appendage:"d",continuation:false,intact:false,pattern:"ij",size:"1"},{appendage:"s",continuation:false,intact:false,pattern:"fuj",size:"1"},{appendage:"d",continuation:false,intact:false,pattern:"uj",size:"1"},{appendage:"d",continuation:false,intact:false,pattern:"oj",size:"1"},{appendage:"r",continuation:false,intact:false,pattern:"hej",size:"1"},{appendage:"t",continuation:false,intact:false,pattern:"verj",size:"1"},{appendage:"t",continuation:false,intact:false,pattern:"misj",size:"2"},{appendage:"d",continuation:false,intact:false,pattern:"nj",size:"1"},{appendage:"s",continuation:false,intact:false,pattern:"j",size:"1"}],l:[{continuation:false,intact:false,pattern:"ifiabl",size:"6"},{appendage:"y",continuation:false,intact:false,pattern:"iabl",size:"4"},{continuation:true,intact:false,pattern:"abl",size:"3"},{continuation:false,intact:false,pattern:"ibl",size:"3"},{appendage:"l",continuation:true,intact:false,pattern:"bil",size:"2"},{continuation:false,intact:false,pattern:"cl",size:"1"},{appendage:"y",continuation:false,intact:false,pattern:"iful",size:"4"},{continuation:true,intact:false,pattern:"ful",size:"3"},{continuation:false,intact:false,pattern:"ul",size:"2"},{continuation:true,intact:false,pattern:"ial",size:"3"},{continuation:true,intact:false,pattern:"ual",size:"3"},{continuation:true,intact:false,pattern:"al",size:"2"},{continuation:false,intact:false,pattern:"ll",size:"1"}],m:[{continuation:false,intact:false,pattern:"ium",size:"3"},{continuation:false,intact:true,pattern:"um",size:"2"},{continuation:true,intact:false,pattern:"ism",size:"3"},{continuation:false,intact:false,pattern:"mm",size:"1"}],n:[{appendage:"j",continuation:true,intact:false,pattern:"sion",size:"4"},{appendage:"ct",continuation:false,intact:false,pattern:"xion",size:"4"},{continuation:true,intact:false,pattern:"ion",size:"3"},{continuation:true,intact:false,pattern:"ian",size:"3"},{continuation:true,intact:false,pattern:"an",size:"2"},{continuation:false,intact:false,pattern:"een",size:"0"},{continuation:true,intact:false,pattern:"en",size:"2"},{continuation:false,intact:false,pattern:"nn",size:"1"}],p:[{continuation:true,intact:false,pattern:"ship",size:"4"},{continuation:false,intact:false,pattern:"pp",size:"1"}],r:[{continuation:true,intact:false,pattern:"er",size:"2"},{continuation:false,intact:false,pattern:"ear",size:"0"},{continuation:false,intact:false,pattern:"ar",size:"2"},{continuation:true,intact:false,pattern:"or",size:"2"},{continuation:true,intact:false,pattern:"ur",size:"2"},{continuation:false,intact:false,pattern:"rr",size:"1"},{continuation:true,intact:false,pattern:"tr",size:"1"},{appendage:"y",continuation:true,intact:false,pattern:"ier",size:"3"}],s:[{appendage:"y",continuation:true,intact:false,pattern:"ies",size:"3"},{continuation:false,intact:false,pattern:"sis",size:"2"},{continuation:true,intact:false,pattern:"is",size:"2"},{continuation:true,intact:false,pattern:"ness",size:"4"},{continuation:false,intact:false,pattern:"ss",size:"0"},{continuation:true,intact:false,pattern:"ous",size:"3"},{continuation:false,intact:true,pattern:"us",size:"2"},{continuation:true,intact:true,pattern:"s",size:"1"},{continuation:false,intact:false,pattern:"s",size:"0"}],t:[{appendage:"y",continuation:false,intact:false,pattern:"plicat",size:"4"},{continuation:true,intact:false,pattern:"at",size:"2"},{continuation:true,intact:false,pattern:"ment",size:"4"},{continuation:true,intact:false,pattern:"ent",size:"3"},{continuation:true,intact:false,pattern:"ant",size:"3"},{appendage:"b",continuation:false,intact:false,pattern:"ript",size:"2"},{appendage:"b",continuation:false,intact:false,pattern:"orpt",size:"2"},{continuation:false,intact:false,pattern:"duct",size:"1"},{continuation:false,intact:false,pattern:"sumpt",size:"2"},{appendage:"iv",continuation:false,intact:false,pattern:"cept",size:"2"},{appendage:"v",continuation:false,intact:false,pattern:"olut",size:"2"},{continuation:false,intact:false,pattern:"sist",size:"0"},{continuation:true,intact:false,pattern:"ist",size:"3"},{continuation:false,intact:false,pattern:"tt",size:"1"}],u:[{continuation:false,intact:false,pattern:"iqu",size:"3"},{continuation:false,intact:false,pattern:"ogu",size:"1"}],v:[{appendage:"j",continuation:true,intact:false,pattern:"siv",size:"3"},{continuation:false,intact:false,pattern:"eiv",size:"0"},{continuation:true,intact:false,pattern:"iv",size:"2"}],y:[{continuation:true,intact:false,pattern:"bly",size:"1"},{appendage:"y",continuation:true,intact:false,pattern:"ily",
size:"3"},{continuation:false,intact:false,pattern:"ply",size:"0"},{continuation:true,intact:false,pattern:"ly",size:"2"},{continuation:false,intact:false,pattern:"ogy",size:"1"},{continuation:false,intact:false,pattern:"phy",size:"1"},{continuation:false,intact:false,pattern:"omy",size:"1"},{continuation:false,intact:false,pattern:"opy",size:"1"},{continuation:true,intact:false,pattern:"ity",size:"3"},{continuation:true,intact:false,pattern:"ety",size:"3"},{continuation:false,intact:false,pattern:"lty",size:"2"},{continuation:false,intact:false,pattern:"istry",size:"5"},{continuation:true,intact:false,pattern:"ary",size:"3"},{continuation:true,intact:false,pattern:"ory",size:"3"},{continuation:false,intact:false,pattern:"ify",size:"3"},{appendage:"t",continuation:true,intact:false,pattern:"ncy",size:"2"},{continuation:true,intact:false,pattern:"acy",size:"3"}],z:[{continuation:true,intact:false,pattern:"iz",size:"2"},{appendage:"s",continuation:false,intact:false,pattern:"yz",size:"1"}]}},{}],63:[function(require,module,exports){var Stemmer=require("./stemmer");var ruleTable=require("./lancaster_rules").rules;function acceptable(candidate){if(candidate.match(/^[aeiou]/))return candidate.length>1;else return candidate.length>2&&candidate.match(/[aeiouy]/)}function applyRuleSection(token,intact){var section=token.substr(-1);var rules=ruleTable[section];if(rules){for(var i=0;i<rules.length;i++){if((intact||!rules[i].intact)&&token.substr(0-rules[i].pattern.length)==rules[i].pattern){var result=token.substr(0,token.length-rules[i].size);if(rules[i].appendage)result+=rules[i].appendage;if(acceptable(result)){token=result;if(rules[i].continuation){return applyRuleSection(result,false)}else{return result}}}}}return token}var LancasterStemmer=new Stemmer;module.exports=LancasterStemmer;LancasterStemmer.stem=function(token){return applyRuleSection(token.toLowerCase(),true)}},{"./lancaster_rules":62,"./stemmer":71}],64:[function(require,module,exports){var Stemmer=require("./stemmer");function categorizeGroups(token){return token.replace(/[^aeiouy]+y/g,"CV").replace(/[aeiou]+/g,"V").replace(/[^V]+/g,"C")}function categorizeChars(token){return token.replace(/[^aeiouy]y/g,"CV").replace(/[aeiou]/g,"V").replace(/[^V]/g,"C")}function measure(token){if(!token)return-1;return categorizeGroups(token).replace(/^C/,"").replace(/V$/,"").length/2}function endsWithDoublCons(token){return token.match(/([^aeiou])\1$/)}function attemptReplace(token,pattern,replacement,callback){var result=null;if(typeof pattern=="string"&&token.substr(0-pattern.length)==pattern)result=token.replace(new RegExp(pattern+"$"),replacement);else if(pattern instanceof RegExp&&token.match(pattern))result=token.replace(pattern,replacement);if(result&&callback)return callback(result);else return result}function attemptReplacePatterns(token,replacements,measureThreshold){var replacement=token;for(var i=0;i<replacements.length;i++){if(measureThreshold==null||measure(attemptReplace(token,replacements[i][0],replacements[i][1]))>measureThreshold){replacement=attemptReplace(replacement,replacements[i][0],replacements[i][2])||replacement}}return replacement}function replacePatterns(token,replacements,measureThreshold){return attemptReplacePatterns(token,replacements,measureThreshold)||token}function replaceRegex(token,regex,includeParts,minimumMeasure){var parts;var result="";if(regex.test(token)){parts=regex.exec(token);includeParts.forEach(function(i){result+=parts[i]})}if(measure(result)>minimumMeasure){return result}return null}function step1a(token){if(token.match(/(ss|i)es$/)){return token.replace(/(ss|i)es$/,"$1")}if(token.substr(-1)=="s"&&token.substr(-2,1)!="s"&&token.length>2){return token.replace(/s?$/,"")}return token}function step1b(token){if(token.substr(-3)=="eed"){if(measure(token.substr(0,token.length-3))>0)return token.replace(/eed$/,"ee")}else{var result=attemptReplace(token,/(ed|ing)$/,"",function(token){if(categorizeGroups(token).indexOf("V")>=0){result=attemptReplacePatterns(token,[["at","","ate"],["bl","","ble"],["iz","","ize"]]);if(result!=token){return result}else{if(endsWithDoublCons(token)&&token.match(/[^lsz]$/)){return token.replace(/([^aeiou])\1$/,"$1")}if(measure(token)==1&&categorizeChars(token).substr(-3)=="CVC"&&token.match(/[^wxy]$/)){return token+"e"}}return token}return null});if(result){return result}}return token}function step1c(token){var categorizedGroups=categorizeGroups(token);if(token.substr(-1)=="y"&&categorizedGroups.substr(0,categorizedGroups.length-1).indexOf("V")>-1){return token.replace(/y$/,"i")}return token}function step2(token){token=replacePatterns(token,[["ational","","ate"],["tional","","tion"],["enci","","ence"],["anci","","ance"],["izer","","ize"],["abli","","able"],["bli","","ble"],["alli","","al"],["entli","","ent"],["eli","","e"],["ousli","","ous"],["ization","","ize"],["ation","","ate"],["ator","","ate"],["alism","","al"],["iveness","","ive"],["fulness","","ful"],["ousness","","ous"],["aliti","","al"],["iviti","","ive"],["biliti","","ble"],["logi","","log"]],0);return token}function step3(token){return replacePatterns(token,[["icate","","ic"],["ative","",""],["alize","","al"],["iciti","","ic"],["ical","","ic"],["ful","",""],["ness","",""]],0)}function step4(token){return replaceRegex(token,/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,[1],1)||replaceRegex(token,/^(.+?)(s|t)(ion)$/,[1,2],1)||token}function step5a(token){var m=measure(token.replace(/e$/,""));if(m>1||m==1&&!(categorizeChars(token).substr(-4,3)=="CVC"&&token.match(/[^wxy].$/))){token=token.replace(/e$/,"")}return token}function step5b(token){if(measure(token)>1){return token.replace(/ll$/,"l")}return token}var PorterStemmer=new Stemmer;module.exports=PorterStemmer;PorterStemmer.stem=function(token){if(token.length<3)return token;return step5b(step5a(step4(step3(step2(step1c(step1b(step1a(token.toLowerCase())))))))).toString()};PorterStemmer.categorizeGroups=categorizeGroups;PorterStemmer.measure=measure;PorterStemmer.step1a=step1a;PorterStemmer.step1b=step1b;PorterStemmer.step1c=step1c;PorterStemmer.step2=step2;PorterStemmer.step3=step3;PorterStemmer.step4=step4;PorterStemmer.step5a=step5a;PorterStemmer.step5b=step5b},{"./stemmer":71}],65:[function(require,module,exports){var Stemmer=require("./stemmer_es");var PorterStemmer=new Stemmer;module.exports=PorterStemmer;function isVowel(letter){return letter=="a"||letter=="e"||letter=="i"||letter=="o"||letter=="u"||letter==""||letter==""||letter==""||letter==""||letter==""}function getNextVowelPos(token,start){length=token.length;for(var i=start;i<length;i++)if(isVowel(token[i]))return i;return length}function getNextConsonantPos(token,start){length=token.length;for(var i=start;i<length;i++)if(!isVowel(token[i]))return i;return length}function endsin(token,suffix){if(token.length<suffix.length)return false;return token.slice(-suffix.length)==suffix}function endsinArr(token,suffixes){for(var i=0;i<suffixes.length;i++){if(endsin(token,suffixes[i]))return suffixes[i]}return""}function removeAccent(token){var str=token.replace(//gi,"a");str=str.replace(//gi,"e");str=str.replace(//gi,"i");str=str.replace(//gi,"o");str=str.replace(//gi,"u");return str}PorterStemmer.stem=function(token){token=token.toLowerCase();if(token.length<3){return token}var r1,r2,rv,len=token.length;for(var i=0;i<token.length-1&&r1==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r1=i+2}}for(var i=r1;i<token.length-1&&r2==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r2=i+2}}if(len>3){if(isVowel(token[1])){rv=getNextVowelPos(token,2)+1}else if(isVowel(token[0])&&isVowel(token[1])){rv=getNextConsonantPos(token,2)+1}else{rv=3}}var r1_txt=token.substring(r1-1);var r2_txt=token.substring(r2-1);var rv_txt=token.substring(rv-1);var token_orig=token;var pronoun_suf=new Array("me","se","sela","selo","selas","selos","la","le","lo","las","les","los","nos");var pronoun_suf_pre1=new Array("ndo","ndo","r","r","r");var pronoun_suf_pre2=new Array("ando","iendo","ar","er","ir");var suf=endsinArr(token,pronoun_suf);if(suf!=""){var pre_suff=endsinArr(rv_txt.slice(0,-suf.length),pronoun_suf_pre1);if(pre_suff!=""){token=removeAccent(token.slice(0,-suf.length))}else{var pre_suff=endsinArr(rv_txt.slice(0,-suf.length),pronoun_suf_pre2);if(pre_suff!=""||endsin(token,"yendo")&&token.slice(-suf.length-6,1)=="u"){token=token.slice(0,-suf.length)}}}if(token!=token_orig){r1_txt=token.substring(r1-1);r2_txt=token.substring(r2-1);rv_txt=token.substring(rv-1)}var token_after0=token;if((suf=endsinArr(r2_txt,new Array("anza","anzas","ico","ica","icos","icas","ismo","ismos","able","ables","ible","ibles","ista","istas","oso","osa","osos","osas","amiento","amientos","imiento","imientos")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("icadora","icador","icacin","icadoras","icadores","icaciones","icante","icantes","icancia","icancias","adora","ador","acin","adoras","adores","aciones","ante","antes","ancia","ancias")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("loga","logas")))!=""){token=token.slice(0,-suf.length)+"log"}else if((suf=endsinArr(r2_txt,new Array("ucin","uciones")))!=""){token=token.slice(0,-suf.length)+"u"}else if((suf=endsinArr(r2_txt,new Array("encia","encias")))!=""){token=token.slice(0,-suf.length)+"ente"}else if((suf=endsinArr(r2_txt,new Array("ativamente","ivamente","osamente","icamente","adamente")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r1_txt,new Array("amente")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("antemente","ablemente","iblemente","mente")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("abilidad","abilidades","icidad","icidades","ividad","ividades","idad","idades")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("ativa","ativo","ativas","ativos","iva","ivo","ivas","ivos")))!=""){token=token.slice(0,-suf.length)}if(token!=token_after0){r1_txt=token.substring(r1-1);r2_txt=token.substring(r2-1);rv_txt=token.substring(rv-1)}var token_after1=token;if(token_after0==token_after1){if((suf=endsinArr(rv_txt,new Array("ya","ye","yan","yen","yeron","yendo","yo","y","yas","yes","yais","yamos")))!=""&&token.substring(suf.length-1,1)=="u"){token=token.slice(0,-suf.length)}if(token!=token_after1){r1_txt=token.substring(r1-1);r2_txt=token.substring(r2-1);rv_txt=token.substring(rv-1)}var token_after2a=token;if(token_after2a==token_after1){if((suf=endsinArr(rv_txt,new Array("en","es","is","emos")))!=""){token=token.slice(0,-suf.length);if(endsin(token,"gu")){token=token.slice(0,-1)}}else if((suf=endsinArr(rv_txt,new Array("aran","aras","arn","ars","arais","ara","aris","aramos","aremos","ar","ar","eran","eras","ern","ers","erais","era","eris","eramos","eremos","er","er","iran","iras","irn","irs","irais","ira","iris","iramos","iremos","ir","ir","aba","ada","ida","a","ara","iera","ad","ed","id","ase","iese","aste","iste","an","aban","an","aran","ieran","asen","iesen","aron","ieron","ado","ido","ando","iendo","i","ar","er","ir","as","abas","adas","idas","as","aras","ieras","ases","ieses","s","is","abais","ais","arais","ierais","  aseis","ieseis","asteis","isteis","ados","idos","amos","bamos","amos","imos","ramos","iramos","isemos","semos")))!=""){token=token.slice(0,-suf.length)}}}r1_txt=token.substring(r1-1);r2_txt=token.substring(r2-1);rv_txt=token.substring(rv-1);if((suf=endsinArr(rv_txt,new Array("os","a","o","","","")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(rv_txt,new Array("e","")))!=""){token=token.slice(0,-1);rv_txt=token.substring(rv-1);if(endsin(rv_txt,"u")&&endsin(token,"gu")){token=token.slice(0,-1)}}return removeAccent(token)}},{"./stemmer_es":72}],66:[function(require,module,exports){var Stemmer=require("./stemmer_fa");var PorterStemmer=new Stemmer;module.exports=PorterStemmer;PorterStemmer.stem=function(token){return token}},{"./stemmer_fa":73}],67:[function(require,module,exports){"use strict";var Stemmer=require("./stemmer_fr");var PorterStemmer=new Stemmer;module.exports=PorterStemmer;PorterStemmer.stem=stem;PorterStemmer.prelude=prelude;PorterStemmer.regions=regions;PorterStemmer.endsinArr=endsinArr;function stem(token){token=prelude(token.toLowerCase());if(token.length==1)return token;var regs=regions(token);var r1_txt,r2_txt,rv_txt;r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv);var beforeStep1=token;var suf,pref2,pref3,letterBefore,letter2Before,i;var doStep2a=false;if((suf=endsinArr(r2_txt,["ance","iqUe","isme","able","iste","eux","ances","iqUes","ismes","ables","istes"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(token,["icatrice","icateur","ication","icatrices","icateurs","ications"]))!=""){if(endsinArr(r2_txt,["icatrice","icateur","ication","icatrices","icateurs","ications"])!=""){token=token.slice(0,-suf.length)}else{token=token.slice(0,-suf.length)+"iqU"}}else if((suf=endsinArr(r2_txt,["atrice","ateur","ation","atrices","ateurs","ations"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,["logie","logies"]))!=""){token=token.slice(0,-suf.length)+"log"}else if((suf=endsinArr(r2_txt,["usion","ution","usions","utions"]))!=""){token=token.slice(0,-suf.length)+"u"}else if((suf=endsinArr(r2_txt,["ence","ences"]))!=""){token=token.slice(0,-suf.length)+"ent"}else if((suf=endsinArr(r1_txt,["issement","issements"]))!=""){if(!isVowel(token[token.length-suf.length-1])){token=token.slice(0,-suf.length);r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}}else if((suf=endsinArr(r2_txt,["ativement","ativements"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,["ivement","ivements"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(token,["eusement","eusements"]))!=""){if((suf=endsinArr(r2_txt,["eusement","eusements"]))!="")token=token.slice(0,-suf.length);else if((suf=endsinArr(r1_txt,["eusement","eusements"]))!="")token=token.slice(0,-suf.length)+"eux";else if((suf=endsinArr(rv_txt,["ement","ements"]))!="")token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,["ablement","ablements","iqUement","iqUements"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(rv_txt,["irement","irements","Irement","Irements"]))!=""){token=token.slice(0,-suf.length)+"i"}else if((suf=endsinArr(rv_txt,["ement","ements"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(token,["icit","icits"]))!=""){if(endsinArr(r2_txt,["icit","icits"])!="")token=token.slice(0,-suf.length);else token=token.slice(0,-suf.length)+"iqU"}else if((suf=endsinArr(token,["abilit","abilits"]))!=""){if(endsinArr(r2_txt,["abilit","abilits"])!="")token=token.slice(0,-suf.length);else token=token.slice(0,-suf.length)+"abl"}else if((suf=endsinArr(r2_txt,["it","its"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(token,["icatif","icative","icatifs","icatives"]))!=""){if((suf=endsinArr(r2_txt,["icatif","icative","icatifs","icatives"]))!=""){token=token.slice(0,-suf.length);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}if((suf=endsinArr(r2_txt,["atif","ative","atifs","atives"]))!=""){token=token.slice(0,-suf.length-2)+"iqU";r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}}else if((suf=endsinArr(r2_txt,["atif","ative","atifs","atives"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,["if","ive","ifs","ives"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(token,["eaux"]))!=""){token=token.slice(0,-suf.length)+"eau"}else if((suf=endsinArr(r1_txt,["aux"]))!=""){token=token.slice(0,-suf.length)+"al"}else if((suf=endsinArr(r2_txt,["euse","euses"]))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r1_txt,["euse","euses"]))!=""){token=token.slice(0,-suf.length)+"eux"}else if((suf=endsinArr(rv_txt,["amment"]))!=""){token=token.slice(0,-suf.length)+"ant";doStep2a=true}else if((suf=endsinArr(rv_txt,["emment"]))!=""){token=token.slice(0,-suf.length)+"ent";doStep2a=true}else if((suf=endsinArr(rv_txt,["ment","ments"]))!=""){letterBefore=token[token.length-suf.length-1];if(isVowel(letterBefore)&&endsin(rv_txt,letterBefore+suf)){token=token.slice(0,-suf.length);doStep2a=true}}r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv);var beforeStep2a=token;var step2aDone=false;if(beforeStep1===token||doStep2a){step2aDone=true;if((suf=endsinArr(rv_txt,["mes","t","tes","i","ie","Ie","ies","ir","ira","irai","iraIent","irais","irait","iras","irent","irez","iriez","irions","irons","iront","is","issaIent","issais","issait","issant","issante","issantes","issants","isse","issent","isses","issez","issiez","issions","issons","it"]))!=""){letterBefore=token[token.length-suf.length-1];if(!isVowel(letterBefore)&&endsin(rv_txt,letterBefore+suf))token=token.slice(0,-suf.length)}}if(step2aDone&&token===beforeStep2a){if((suf=endsinArr(rv_txt,["","e","es","s","rent","er","era","erai","eraIent","erais","erait","eras","erez","eriez","erions","erons","eront","ez","iez","Iez"]))!=""){token=token.slice(0,-suf.length);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}else if((suf=endsinArr(rv_txt,["ions"]))!=""&&endsinArr(r2_txt,["ions"])){token=token.slice(0,-suf.length);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}else if((suf=endsinArr(rv_txt,["mes","t","tes","a","ai","aIent","ais","ait","ant","ante","antes","ants","as","asse","assent","asses","assiez","assions"]))!=""){token=token.slice(0,-suf.length);letterBefore=token[token.length-1];if(letterBefore==="e"&&endsin(rv_txt,"e"+suf))token=token.slice(0,-1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}}if(!(token===beforeStep1)){if(token[token.length-1]==="Y")token=token.slice(0,-1)+"i";if(token[token.length-1]==="")token=token.slice(0,-1)+"c"}else{letterBefore=token[token.length-1];letter2Before=token[token.length-2];if(letterBefore==="s"&&["a","i","o","u","","s"].indexOf(letter2Before)==-1){token=token.slice(0,-1);r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}if((suf=endsinArr(r2_txt,["ion"]))!=""){letterBefore=token[token.length-suf.length-1];if(letterBefore==="s"||letterBefore==="t"){token=token.slice(0,-suf.length);r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}}if((suf=endsinArr(rv_txt,["ier","ire","Ier","Ire"]))!=""){token=token.slice(0,-suf.length)+"i";r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}if((suf=endsinArr(rv_txt,"e"))!=""){token=token.slice(0,-suf.length);r1_txt=token.substring(regs.r1);r2_txt=token.substring(regs.r2);rv_txt=token.substring(regs.rv)}if((suf=endsinArr(rv_txt,""))!=""){if(token.slice(token.length-3,-1)==="gu")token=token.slice(0,-suf.length)}}if((suf=endsinArr(token,["enn","onn","ett","ell","eill"]))!=""){token=token.slice(0,-1)}i=token.length-1;while(i>0){if(!isVowel(token[i])){i--}else if(i!==token.length-1&&(token[i]===""||token[i]==="")){token=token.substring(0,i)+"e"+token.substring(i+1,token.length);break}else{break}}return token.toLowerCase()}function regions(token){var r1,r2,rv,len;var i;r1=r2=rv=len=token.length;for(var i=0;i<len-1&&r1==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r1=i+2}}for(i=r1;i<len-1&&r2==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r2=i+2}}var three=token.slice(0,3);if(isVowel(token[0])&&isVowel(token[1])){rv=3}if(three==="par"||three=="col"||three==="tap")rv=3;else{for(i=1;i<len-1&&rv==len;i++){if(isVowel(token[i])){rv=i+1}}}return{r1:r1,r2:r2,rv:rv}}function prelude(token){token=token.toLowerCase();var result="";var i=0;if(token[i]==="y"&&isVowel(token[i+1])){result+=token[i].toUpperCase()}else{result+=token[i]}for(i=1;i<token.length;i++){if((token[i]==="u"||token[i]==="i")&&isVowel(token[i-1])&&isVowel(token[i+1])){result+=token[i].toUpperCase()}else if(token[i]==="y"&&(isVowel(token[i-1])||isVowel(token[i+1]))){result+=token[i].toUpperCase()}else if(token[i]==="u"&&token[i-1]==="q"){result+=token[i].toUpperCase()}else{result+=token[i]}}return result}function endsinArr(token,suffixes){var i,longest="";for(i=0;i<suffixes.length;i++){if(endsin(token,suffixes[i])&&suffixes[i].length>longest.length)longest=suffixes[i]}return longest}function isVowel(letter){return letter=="a"||letter=="e"||letter=="i"||letter=="o"||letter=="u"||letter=="y"||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""||letter==""}function endsin(token,suffix){if(token.length<suffix.length)return false;return token.slice(-suffix.length)==suffix}},{"./stemmer_fr":74}],68:[function(require,module,exports){var Stemmer=require("./stemmer_it");var PorterStemmer=new Stemmer;module.exports=PorterStemmer;function isVowel(letter){return letter=="a"||letter=="e"||letter=="i"||letter=="o"||letter=="u"||letter==""||letter==""||letter==""||letter==""||letter==""}function getNextVowelPos(token,start){start=start+1;var length=token.length;for(var i=start;i<length;i++){if(isVowel(token[i])){return i}}return length}function getNextConsonantPos(token,start){length=token.length;for(var i=start;i<length;i++)if(!isVowel(token[i]))return i;return length}function endsin(token,suffix){if(token.length<suffix.length)return false;return token.slice(-suffix.length)==suffix}function endsinArr(token,suffixes){for(var i=0;i<suffixes.length;i++){if(endsin(token,suffixes[i]))return suffixes[i]}return""}function replaceAcute(token){var str=token.replace(//gi,"");str=str.replace(//gi,"");str=str.replace(//gi,"");str=str.replace(//gi,"");str=str.replace(//gi,"");return str}function vowelMarking(token){function replacer(match,p1,p2,p3){return p1+p2.toUpperCase()+p3}str=token.replace(/([aeiou])(i|u)([aeiou])/g,replacer);return str}PorterStemmer.stem=function(token){token=token.toLowerCase();token=replaceAcute(token);token=token.replace(/qu/g,"qU");token=vowelMarking(token);if(token.length<3){return token}var r1=r2=rv=len=token.length;for(var i=0;i<token.length-1&&r1==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r1=i+2}}for(var i=r1;i<token.length-1&&r2==len;i++){if(isVowel(token[i])&&!isVowel(token[i+1])){r2=i+2}}if(len>3){if(!isVowel(token[1])){rv=getNextVowelPos(token,1)+1}else if(isVowel(token[0])&&isVowel(token[1])){rv=getNextConsonantPos(token,2)+1}else{rv=3}}var r1_txt=token.substring(r1);var r2_txt=token.substring(r2);var rv_txt=token.substring(rv);var token_orig=token;var pronoun_suf=new Array("glieli","glielo","gliene","gliela","gliele","sene","tene","cela","cele","celi","celo","cene","vela","vele","veli","velo","vene","mela","mele","meli","melo","mene","tela","tele","teli","telo","gli","ci","la","le","li","lo","mi","ne","si","ti","vi");var pronoun_suf_pre1=new Array("ando","endo");var pronoun_suf_pre2=new Array("ar","er","ir");var suf=endsinArr(token,pronoun_suf);if(suf!=""){var pre_suff1=endsinArr(rv_txt.slice(0,-suf.length),pronoun_suf_pre1);var pre_suff2=endsinArr(rv_txt.slice(0,-suf.length),pronoun_suf_pre2);if(pre_suff1!=""){token=token.slice(0,-suf.length)}if(pre_suff2!=""){token=token.slice(0,-suf.length)+"e"}}if(token!=token_orig){r1_txt=token.substring(r1);r2_txt=token.substring(r2);rv_txt=token.substring(rv)}var token_after0=token;if((suf=endsinArr(r2_txt,new Array("ativamente","abilamente","ivamente","osamente","icamente")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("icazione","icazioni","icatore","icatori","azione","azioni","atore","atori")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("logia","logie")))!=""){token=token.slice(0,-suf.length)+"log"}else if((suf=endsinArr(r2_txt,new Array("uzione","uzioni","usione","usioni")))!=""){token=token.slice(0,-suf.length)+"u"}else if((suf=endsinArr(r2_txt,new Array("enza","enze")))!=""){token=token.slice(0,-suf.length)+"ente"}else if((suf=endsinArr(rv_txt,new Array("amento","amenti","imento","imenti")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r1_txt,new Array("amente")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("atrice","atrici","abile","abili","ibile","ibili","mente","ante","anti","anza","anze","iche","ichi","ismo","ismi","ista","iste","isti","ist","ist","ist","ico","ici","ica","ice","oso","osi","osa","ose")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("abilit","icit","ivit","it")))!=""){token=token.slice(0,-suf.length)}else if((suf=endsinArr(r2_txt,new Array("icativa","icativo","icativi","icative","ativa","ativo","ativi","ative","iva","ivo","ivi","ive")))!=""){token=token.slice(0,-suf.length)}if(token!=token_after0){r1_txt=token.substring(r1);r2_txt=token.substring(r2);rv_txt=token.substring(rv)}var token_after1=token;if(token_after0==token_after1){if((suf=endsinArr(rv_txt,new Array("erebbero","irebbero","assero","assimo","eranno","erebbe","eremmo","ereste","eresti","essero","iranno","irebbe","iremmo","ireste","iresti","iscano","iscono","issero","arono","avamo","avano","avate","eremo","erete","erono","evamo","evano","evate","iremo","irete","irono","ivamo","ivano","ivate","ammo","ando","asse","assi","emmo","enda","ende","endi","endo","erai","Yamo","iamo","immo","irai","irei","isca","isce","isci","isco","erei","uti","uto","ita","ite","iti","ito","iva","ivi","ivo","ono","uta","ute","ano","are","ata","ate","ati","ato","ava","avi","avo","er","ere","er","ete","eva","evi","evo","ir","ire","ir","ar","ir")))!=""){token=token.slice(0,-suf.length)}}r1_txt=token.substring(r1);r2_txt=token.substring(r2);rv_txt=token.substring(rv);if((suf=endsinArr(rv_txt,new Array("ia","ie","ii","io","i","i","i","i","a","e","i","o","","","","")))!=""){token=token.slice(0,-suf.length)}r1_txt=token.substring(r1);r2_txt=token.substring(r2);rv_txt=token.substring(rv);if((suf=endsinArr(rv_txt,new Array("ch")))!=""){token=token.slice(0,-suf.length)+"c"}else if((suf=endsinArr(rv_txt,new Array("gh")))!=""){token=token.slice(0,-suf.length)+"g"}r1_txt=token.substring(r1);r2_txt=token.substring(r2);rv_txt=token.substring(rv);return token.toLowerCase()}},{"./stemmer_it":75}],69:[function(require,module,exports){var Stemmer=require("./stemmer_no");function getR1(token){var match=token.match(/[aeiouy]{1}[^aeiouy]([A-Za-z0-9_]+)/);if(match){var preR1Length=match.index+2;if(preR1Length<3&&preR1Length>0){return token.slice(3)}else if(preR1Length>=3){return match[1]}else{return token}}return null}function step1(token){var step1aResult=step1a(token),step1bResult=step1b(token),step1cResult=step1c(token);if(step1aResult.length<step1bResult.length){return step1aResult.length<step1cResult.length?step1aResult:step1cResult}else{return step1bResult.length<step1cResult.length?step1bResult:step1cResult}}function step1a(token){var r1=getR1(token);if(!r1){return token}var r1Match=r1.match(/(a|e|ede|ande|ende|ane|ene|hetene|en|heten|ar|er|heter|as|es|edes|endes|enes|hetenes|ens|hetens|ers|ets|et|het|ast)$/);if(r1Match){return token.replace(new RegExp(r1Match[1]+"$"),"")}return token}function step1b(token){var r1=getR1(token);if(!r1){return token}if(token.match(/(b|c|d|f|g|h|j|l|m|n|o|p|r|t|v|y|z)s$/)){return token.slice(0,-1)}if(token.match(/([^aeiouy]k)s$/)){return token.slice(0,-1)}return token}function step1c(token){var r1=getR1(token);if(!r1){return token}if(r1.match(/(erte|ert)$/)){return token.replace(/(erte|ert)$/,"er")}return token}function step2(token){var r1=getR1(token);if(!r1){return token}if(r1.match(/(d|v)t$/)){return token.slice(0,-1)}return token}function step3(token){var r1=getR1(token);if(!r1)return token;var r1Match=r1.match(/(leg|eleg|ig|eig|lig|elig|els|lov|elov|slov|hetslov)$/);if(r1Match){return token.replace(new RegExp(r1Match[1]+"$"),"")}return token}var PorterStemmer=new Stemmer;module.exports=PorterStemmer;PorterStemmer.stem=function(token){return step3(step2(step1(token.toLowerCase()))).toString()};PorterStemmer.getR1=getR1;PorterStemmer.step1=step1;PorterStemmer.step1a=step1a;PorterStemmer.step1b=step1b;PorterStemmer.step1c=step1c;PorterStemmer.step2=step2;PorterStemmer.step3=step3},{"./stemmer_no":77}],70:[function(require,module,exports){var Stemmer=require("./stemmer_ru");var PorterStemmer=new Stemmer;module.exports=PorterStemmer;function attemptReplacePatterns(token,patterns){var replacement=null;var i=0,isReplaced=false;while(i<patterns.length&&!isReplaced){if(patterns[i][0].test(token)){replacement=token.replace(patterns[i][0],patterns[i][1]);isReplaced=true}i++}return replacement}function perfectiveGerund(token){var result=attemptReplacePatterns(token,[[/[](|)$/g,""],[/(|||||)$/g,""]]);return result}function adjectival(token){var result=adjective(token);if(result!=null){var pariticipleResult=participle(result);result=pariticipleResult?pariticipleResult:result}return result}function adjective(token){var result=attemptReplacePatterns(token,[[/(|||||||||||||||||||||||||)$/g,""]]);return result}function participle(token){var result=attemptReplacePatterns(token,[[/([])(||||)$/g,"$1"],[/(||)$/g,""]]);return result}function reflexive(token){var result=attemptReplacePatterns(token,[[/(|)$/g,""]]);return result}function verb(token){var result=attemptReplacePatterns(token,[[/([])(||||||||||||||||)$/g,"$1"],[/(|||||||||||||||||||||||||||)$/g,""]]);return result}function noun(token){var result=attemptReplacePatterns(token,[[/(|||||||||||||||||||||||||||||||||||)$/g,""]]);return result}function superlative(token){var result=attemptReplacePatterns(token,[[/(|)$/g,""]]);return result}function derivational(token){var result=attemptReplacePatterns(token,[[/(|)$/g,""]]);return result}PorterStemmer.stem=function(token){token=token.toLowerCase().replace(//g,"");var volwesRegexp=/^(.*?[])(.*)$/g;var RV=volwesRegexp.exec(token);if(!RV||RV.length<3){return token}var head=RV[1];RV=RV[2];volwesRegexp.lastIndex=0;var R2=volwesRegexp.exec(RV);var result=perfectiveGerund(RV);if(result===null){var resultReflexive=reflexive(RV)||RV;result=adjectival(resultReflexive);if(result===null){result=verb(resultReflexive);if(result===null){result=noun(resultReflexive);if(result===null){result=resultReflexive}}}}result=result.replace(/$/g,"");var derivationalResult=result;if(R2&&R2[2]){derivationalResult=derivational(R2[2]);if(derivationalResult!=null){derivationalResult=derivational(result)}else{derivationalResult=result}}var superlativeResult=superlative(derivationalResult)||derivationalResult;superlativeResult=superlativeResult.replace(/()/g,"$1");superlativeResult=superlativeResult.replace(/$/g,"");return head+superlativeResult}},{"./stemmer_ru":79}],71:[function(require,module,exports){var stopwords=require("../util/stopwords");var Tokenizer=require("../tokenizers/aggressive_tokenizer");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.addStopWord=function(stopWord){stopwords.words.push(stopWord)};stemmer.addStopWords=function(moreStopWords){stopwords.words=stopwords.words.concat(moreStopWords)};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1)stemmedTokens.push(stemmer.stem(token))});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops);
}}}},{"../tokenizers/aggressive_tokenizer":81,"../util/stopwords":101}],72:[function(require,module,exports){var stopwords=require("../util/stopwords_es");var Tokenizer=require("../tokenizers/aggressive_tokenizer_es");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1){var resultToken=token.toLowerCase();if(resultToken.match(new RegExp("[a-z0-9]+","gi"))){resultToken=stemmer.stem(resultToken)}stemmedTokens.push(resultToken)}});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_es":82,"../util/stopwords_es":102}],73:[function(require,module,exports){var stopwords=require("../util/stopwords_fa");var Tokenizer=require("../tokenizers/aggressive_tokenizer_fa");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1)stemmedTokens.push(stemmer.stem(token))});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_fa":83,"../util/stopwords_fa":103}],74:[function(require,module,exports){var stopwords=require("../util/stopwords_fr");var Tokenizer=require("../tokenizers/aggressive_tokenizer_fr");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1){var resultToken=token.toLowerCase();if(resultToken.match(/[a-z0-9]/gi)){resultToken=stemmer.stem(resultToken)}stemmedTokens.push(resultToken)}});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_fr":84,"../util/stopwords_fr":104}],75:[function(require,module,exports){var stopwords=require("../util/stopwords_it");var Tokenizer=require("../tokenizers/aggressive_tokenizer_it");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1){var resultToken=token.toLowerCase();if(resultToken.match(/[a-z0-9]/gi)){resultToken=stemmer.stem(resultToken)}stemmedTokens.push(resultToken)}});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_it":85,"../util/stopwords_it":105}],76:[function(require,module,exports){var Tokenizer=require("../tokenizers/tokenizer_ja");var stopwords=require("../util/stopwords_ja");var StemmerJa=function(){};StemmerJa.prototype.tokenizeAndStem=function(text,keepStops){var self=this;var stemmedTokens=[];var tokens=(new Tokenizer).tokenize(text);if(keepStops){tokens.forEach(function(token){var resultToken=token.toLowerCase();resultToken=self.stem(resultToken);stemmedTokens.push(resultToken)})}else{tokens.forEach(function(token){if(stopwords.indexOf(token)==-1){var resultToken=token.toLowerCase();resultToken=self.stem(resultToken);stemmedTokens.push(resultToken)}})}return stemmedTokens};StemmerJa.prototype.stem=function(token){token=this.stemKatakana(token);return token};StemmerJa.prototype.stemKatakana=function(token){var HIRAGANA_KATAKANA_PROLONGED_SOUND_MARK="";var DEFAULT_MINIMUM_LENGTH=4;if(token.length>=DEFAULT_MINIMUM_LENGTH&&token.slice(-1)===HIRAGANA_KATAKANA_PROLONGED_SOUND_MARK&&this.isKatakana(token)){token=token.slice(0,token.length-1)}return token};StemmerJa.prototype.isKatakana=function(str){return!!str.match(/^[-]+$/)};StemmerJa.prototype.attach=function(){var self=this;String.prototype.stem=function(){return self.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return self.tokenizeAndStem(this,keepStops)}};module.exports=StemmerJa},{"../tokenizers/tokenizer_ja":93,"../util/stopwords_ja":106}],77:[function(require,module,exports){var stopwords=require("../util/stopwords_no");var Tokenizer=require("../tokenizers/aggressive_tokenizer_no");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.addStopWord=function(stopWord){stopwords.words.push(stopWord)};stemmer.addStopWords=function(moreStopWords){stopwords.words=stopwords.words.concat(moreStopWords)};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token.toLowerCase())==-1)stemmedTokens.push(stemmer.stem(token))});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_no":87,"../util/stopwords_no":107}],78:[function(require,module,exports){var stopwords=require("../util/stopwords_pl");var Tokenizer=require("../tokenizers/aggressive_tokenizer_pl");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1){var resultToken=token.toLowerCase();if(resultToken.match(new RegExp("[a-z0-9]+","gi"))){resultToken=stemmer.stem(resultToken)}stemmedTokens.push(resultToken)}});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_pl":88,"../util/stopwords_pl":108}],79:[function(require,module,exports){var stopwords=require("../util/stopwords_ru");var Tokenizer=require("../tokenizers/aggressive_tokenizer_ru");module.exports=function(){var stemmer=this;stemmer.stem=function(token){return token};stemmer.tokenizeAndStem=function(text,keepStops){var stemmedTokens=[];(new Tokenizer).tokenize(text).forEach(function(token){if(keepStops||stopwords.words.indexOf(token)==-1){var resultToken=token.toLowerCase();if(resultToken.match(new RegExp("[-0-9]+","gi"))){resultToken=stemmer.stem(resultToken)}stemmedTokens.push(resultToken)}});return stemmedTokens};stemmer.attach=function(){String.prototype.stem=function(){return stemmer.stem(this)};String.prototype.tokenizeAndStem=function(keepStops){return stemmer.tokenizeAndStem(this,keepStops)}}}},{"../tokenizers/aggressive_tokenizer_ru":90,"../util/stopwords_ru":109}],80:[function(require,module,exports){(function(Buffer){var _=require("underscore")._,Tokenizer=require("../tokenizers/regexp_tokenizer").WordTokenizer,tokenizer=new Tokenizer,stopwords=require("../util/stopwords").words,fs=require("fs");function buildDocument(text,key){var stopOut;if(typeof text==="string"){text=tokenizer.tokenize(text.toLowerCase());stopOut=true}else if(!_.isArray(text)){stopOut=false;return text}return text.reduce(function(document,term){if(typeof document[term]==="function")document[term]=0;if(!stopOut||stopwords.indexOf(term)<0)document[term]=document[term]?document[term]+1:1;return document},{__key:key})}function tf(term,document){return document[term]?document[term]:0}function documentHasTerm(term,document){return document[term]&&document[term]>0}function TfIdf(deserialized){if(deserialized)this.documents=deserialized.documents;else this.documents=[];this._idfCache={}}function isEncoding(encoding){if(typeof Buffer.isEncoding!=="undefined")return Buffer.isEncoding(encoding);switch((encoding+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true}return false}module.exports=TfIdf;TfIdf.tf=tf;TfIdf.prototype.idf=function(term,force){if(this._idfCache[term]&&this._idfCache.hasOwnProperty(term)&&force!==true)return this._idfCache[term];var docsWithTerm=this.documents.reduce(function(count,document){return count+(documentHasTerm(term,document)?1:0)},0);var idf=1+Math.log(this.documents.length/(1+docsWithTerm));this._idfCache[term]=idf;return idf};TfIdf.prototype.addDocument=function(document,key,restoreCache){this.documents.push(buildDocument(document,key));if(restoreCache===true){for(var term in this._idfCache){this.idf(term,true)}}else{this._idfCache={}}};TfIdf.prototype.addFileSync=function(path,encoding,key,restoreCache){if(!encoding)encoding="utf8";if(!isEncoding(encoding))throw new Error("Invalid encoding: "+encoding);var document=fs.readFileSync(path,encoding);this.documents.push(buildDocument(document,key));if(restoreCache===true){for(var term in this._idfCache){this.idf(term,true)}}else{this._idfCache={}}};TfIdf.prototype.tfidf=function(terms,d){var _this=this;if(!_.isArray(terms))terms=tokenizer.tokenize(terms.toString().toLowerCase());return terms.reduce(function(value,term){var idf=_this.idf(term);idf=idf===Infinity?0:idf;return value+tf(term,_this.documents[d])*idf},0)};TfIdf.prototype.listTerms=function(d){var terms=[];for(var term in this.documents[d]){if(term!="__key")terms.push({term:term,tfidf:this.tfidf(term,d)})}return terms.sort(function(x,y){return y.tfidf-x.tfidf})};TfIdf.prototype.tfidfs=function(terms,callback){var tfidfs=new Array(this.documents.length);for(var i=0;i<this.documents.length;i++){tfidfs[i]=this.tfidf(terms,i);if(callback)callback(i,tfidfs[i],this.documents[i].__key)}return tfidfs};TfIdf.prototype.setTokenizer=function(t){if(!_.isFunction(t.tokenize))throw new Error("Expected a valid Tokenizer");tokenizer=t}}).call(this,require("buffer").Buffer)},{"../tokenizers/regexp_tokenizer":91,"../util/stopwords":101,buffer:3,fs:1,underscore:128}],81:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){return this.trim(text.split(/\W+/))}},{"./tokenizer":92,util:13}],82:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){return this.trim(text.split(/[^a-zA-Z--]+/))}},{"./tokenizer":92,util:13}],83:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.clearEmptyString=function(array){return array.filter(function(a){return a!=""})};AggressiveTokenizer.prototype.clearText=function(text){return text.replace(new RegExp(".:+-=()\"'!?,;","g")," ")};AggressiveTokenizer.prototype.tokenize=function(text){text=this.clearText(text);return this.clearEmptyString(text.split(/\s+/))}},{"./tokenizer":92,util:13}],84:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){return this.trim(text.split(/[^a-z0-9]+/i))}},{"./tokenizer":92,util:13}],85:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){return this.trim(text.split(/\W+/))}},{"./tokenizer":92,util:13}],86:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){return this.trim(text.split(/[^a-zA-Z0-9_']+/))}},{"./tokenizer":92,util:13}],87:[function(require,module,exports){var Tokenizer=require("./tokenizer"),normalizer=require("../normalizers/normalizer_no"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.tokenize=function(text){text=normalizer.remove_diacritics(text);return this.trim(text.split(/[^A-Za-z0-9_]+/))}},{"../normalizers/normalizer_no":55,"./tokenizer":92,util:13}],88:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.withoutEmpty=function(array){return array.filter(function(a){return a})};AggressiveTokenizer.prototype.clearText=function(text){return text.replace(/[^a-z0-9]/gi," ").replace(/[\s\n]+/g," ").trim()};AggressiveTokenizer.prototype.tokenize=function(text){return this.withoutEmpty(this.clearText(text).split(" "))}},{"./tokenizer":92,util:13}],89:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.withoutEmpty=function(array){return array.filter(function(a){return a})};AggressiveTokenizer.prototype.tokenize=function(text){return this.withoutEmpty(this.trim(text.split(/[^a-zA-Z--]/)))}},{"./tokenizer":92,util:13}],90:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util");var AggressiveTokenizer=function(){Tokenizer.call(this)};util.inherits(AggressiveTokenizer,Tokenizer);module.exports=AggressiveTokenizer;AggressiveTokenizer.prototype.withoutEmpty=function(array){return array.filter(function(a){return a})};AggressiveTokenizer.prototype.clearText=function(text){return text.replace(/[^a-z-0-9]/gi," ").replace(/[\s\n]+/g," ").trim()};AggressiveTokenizer.prototype.tokenize=function(text){return this.withoutEmpty(this.clearText(text).split(" "))}},{"./tokenizer":92,util:13}],91:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util"),_=require("underscore")._;var RegexpTokenizer=function(options){var options=options||{};this._pattern=options.pattern||this._pattern;this.discardEmpty=options.discardEmpty||true;this._gaps=options.gaps;if(this._gaps===undefined){this._gaps=true}};util.inherits(RegexpTokenizer,Tokenizer);RegexpTokenizer.prototype.tokenize=function(s){var results;if(this._gaps){results=s.split(this._pattern);return this.discardEmpty?_.without(results,""," "):results}else{return s.match(this._pattern)}};exports.RegexpTokenizer=RegexpTokenizer;var WordTokenizer=function(options){this._pattern=/\W+/;RegexpTokenizer.call(this,options)};util.inherits(WordTokenizer,RegexpTokenizer);exports.WordTokenizer=WordTokenizer;var WordPunctTokenizer=function(options){this._pattern=new RegExp(/(\w+|\!|\'|\"")/i);RegexpTokenizer.call(this,options)};util.inherits(WordPunctTokenizer,RegexpTokenizer);exports.WordPunctTokenizer=WordPunctTokenizer},{"./tokenizer":92,underscore:128,util:13}],92:[function(require,module,exports){var Tokenizer=function(){};Tokenizer.prototype.trim=function(array){while(array[array.length-1]=="")array.pop();while(array[0]=="")array.shift();return array};Tokenizer.prototype.attach=function(){var self=this;String.prototype.tokenize=function(){return self.tokenize(this)}};Tokenizer.prototype.tokenize=function(){};module.exports=Tokenizer},{}],93:[function(require,module,exports){var Tokenizer=require("./tokenizer"),normalize=require("../normalizers/normalizer_ja").normalize_ja,util=require("util");var TokenizerJa=function(){this.chartype_=[[/[]/,"M"],[/[-]/,"H"],[/[-]/,"I"],[/[-]/,"K"],[/[a-zA-Z]/,"A"],[/[0-9]/,"N"]];this.BIAS__=-332;this.BC1__={HH:6,II:2461,KH:406,OH:-1378};this.BC2__={AA:-3267,AI:2744,AN:-878,HH:-4070,HM:-1711,HN:4012,HO:3761,IA:1327,IH:-1184,II:-1332,IK:1721,IO:5492,KI:3831,KK:-8741,MH:-3132,MK:3334,OO:-2920};this.BC3__={HH:996,HI:626,HK:-721,HN:-1307,HO:-836,IH:-301,KK:2762,MK:1079,MM:4034,OA:-1652,OH:266};this.BP1__={BB:295,OB:304,OO:-125,UB:352};this.BP2__={BO:60,OO:-1762};this.BQ1__={BHH:1150,BHM:1521,BII:-1158,BIM:886,BMH:1208,BNH:449,BOH:-91,BOO:-2597,OHI:451,OIH:-296,OKA:1851,OKH:-1020,OKK:904,OOO:2965};this.BQ2__={BHH:118,BHI:-1159,BHM:466,BIH:-919,BKK:-1720,BKO:864,OHH:-1139,OHM:-181,OIH:153,UHI:-1146};this.BQ3__={BHH:-792,BHI:2664,BII:-299,BKI:419,BMH:937,BMM:8335,BNN:998,BOH:775,OHH:2174,OHM:439,OII:280,OKH:1798,OKI:-793,OKO:-2242,OMH:-2402,OOO:11699};this.BQ4__={BHH:-3895,BIH:3761,BII:-4654,BIK:1348,BKK:-1806,BMI:-3385,BOO:-12396,OAH:926,OHH:266,OHK:-2036,ONN:-973};this.BW1__={"":660,"":727,"B1":1404,"B1":542,"":660,"":727,"":1682,"":1505,"":1743,"":-2055,"":672,"":-4817,"":665,"":3472,"":600,"":-790,"":2083,"":-1262,"":-4143,"":4573,"":2641,"":1104,"":-3399,"":1977,"":-871,"":1122,"":601,"":3463,"":-802,"":805,"":1249,"":1127,"":3445,"":844,"":-4915,"":1922,"":3887,"":5713,"":3015,"":7379,"":-1113,"":2468,"":1498,"":1671,"":-912,"":-501,"":741,"":2448,"":1711,"":2600,"":-2155,"":-1947,"":-2565,"":2369,"":-913,"":1860,"":731,"":-1886,"":2558,"":-2784,"":-2604,"":1497,"":-2314,"":-1336,"":-195,"":-2423,"":-2113,"":-724};this.BW2__={11:-669,"":-11822,"":-5730,"":-13175,"":-1609,"":2490,"":-1350,"":-602,"":-7194,"":4612,"":853,"":-3198,"":1941,"":-1597,"":-8392,"":-4193,"":4533,"":13168,"":-3977,"":-1819,"":-545,"":5078,"":972,"":939,"":-3744,"":-1253,"":-662,"":-3857,"":-786,"":1224,"":-939,"":4589,"":1647,"":-2094,"":6144,"":3640,"":2551,"":-3110,"":-3065,"":2666,"":-1528,"":-3828,"":-4761,"":-4203,"":1890,"":-1746,"":-2279,"":720,"":5168,"":-3941,"":-2488,"":-1313,"":-6509,"":2614,"":3099,"":-1615,"":2748,"":2454,"":-7236,"":-14943,"":-4688,"":-11388,"":2093,"":-7059,"":-6041,"":-6125,"":1073,"":-1033,"":-2532,"":1813,"":-1316,"":-6621,"":5409,"":-3153,"":2230,"":-10713,"":-944,"":-1611,"":-1897,"":651,"":1620,"":4270,"":849,"":4114,"":6067,"":7901,"":-11877,"":728,"":-4115,"":602,"":-1375,"":970,"":-1051,"":-4479,"":-1116,"":2163,"":-7758,"":970,"":-913,"":-2471,"":-1250,"":-1050,"":-8669,"":-1626,"":-2363,"":-1982,"":-4066,"":-722,"":-7068,"":3372,"":-601,"":-2355,"":-2697,"":-1543,"":-1384,"":-1276,"":-990,"":-1612,"":-4268};this.BW3__={"":-2194,"":719,"":3846,"":-1185,"":-1185,"":5308,"":2079,"":3029,"":2056,"":1883,"":5600,"":1527,"":1117,"":4798,"":1454,"":2857,"":2857,"":-743,"":-4098,"":-669,"":6520,"":-2670,"":1816,"":1816,"":-4855,"":-1127,"":-913,"":-4977,"":-2064,"":1645,"":1374,"":7397,"":1542,"":-2757,"":-714,"":976,"":1557,"":1557,"":-3714,"":3562,"":1449,"":2608,"":1200,"":-1310,"":-1310,"":6521,"":3426,"":3426,"":841,"":428,"":8875,"":8875,"":-594,"":812,"":-1183,"":-853,"":4098,"":4098,"":1004,"":-4748,"":300,"":6240,"":855,"":302,"":1437,"":-1482,"":2295,"":-1387,"":2266,"":541,"":-3543,"":4664,"":1796,"":-903,"":2135,"":-1021,"":-1021,"":1771,"":1906,"":2644,"":-724,"":-724,"":-1e3,"":1337,"":1337,"":2181,"":1113,"":6943,"":-1549,"":6154,"":-793,"":1479,"":6820,"":3818,"":854,"":854,"":1850,"":1375,"":-3246,"":1091,"":-605,"":606,"":798,"":990,"":860,"":1232,"":2217,"":1681,"":965,"":-5055,"":974,"":974,"":2024};this.TC1__={AAA:1093,HHH:1029,HHM:580,HII:998,HOH:-390,HOM:-331,IHI:1169,IOH:-142,IOI:-1015,IOM:467,MMH:187,OOI:-1832};this.TC2__={HHO:2088,HII:-1023,HMM:-1154,IHI:-1965,KKH:703,OII:-2649};this.TC3__={AAA:-294,HHH:346,HHI:-341,HII:-1088,HIK:731,HOH:-1486,IHH:128,IHI:-3041,IHO:-1935,IIH:-825,IIM:-1035,IOI:-542,KHH:-1216,KKA:491,KKH:-1217,KOK:-1009,MHH:-2694,MHM:-457,MHO:123,MMH:-471,NNH:-1689,NNO:662,OHO:-3393};this.TC4__={HHH:-203,HHI:1344,HHK:365,HHM:-122,HHN:182,HHO:669,HIH:804,HII:679,HOH:446,IHH:695,IHO:-2324,IIH:321,III:1497,IIO:656,IOO:54,KAK:4845,KKA:3386,KKK:3065,MHH:-405,MHI:201,MMH:-241,MMM:661,MOM:841};this.TQ1__={BHHH:-227,BHHI:316,BHIH:-132,BIHH:60,BIII:1595,BNHH:-744,BOHH:225,BOOO:-908,OAKK:482,OHHH:281,OHIH:249,OIHI:200,OIIH:-68};this.TQ2__={BIHH:-1401,BIII:-1033,BKAK:-543,BOOO:-5591};this.TQ3__={BHHH:478,BHHM:-1073,BHIH:222,BHII:-504,BIIH:-116,BIII:-105,BMHI:-863,BMHM:-464,BOMH:620,OHHH:346,OHHI:1729,OHII:997,OHMH:481,OIHH:623,OIIH:1344,OKAK:2792,OKHH:587,OKKA:679,OOHH:110,OOII:-685};this.TQ4__={BHHH:-721,BHHM:-3604,BHII:-966,BIIH:-607,BIII:-2181,OAAA:-2763,OAKK:180,OHHH:-294,OHHI:2446,OHHO:480,OHIH:-1573,OIHH:1935,OIHI:-493,OIIH:626,OIII:-4007,OKAK:-8156};this.TW1__={"":-4681,"":2026};this.TW2__={"":-2049,"":-1256,"":-2434,"":3873,"":-4430,"":-1049,"":1833,"":-4657,"":-4517,"":1882,"":-792,"":-1512,"":-8097,"":-1255,"":-2721,"":-3216};this.TW3__={"":-1734,"":1314,"":-4314,"":-5483,"":-5989,"":-6247,"":-727,"":-727,"":-600,"":-3752,"":-2287};this.TW4__={"":8576,"":8576,"":-2348,"":2958,"":1516,"":1516,"":1538,"":1349,"":5543,"":1097,"":-4258,"":5865};this.UC1__={A:484,K:93,M:645,O:-505};this.UC2__={A:819,H:1059,I:409,M:3987,N:5775,O:646};this.UC3__={A:-1370,I:2311};this.UC4__={A:-2643,H:1809,I:-1032,K:-3450,M:3565,N:3876,O:6646};this.UC5__={H:313,I:-1238,K:-799,M:539,O:-831};this.UC6__={H:-506,I:-253,K:87,M:247,O:-387};this.UP1__={O:-214};this.UP2__={B:69,O:935};this.UP3__={B:189};this.UQ1__={BH:21,BI:-12,BK:-99,BN:142,BO:-56,OH:-95,OI:477,OK:410,OO:-2422};this.UQ2__={BH:216,BI:113,OK:1759};this.UQ3__={BA:-479,BH:42,BI:1913,BK:-7198,BM:3160,BN:6427,BO:14761,OI:-827,ON:-3212};this.UW1__={"":156,"":156,"":-463,"":-941,"":-127,"":-553,"":121,"":505,"":-201,"":-547,"":-123,"":-789,"":-185,"":-847,"":-466,"":-470,"":182,"":-292,"":208,"":169,"":-446,"":-137,"":-135,"":-402,"":-268,"":-912,"":871,"":-460,"":561,"":729,"":-411,"":-141,"":361,"":-408,"":-386,"":-718};this.UW2__={"":-829,"":-829,"":892,"":-645,"":3145,"":-538,"":505,"":134,"":-502,"":1454,"":-856,"":-412,"":1141,"":878,"":540,"":1529,"":-675,"":300,"":-1011,"":188,"":1837,"":-949,"":-291,"":-268,"":-981,"":1273,"":1063,"":-1764,"":130,"":-409,"":-1273,"":1261,"":600,"":-1263,"":-402,"":1639,"":-579,"":-694,"":571,"":-2516,"":2095,"":-587,"":306,"":568,"":831,"":-758,"":-2150,"":-302,"":-968,"":-861,"":492,"":-123,"":978,"":362,"":548,"":-3025,"":-1566,"":-3414,"":-422,"":-1769,"":-865,"":-483,"":-1519,"":760,"":1023,"":-2009,"":-813,"":-1060,"":1067,"":-1519,"":-1033,"":1522,"":-1355,"":-1682,"":-1815,"":-1462,"":-630,"":-1843,"":-1650,"":-931,"":-665,"":-2378,"":-180,"":-1740,"":752,"":529,"":-1584,"":-242,"":-1165,"":-763,"":810,"":509,"":-1353,"":838,"":-744,"":-3874,"":1010,"":1198,"":3041,"":1758,"":-1257};this.UW3__={1:-800,"":4889,"":-1723,"":4889,"":-2311,"":5827,"":2670,"":-3573,"":-2696,"":1006,"":2342,"":1983,"":-4864,"":-1163,"":3271,"":1004,"":388,"":401,"":-3552,"":-3116,"":-1058,"":-395,"":584,"":3685,"":-5228,"":842,"":-521,"":-1444,"":-1081,"":6167,"":2318,"":1691,"":-899,"":-2788,"":2745,"":4056,"":4555,"":-2171,"":-1798,"":1199,"":-5516,"":-4384,"":-120,"":1205,"":2323,"":-788,"":-202,"":727,"":649,"":5905,"":2773,"":-1207,"":6620,"":-518,"":551,"":1319,"":874,"":-1350,"":521,"":1109,"":1591,"":2201,"":278,"":-3794,"":-1619,"":-1759,"":-2087,"":3815,"":653,"":-758,"":-1193,"":974,"":2742,"":792,"":1889,"":-1368,"":811,"":4265,"":-361,"":-2439,"":4858,"":3593,"":1574,"":-3030,"":755,"":-1880,"":5807,"":3095,"":457,"":2475,"":1129,"":2286,"":4437,"":365,"":-949,"":-1872,"":1327,"":-1038,"":4646,"":-2309,"":-783,"":-1006,"":483,"":1233,"":3588,"":-241,"":3906,"":-837,"":4513,"":642,"":1389,"":1219,"":-241,"":2016,"":-1356,"":-423,"":-1008,"":1078,"":-513,"":-3102,"":1155,"":3197,"":-1804,"":2416,"":-1030,"":1605,"":1452,"":-2352,"":-3885,"":1905,"":-1291,"":1822,"":-488,"":-3973,"":-2013,"":-1479,"":3222,"":-1489,"":1764,"":2099,"":5792,"":-661,"":-1248,"":-951,"":-937,"":4125,"":360,"":3094,"":364,"":-805,"":5156,"":2438,"":484,"":2613,"":-1694,"":-1073,"":1868,"":-495,"":979,"":461,"":-3850,"":-273,"":914,"":1215,"":7313,"":-1835,"":792,"":6293,"":-1528,"":4231,"":401,"":-960,"":1201,"":7767,"":3066,"":3663,"":1384,"":-4229,"":1163,"":1255,"":6457,"":725,"":-2869,"":785,"":1044,"":-562,"":-733,"":1777,"":1835,"":1375,"":-1504,"":-1136,"":-681,"":1026,"":4404,"":1200,"":2163,"":421,"":-1432,"":1302,"":-1282,"":2009,"":-1045,"":2066,"":1620};this.UW4__={"":3930,"":3508,"":-4841,"":3930,"":3508,"":4999,"":1895,"":3798,"":-5156,"":4752,"":-3435,"":-640,"":-2514,"":2405,"":530,"":6006,"":-4482,"":-3821,"":-3788,"":-4376,"":-4734,"":2255,"":1979,"":2864,"":-843,"":-2506,"":-731,"":1251,"":181,"":4091,"":5034,"":5408,"":-3654,"":-5882,"":-1659,"":3994,"":7410,"":4547,"":5433,"":6499,"":1853,"":1413,"":7396,"":8578,"":1940,"":4249,"":-4134,"":1345,"":6665,"":-744,"":1464,"":1051,"":-2082,"":-882,"":-5046,"":4169,"":-2666,"":2795,"":-1544,"":3351,"":-2922,"":-9726,"":-14896,"":-2613,"":-4570,"":-1783,"":13150,"":-2352,"":2145,"":1789,"":1287,"":-724,"":-403,"":-1635,"":-881,"":-541,"":-856,"":-3637,"":-4371,"":-11870,"":-2069,"":2210,"":782,"":-190,"":-1768,"":1036,"":544,"":950,"":-1286,"":530,"":4292,"":601,"":-2006,"":-1212,"":584,"":788,"":1347,"":1623,"":3879,"":-302,"":-740,"":-2715,"":776,"":4517,"":1013,"":1555,"":-1834,"":-681,"":-910,"":-851,"":1500,"":-619,"":-1200,"":866,"":-1410,"":-2094,"":-1413,"":1067,"":571,"":-4802,"":-1397,"":-1057,"":-809,"":1910,"":-1328,"":-1500,"":-2056,"":-2667,"":2771,"":374,"":-4556,"":456,"":553,"":916,"":-1566,"":856,"":787,"":2182,"":704,"":522,"":-856,"":1798,"":1829,"":845,"":-9066,"":-485,"":-442,"":-360,"":-1043,"":5388,"":-2716,"":-910,"":-939,"":-543,"":-735,"":672,"":-1267,"":-1286,"":-1101,"":-2900,"":1826,"":2586,"":922,"":-3485,"":2997,"":-867,"":-2112,"":788,"":2937,"":786,"":2171,"":1146,"":-1169,"":940,"":-994,"":749,"":2145,"":-730,"":-852,"":-792,"":792,"":-1184,"":-244,"":-1e3,"":730,"":-1481,"":1158,"":-1433,"":-3370,"":929,"":-1291,"":2596,"":-4866,"":1192,"":-1100,"":-2213,"":357,"":-2344,"":-2297,"":-2604,"":-878,"":-1659,"":-792,"":-1984,"":1749,"":2120};this.UW5__={1:-514,"":465,"":-299,E2:-32768,"":-2762,"":465,"":-299,"":363,"":1655,"":331,"":-503,"":1199,"":527,"":647,"":-421,"":1624,"":1971,"":312,"":-983,"":-1537,"":-1371,"":-852,"":-1186,"":1093,"":52,"":921,"":-18,"":-850,"":-127,"":1682,"":-787,"":-1224,"":-635,"":-578,"":1001,"":502,"":865,"":3350,"":854,"":-208,"":429,"":504,"":419,"":-1264,"":327,"":241,"":451,"":-343,"":-871,"":722,"":-1153,"":-654,"":3519,"":-901,"":848,"":2104,"":-1296,"":-548,"":1785,"":-1304,"":-2991,"":921,"":1763,"":872,"":-814,"":1618,"":-1682,"":218,"":-4353,"":932,"":1356,"":-1508,"":-1347,"":240,"":-3912,"":-3149,"":1319,"":-1052,"":-4003,"":-997,"":-278,"":-813,"":1955,"":-2233,"":663,"":-1073,"":1219,"":-1018,"":-368,"":786,"":1191,"":2368,"":-689};this.UW6__={1:-270,"":227,"":808,E1:306,"":227,"":808,"":-307,"":189,"":241,"":-73,"":-121,"":-200,"":1782,"":383,"":-428,"":573,"":-1014,"":101,"":-105,"":-253,"":-149,"":-417,"":-236,"":-206,"":187,"":-135,"":195,"":-673,"":-496,"":-277,"":201,"":-800,"":624,"":302,"":1792,"":-1212,"":798,"":-960,"":887,"":-695,"":535,"":-697,"":753,"":-507,"":974,"":-822,"":1811,"":463,"":1082};return this};util.inherits(TokenizerJa,Tokenizer);TokenizerJa.prototype.ctype_=function(str){for(var i=0,length=this.chartype_.length;i<length;i++){if(str.match(this.chartype_[i][0])){return this.chartype_[i][1]}}return"O"};TokenizerJa.prototype.ts_=function(v){if(v){return v}return 0};TokenizerJa.prototype.removePuncTokens=function(tokens){return tokens.map(function(token){return token.replace(/[_\-,;:!?.()[\]{}@*\/&#%`^+<=>|~$"\s]+/g,"")}).filter(function(token){return token!=""})};TokenizerJa.prototype.tokenize=function(text){if(text==null||text==undefined||text==""){return[]}text=normalize(text);var result=[];var seg=["B3","B2","B1"];var ctype=["O","O","O"];var o=text.split("");var i;var length;for(i=0,length=o.length;i<length;++i){seg.push(o[i]);ctype.push(this.ctype_(o[i]))}seg.push("E1");seg.push("E2");seg.push("E3");ctype.push("O");ctype.push("O");ctype.push("O");var word=seg[3];var p1="U";var p2="U";var p3="U";for(i=4,length=seg.length-3;i<length;++i){var score=this.BIAS__;var w1=seg[i-3];var w2=seg[i-2];var w3=seg[i-1];var w4=seg[i];var w5=seg[i+1];var w6=seg[i+2];var c1=ctype[i-3];var c2=ctype[i-2];var c3=ctype[i-1];var c4=ctype[i];var c5=ctype[i+1];var c6=ctype[i+2];score+=this.ts_(this.UP1__[p1]);score+=this.ts_(this.UP2__[p2]);score+=this.ts_(this.UP3__[p3]);score+=this.ts_(this.BP1__[p1+p2]);score+=this.ts_(this.BP2__[p2+p3]);score+=this.ts_(this.UW1__[w1]);score+=this.ts_(this.UW2__[w2]);score+=this.ts_(this.UW3__[w3]);score+=this.ts_(this.UW4__[w4]);score+=this.ts_(this.UW5__[w5]);score+=this.ts_(this.UW6__[w6]);score+=this.ts_(this.BW1__[w2+w3]);score+=this.ts_(this.BW2__[w3+w4]);score+=this.ts_(this.BW3__[w4+w5]);score+=this.ts_(this.TW1__[w1+w2+w3]);score+=this.ts_(this.TW2__[w2+w3+w4]);score+=this.ts_(this.TW3__[w3+w4+w5]);score+=this.ts_(this.TW4__[w4+w5+w6]);score+=this.ts_(this.UC1__[c1]);score+=this.ts_(this.UC2__[c2]);score+=this.ts_(this.UC3__[c3]);score+=this.ts_(this.UC4__[c4]);score+=this.ts_(this.UC5__[c5]);score+=this.ts_(this.UC6__[c6]);score+=this.ts_(this.BC1__[c2+c3]);score+=this.ts_(this.BC2__[c3+c4]);score+=this.ts_(this.BC3__[c4+c5]);score+=this.ts_(this.TC1__[c1+c2+c3]);score+=this.ts_(this.TC2__[c2+c3+c4]);score+=this.ts_(this.TC3__[c3+c4+c5]);score+=this.ts_(this.TC4__[c4+c5+c6]);score+=this.ts_(this.UQ1__[p1+c1]);score+=this.ts_(this.UQ2__[p2+c2]);score+=this.ts_(this.UQ3__[p3+c3]);score+=this.ts_(this.BQ1__[p2+c2+c3]);score+=this.ts_(this.BQ2__[p2+c3+c4]);score+=this.ts_(this.BQ3__[p3+c2+c3]);
score+=this.ts_(this.BQ4__[p3+c3+c4]);score+=this.ts_(this.TQ1__[p2+c1+c2+c3]);score+=this.ts_(this.TQ2__[p2+c2+c3+c4]);score+=this.ts_(this.TQ3__[p3+c1+c2+c3]);score+=this.ts_(this.TQ4__[p3+c2+c3+c4]);var p="O";if(score>0){result.push(word);word="";p="B"}p1=p2;p2=p3;p3=p;word+=seg[i]}result.push(word);result=this.removePuncTokens(result);return result};module.exports=TokenizerJa},{"../normalizers/normalizer_ja":54,"./tokenizer":92,util:13}],94:[function(require,module,exports){var Tokenizer=require("./tokenizer"),util=require("util"),_=require("underscore")._;var contractions2=[/(.)('ll|'re|'ve|n't|'s|'m|'d)\b/gi,/\b(can)(not)\b/gi,/\b(D)('ye)\b/gi,/\b(Gim)(me)\b/gi,/\b(Gon)(na)\b/gi,/\b(Got)(ta)\b/gi,/\b(Lem)(me)\b/gi,/\b(Mor)('n)\b/gi,/\b(T)(is)\b/gi,/\b(T)(was)\b/gi,/\b(Wan)(na)\b/gi];var contractions3=[/\b(Whad)(dd)(ya)\b/gi,/\b(Wha)(t)(cha)\b/gi];var TreebankWordTokenizer=function(){};util.inherits(TreebankWordTokenizer,Tokenizer);TreebankWordTokenizer.prototype.tokenize=function(text){contractions2.forEach(function(regexp){text=text.replace(regexp,"$1 $2")});contractions3.forEach(function(regexp){text=text.replace(regexp,"$1 $2 $3")});text=text.replace(/([^\w\.\'\-\/\+\<\>,&])/g," $1 ");text=text.replace(/(,\s)/g," $1");text=text.replace(/('\s)/g," $1");text=text.replace(/\. *(\n|$)/g," . ");return _.without(text.split(/\s+/),"")};module.exports=TreebankWordTokenizer},{"./tokenizer":92,underscore:128,util:13}],95:[function(require,module,exports){var replacer=require("../../util/utils").replacer;var transliterationTable1={"":"wa","":"wi","":"we","":"wo","":"","":"va","":"vi","":"ve","":"vo","":"vyu","":"wa","":"wi","":"we","":"wo","":"","":"va","":"vi","":"ve","":"vo","":"vyu"};var transliterationTable2={"":"ye","":"a","":"i","":"","":"u","":"e","":"","":"o","":"kwa","":"kwi","":"kwe","":"kwo","":"ka","":"ky","":"ky","":"kya","":"kyo","":"kyu","":"ki","":"ku","":"ke","":"k","":"ko","":"she","":"si","":"sa","":"sh","":"sh","":"sha","":"sho","":"shu","":"shi","":"s","":"su","":"se","":"s","":"so","":"che","":"tsa","":"tsi","":"tse","":"tso","":"ti","":"di","":"tyu","":"dyu","":"twi","":"tu","":"dwi","":"du","":"ta","":"ch","":"ch","":"cha","":"cho","":"chu","":"chi","":"ts","":"tsu","":"te","":"t","":"to","":"na","":"ny","":"ny","":"nya","":"nyo","":"nyu","":"ni","":"n","":"nu","":"ne","":"n","":"no","":"fa","":"fi","":"fe","":"fo","":"fyu","":"hwe","":"ha","":"hy","":"hy","":"hya","":"hyo","":"hyu","":"hi","":"f","":"fu","":"he","":"h","":"ho","":"ma","":"my","":"my","":"mya","":"myo","":"myu","":"mi","":"m","":"mu","":"me","":"m","":"mo","":"ya","":"y","":"yu","":"y","":"yo","":"rye","":"ra","":"ry","":"ry","":"rya","":"ryo","":"ryu","":"ri","":"r","":"ru","":"re","":"r","":"ro","":"wa","":"i","":"e","":"o","":"n","":"gwa","":"gwi","":"gwe","":"gwo","":"ga","":"gy","":"gy","":"gya","":"gyo","":"gyu","":"gi","":"g","":"gu","":"ge","":"g","":"go","":"je","":"zi","":"za","":"j","":"j","":"ja","":"jo","":"ju","":"ji","":"z","":"zu","":"ze","":"z","":"zo","":"da","":"ji","":"z","":"zu","":"de","":"d","":"do","":"byu","":"ba","":"by","":"by","":"bya","":"byo","":"byu","":"bi","":"b","":"bu","":"be","":"b","":"bo","":"pa","":"py","":"py","":"pya","":"pyo","":"pyu","":"pi","":"p","":"pu","":"pe","":"p","":"po","":"v","":" ","":"ye","":"a","":"i","":"","":"u","":"e","":"","":"o","":"kwa","":"kwi","":"kwe","":"kwo","":"ka","":"ky","":"ky","":"kya","":"kyo","":"kyu","":"ki","":"k","":"ku","":"ke","":"k","":"ko","":"she","":"si","":"sa","":"sh","":"sh","":"sha","":"sho","":"shu","":"shi","":"s","":"su","":"se","":"s","":"so","":"che","":"tsa","":"tsi","":"tse","":"tso","":"ti","":"di","":"tyu","":"dyu","":"twi","":"tu","":"dwi","":"du","":"ta","":"ch","":"ch","":"cha","":"cho","":"chu","":"chi","":"ts","":"tsu","":"te","":"t","":"to","":"na","":"ny","":"ny","":"nya","":"nyo","":"nyu","":"ni","":"n","":"nu","":"ne","":"n","":"no","":"fa","":"fi","":"fe","":"fo","":"fyu","":"hwe","":"ha","":"hy","":"hy","":"hya","":"hyo","":"hyu","":"hi","":"f","":"fu","":"he","":"h","":"ho","":"ma","":"my","":"my","":"mya","":"myo","":"myu","":"mi","":"m","":"mu","":"me","":"m","":"mo","":"ya","":"y","":"yu","":"y","":"yo","":"rye","":"ra","":"ry","":"ry","":"rya","":"ryo","":"ryu","":"ri","":"r","":"ru","":"re","":"r","":"ro","":"wa","":"i","":"e","":"o","":"n","":"gwa","":"gwi","":"gwe","":"gwo","":"ga","":"gy","":"gy","":"gya","":"gyo","":"gyu","":"gi","":"g","":"gu","":"ge","":"g","":"go","":"je","":"zi","":"za","":"j","":"j","":"ja","":"jo","":"ju","":"ji","":"z","":"zu","":"ze","":"z","":"zo","":"da","":"ji","":"z","":"zu","":"de","":"d","":"do","":"byu","":"ba","":"by","":"by","":"bya","":"byo","":"byu","":"bi","":"b","":"bu","":"be","":"b","":"bo","":"pa","":"py","":"py","":"pya","":"pyo","":"pyu","":"pi","":"p","":"pu","":"pe","":"p","":"po","":"v"};var transliterationTable3={"a":"","a":"","i":"","i":"","i":"","i":"","a":"","i":"","u":"","e":"","o":"","":"a","":"i","":"u","":"e","":"o","":"a","":"i","":"u","":"e","":"o"};var replace1=replacer(transliterationTable1);var replace2=replacer(transliterationTable2);var replace3=replacer(transliterationTable3);module.exports=function(str){str=replace1(str);str=str.replace(/(?=[])/g,"n").replace(/(?=[])/g,"n").replace(/(?=[])/g,"m").replace(/(?=[])/g,"m").replace(/(?=[])/g,"n'").replace(/(?=[])/g,"n'");str=str.replace(/(?=[])/g,"k").replace(/(?=[])/g,"k").replace(/(?=[])/g,"g").replace(/(?=[])/g,"g").replace(/(?=[])/g,"s").replace(/(?=[])/g,"s").replace(/(?=[])/g,"z").replace(/(?=[])/g,"z").replace(/(?=[])/g,"j").replace(/(?=[])/g,"j").replace(/(?=[])/g,"t").replace(/(?=[])/g,"t").replace(/(?=[])/g,"t").replace(/(?=[])/g,"t").replace(/(?=[])/g,"h").replace(/(?=[])/g,"h").replace(/(?=[])/g,"f").replace(/(?=[])/g,"f").replace(/(?=[])/g,"b").replace(/(?=[])/g,"b").replace(/(?=[])/g,"p").replace(/(?=[])/g,"p").replace(/(?=[])/g,"r").replace(/(?=[])/g,"r");str=replace2(str);str=replace3(str);str=str.replace(/(|)\B/g,"t");return str}},{"../../util/utils":111}],96:[function(require,module,exports){function Trie(caseSensitive){this.dictionary={};this.$=false;if(typeof caseSensitive==="undefined"){caseSensitive=true}this.cs=caseSensitive}Trie.prototype.addString=function(string){if(this.cs===false){string=string.toLowerCase()}if(string.length===0){var wasWord=this.$;this.$=true;return wasWord}var next=this.dictionary[string[0]];if(!next){this.dictionary[string[0]]=new Trie(this.cs);next=this.dictionary[string[0]]}return next.addString(string.substring(1))};Trie.prototype.addStrings=function(list){for(var i in list){this.addString(list[i])}};Trie.prototype.keysWithPrefix=function(prefix){if(this.caseSensitive===false){prefix=prefix.toLowerCase()}function isEmpty(object){for(var key in object)if(object.hasOwnProperty(key))return false;return true}function get(node,word){if(!node)return null;if(word.length==0)return node;return get(node.dictionary[word[0]],word.substring(1))}function recurse(node,stringAgg,resultsAgg){if(!node)return;if(node.$){resultsAgg.push(stringAgg)}if(isEmpty(node.dictionary)){return}for(var c in node.dictionary){recurse(node.dictionary[c],stringAgg+c,resultsAgg)}}var results=[];recurse(get(this,prefix),prefix,results);return results};Trie.prototype.contains=function(string){if(this.cs===false){string=string.toLowerCase()}if(string.length===0){return this.$}var firstLetter=string[0];var next=this.dictionary[firstLetter];if(!next){return false}return next.contains(string.substring(1))};Trie.prototype.findMatchesOnPath=function(search){if(this.cs===false){search=search.toLowerCase()}function recurse(node,search,stringAgg,resultsAgg){if(node.$){resultsAgg.push(stringAgg)}if(search.length===0){return resultsAgg}var next=node.dictionary[search[0]];if(!next){return resultsAgg}return recurse(next,search.substring(1),stringAgg+search[0],resultsAgg)}return recurse(this,search,"",[])};Trie.prototype.findPrefix=function(search){if(this.cs===false){search=search.toLowerCase()}function recurse(node,search,stringAgg,lastWord){if(node.$){lastWord=stringAgg}if(search.length===0){return[lastWord,search]}var next=node.dictionary[search[0]];if(!next){return[lastWord,search]}return recurse(next,search.substring(1),stringAgg+search[0],lastWord)}return recurse(this,search,"",null)};Trie.prototype.getSize=function(){var total=1;for(var c in this.dictionary){total+=this.dictionary[c].getSize()}return total};module.exports=Trie},{}],97:[function(require,module,exports){"use strict";function Bag(){this.dictionary=[];this.nElement=0}Bag.prototype.add=function(element){this.dictionary.push(element);return this};Bag.prototype.isEmpty=function(){return this.nElement>0};Bag.prototype.contains=function(item){return this.dictionary.indexOf(item)>=0};Bag.prototype.unpack=function(){return this.dictionary.slice()};module.exports=Bag},{}],98:[function(require,module,exports){"use strict";var util=require("util"),Bag=require("./bag");var DirectedEdge=function(start,end,weight){this.start=start;this.end=end;this.weight=weight};DirectedEdge.prototype.weight=function(){return this.weight};DirectedEdge.prototype.from=function(){return this.start};DirectedEdge.prototype.to=function(){return this.end};DirectedEdge.prototype.toString=function(){return util.format("%s -> %s, %s",this.start,this.end,this.weight)};var EdgeWeightedDigraph=function(){this.edgesNum=0;this.adj=[]};EdgeWeightedDigraph.prototype.v=function(){return this.adj.length};EdgeWeightedDigraph.prototype.e=function(){return this.edgesNum};EdgeWeightedDigraph.prototype.add=function(start,end,weight){var e=new DirectedEdge(start,end,weight);this.addEdge(e)};EdgeWeightedDigraph.prototype.addEdge=function(e){if(!this.adj[e.from()]){this.adj[e.from()]=new Bag}this.adj[e.from()].add(e);this.edgesNum++};EdgeWeightedDigraph.prototype.getAdj=function(v){if(!this.adj[v])return[];return this.adj[v].unpack()};EdgeWeightedDigraph.prototype.edges=function(){var adj=this.adj;var list=new Bag;for(var i in adj){adj[i].unpack().forEach(function(item){list.add(item)})}return list.unpack()};EdgeWeightedDigraph.prototype.toString=function(){var result=[];var list=this.edges();list.forEach(function(edge){result.push(edge.toString())});return result.join("\n")};module.exports=EdgeWeightedDigraph},{"./bag":97,util:13}],99:[function(require,module,exports){"use strict";var EdgeWeightedDigraph=require("./edge_weighted_digraph"),Topological=require("./topological");var LongestPathTree=function(digraph,start){var _this=this;this.edgeTo=[];this.distTo=[];this.distTo[start]=0;this.start=start;this.top=new Topological(digraph);this.top.order().forEach(function(vertex){_this.relaxVertex(digraph,vertex,_this)})};LongestPathTree.prototype.relaxEdge=function(e){var distTo=this.distTo,edgeTo=this.edgeTo;var v=e.from(),w=e.to();if(distTo[w]<distTo[v]+e.weight){distTo[w]=distTo[v]+e.weight;edgeTo[w]=e}};LongestPathTree.prototype.relaxVertex=function(digraph,vertex,tree){var distTo=tree.distTo;var edgeTo=tree.edgeTo;digraph.getAdj(vertex).forEach(function(edge){var w=edge.to();distTo[w]=distTo[w]||0;distTo[vertex]=distTo[vertex]||0;if(distTo[w]<distTo[vertex]+edge.weight){distTo[w]=parseFloat((distTo[vertex]+edge.weight).toFixed(2));edgeTo[w]=edge}})};LongestPathTree.prototype.getDistTo=function(v){return this.distTo[v]};LongestPathTree.prototype.hasPathTo=function(v){return!!this.distTo[v]};LongestPathTree.prototype.pathTo=function(v){if(!this.hasPathTo(v))return[];var path=[];var edgeTo=this.edgeTo;for(var e=edgeTo[v];!!e;e=edgeTo[e.from()]){path.push(e.to())}path.push(this.start);return path.reverse()};module.exports=LongestPathTree},{"./edge_weighted_digraph":98,"./topological":110}],100:[function(require,module,exports){"use strict";var EdgeWeightedDigraph=require("./edge_weighted_digraph"),Topological=require("./topological");var ShortestPathTree=function(digraph,start){var _this=this;this.edgeTo=[];this.distTo=[];this.distTo[start]=0;this.start=start;this.top=new Topological(digraph);this.top.order().forEach(function(vertex){_this.relaxVertex(digraph,vertex,_this)})};ShortestPathTree.prototype.relaxEdge=function(e){var distTo=this.distTo,edgeTo=this.edgeTo;var v=e.from(),w=e.to();if(distTo[w]>distTo[v]+e.weight){distTo[w]=distTo[v]+e.weight;edgeTo[w]=e}};ShortestPathTree.prototype.relaxVertex=function(digraph,vertex,tree){var distTo=tree.distTo;var edgeTo=tree.edgeTo;digraph.getAdj(vertex).forEach(function(edge){var w=edge.to();distTo[w]=/\d/.test(distTo[w])?distTo[w]:Number.MAX_VALUE;distTo[vertex]=distTo[vertex]||0;if(distTo[w]>distTo[vertex]+edge.weight){distTo[w]=parseFloat((distTo[vertex]+edge.weight).toFixed(2));edgeTo[w]=edge}})};ShortestPathTree.prototype.getDistTo=function(v){return this.distTo[v]};ShortestPathTree.prototype.hasPathTo=function(v){var dist=this.distTo[v];if(v==this.start)return false;return/\d/.test(dist)?dist!=Number.MAX_VALUE:false};ShortestPathTree.prototype.pathTo=function(v){if(!this.hasPathTo(v)||v==this.start)return[];var path=[];var edgeTo=this.edgeTo;for(var e=edgeTo[v];!!e;e=edgeTo[e.from()]){path.push(e.to())}path.push(this.start);return path.reverse()};module.exports=ShortestPathTree},{"./edge_weighted_digraph":98,"./topological":110}],101:[function(require,module,exports){var words=["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","$","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],102:[function(require,module,exports){var words=["a","un","el","ella","y","sobre","de","la","que","en","los","del","se","las","por","un","para","con","no","una","su","al","lo","como","ms","pero","sus","le","ya","o","porque","cuando","muy","sin","sobre","tambin","me","hasta","donde","quien","desde","nos","durante","uno","ni","contra","ese","eso","m","qu","otro","l","cual","poco","mi","t","te","ti","s","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],103:[function(require,module,exports){var words=["","","","","","","","","!","",".","","",":",";",",","","","","","","","","","",""];exports.words=words},{}],104:[function(require,module,exports){var words=["tre","avoir","faire","a","au","aux","avec","ce","ces","dans","de","des","du","elle","en","et","eux","il","je","la","le","leur","lui","ma","mais","me","mme","mes","moi","mon","ne","nos","notre","nous","on","ou","o","par","pas","pour","qu","que","qui","sa","se","ses","son","sur","ta","te","tes","toi","ton","tu","un","une","vos","votre","vous","c","d","j","l","","m","n","s","t","y","t","te","tes","ts","tant","suis","es","est","sommes","tes","sont","serai","seras","sera","serons","serez","seront","serais","serait","serions","seriez","seraient","tais","tait","tions","tiez","taient","fus","fut","fmes","ftes","furent","sois","soit","soyons","soyez","soient","fusse","fusses","ft","fussions","fussiez","fussent","ayant","eu","eue","eues","eus","ai","as","avons","avez","ont","aurai","auras","aura","aurons","aurez","auront","aurais","aurait","aurions","auriez","auraient","avais","avait","avions","aviez","avaient","eut","emes","etes","eurent","aie","aies","ait","ayons","ayez","aient","eusse","eusses","et","eussions","eussiez","eussent","ceci","cela","cet","cette","ici","ils","les","leurs","quel","quels","quelle","quelles","sans","soi"];exports.words=words},{}],105:[function(require,module,exports){var words=["ad","al","allo","ai","agli","all","agl","alla","alle","con","col","coi","da","dal","dallo","dai","dagli","dall","dagl","dalla","dalle","di","del","dello","dei","degli","dell","degl","della","delle","in","nel","nello","nei","negli","nell","negl","nella","nelle","su","sul","sullo","sui","sugli","sull","sugl","sulla","sulle","per","tra","contro","io","tu","lui","lei","noi","voi","loro","mio","mia","miei","mie","tuo","tua","tuoi","tue","suo","sua","suoi","sue","nostro","nostra","nostri","nostre","vostro","vostra","vostri","vostre","mi","ti","ci","vi","lo","la","li","le","gli","ne","il","un","uno","una","ma","ed","se","perch","anche","come","dov","dove","che","chi","cui","non","pi","quale","quanto","quanti","quanta","quante","quello","quelli","quella","quelle","questo","questi","questa","queste","si","tutto","tutti","a","c","e","i","l","o","ho","hai","ha","abbiamo","avete","hanno","abbia","abbiate","abbiano","avr","avrai","avr","avremo","avrete","avranno","avrei","avresti","avrebbe","avremmo","avreste","avrebbero","avevo","avevi","aveva","avevamo","avevate","avevano","ebbi","avesti","ebbe","avemmo","aveste","ebbero","avessi","avesse","avessimo","avessero","avendo","avuto","avuta","avuti","avute","sono","sei","","siamo","siete","sia","siate","siano","sar","sarai","sar","saremo","sarete","saranno","sarei","saresti","sarebbe","saremmo","sareste","sarebbero","ero","eri","era","eravamo","eravate","erano","fui","fosti","fu","fummo","foste","furono","fossi","fosse","fossimo","fossero","essendo","faccio","fai","facciamo","fanno","faccia","facciate","facciano","far","farai","far","faremo","farete","faranno","farei","faresti","farebbe","faremmo","fareste","farebbero","facevo","facevi","faceva","facevamo","facevate","facevano","feci","facesti","fece","facemmo","faceste","fecero","facessi","facesse","facessimo","facessero","facendo","sto","stai","sta","stiamo","stanno","stia","stiate","stiano","star","starai","star","staremo","starete","staranno","starei","staresti","starebbe","staremmo","stareste","starebbero","stavo","stavi","stava","stavamo","stavate","stavano","stetti","stesti","stette","stemmo","steste","stettero","stessi","stesse","stessimo","stessero","stando","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],106:[function(require,module,exports){var words=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];module.exports=words},{}],107:[function(require,module,exports){var words=["og","i","jeg","det","at","en","et","den","til","er","som","p","de","med","han","av","ikke","der","s","var","meg","seg","men","ett","har","om","vi","min","mitt","ha","hadde","hun","n","over","da","ved","fra","du","ut","sin","dem","oss","opp","man","kan","hans","hvor","eller","hva","skal","selv","sjl","her","alle","vil","bli","ble","blitt","kunne","inn","nr","vre","kom","noen","noe","ville","dere","som","deres","kun","ja","etter","ned","skulle","denne","for","deg","si","sine","sitt","mot","","meget","hvorfor","dette","disse","uten","hvordan","ingen","din","ditt","blir","samme","hvilken","hvilke","snn","inni","mellom","vr","hver","hvem","vors","hvis","bde","bare","enn","fordi","fr","mange","ogs","slik","vrt","vre","begge","siden","henne","hennar","hennes","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],108:[function(require,module,exports){var words=["a","aby","ach","acz","aczkolwiek","aj","albo","ale","ale","ani","a","bardziej","bardzo","bo","bowiem","by","byli","bynajmniej","by","by","bya","byo","byy","bdzie","bd","cali","caa","cay","ci","ci","ciebie","co","cokolwiek","co","czasami","czasem","czemu","czy","czyli","daleko","dla","dlaczego","dlatego","do","dobrze","dokd","do","duo","dwa","dwaj","dwie","dwoje","dzi","dzisiaj","gdy","gdyby","gdy","gdzie","gdziekolwiek","gdzie","i","ich","ile","im","inna","inne","inny","innych","i","ja","j","jak","jaka","jakby","jaki","jakich","jakie","jaki","jaki","jakkolwiek","jako","jako","je","jeden","jedna","jedno","jednak","jednake","jego","jej","jemu","jest","jestem","jeszcze","jeli","jeeli","ju","j","kady","kiedy","kilka","kim","kto","ktokolwiek","kto","ktra","ktre","ktrego","ktrej","ktry","ktrych","ktrym","ktrzy","ku","lat","lecz","lub","ma","maj","mao","mam","mi","mimo","midzy","mn","mnie","mog","moi","moim","moja","moje","moe","moliwe","mona","mj","mu","musi","my","na","nad","nam","nami","nas","nasi","nasz","nasza","nasze","naszego","naszych","natomiast","natychmiast","nawet","ni","nic","nich","nie","niech","niego","niej","niemu","nigdy","nim","nimi","ni","no","o","obok","od","okoo","on","ona","one","oni","ono","oraz","oto","owszem","pan","pana","pani","po","pod","podczas","pomimo","ponad","poniewa","powinien","powinna","powinni","powinno","poza","prawie","przecie","przed","przede","przedtem","przez","przy","roku","rwnie","sam","sama","s","si","skd","sobie","sob","sposb","swoje","ta","tak","taka","taki","takie","take","tam","te","tego","tej","temu","ten","teraz","te","to","tob","tobie","tote","trzeba","tu","tutaj","twoi","twoim","twoja","twoje","twym","twj","ty","tych","tylko","tym","u","w","wam","wami","was","wasz","za","wasza","wasze","we","wedug","wiele","wielu","wic","wicej","t","wszyscy","wszystkich","wszystkie","wszystkim","wszystko","wtedy","wy","wanie","z","za","zapewne","zawsze","ze","z","znowu","znw","zosta","aden","adna","adne","adnych","e","eby","$","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],109:[function(require,module,exports){var words=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""," ","","","","","","","","","","","","","","","","","","","","","c",""," ","","","","","","","","","","","","","","","","","","","","","",""," "," ","","","","","","","","","","","","","","","","","","o","","","","","","","","","","","","","","","","","","$","1","2","3","4","5","6","7","8","9","0","_"];exports.words=words},{}],110:[function(require,module,exports){"use strict";var Topological=function(g){this.isDag=true;this.sorted=topoSort(uniqueVertexs(g.edges()),g.edges())};Topological.prototype.isDAG=function(){return this.isDag};Topological.prototype.order=function(){return this.sorted.slice()};function topoSort(vertexs,edges){var sorted=[];var cursor=vertexs.length,visited={},i=cursor;while(i--){if(!visited[i])visit(vertexs[i],i,[])}return sorted.reverse();function visit(vertex,i,predecessors){if(predecessors.indexOf(vertex)>=0){throw new Error("Cyclic dependency:"+JSON.stringify(vertex))}if(visited[i])return;visited[i]=true;var outgoing=edges.filter(function(edge){return edge.to()===vertex});var preds=[];if(outgoing.length>0){preds=predecessors.concat(vertex)}var from;outgoing.forEach(function(edge){from=edge.from();visit(from,vertexs.indexOf(from),preds)});sorted[--cursor]=vertex}}function uniqueVertexs(edges){var vertexs=[];var from,to;edges.forEach(function(edge){from=edge.from();to=edge.to();if(vertexs.indexOf(from)<0)vertexs.push(from);if(vertexs.indexOf(to)<0)vertexs.push(to)});return vertexs}module.exports=Topological},{}],111:[function(require,module,exports){function replacer(translationTable){var pattern=[];var regExp;var key;for(key in translationTable){key=(""+key).replace(/([-()\[\]{}+?*.$\^|,:#<!\\\/])/g,"\\$1").replace(/\x08/g,"\\x08");pattern.push(key)}regExp=new RegExp(pattern.join("|"),"g");return function(str){return str.replace(regExp,function(str){return translationTable[str]})}}function flip(obj){var newObj=Object.create(null),key;for(key in obj){newObj[obj[key]]=key}return newObj}function merge(var_args){var args=[].slice.call(arguments),newObj=Object.create(null),id=0,key;while(args[id]){for(key in args[id]){newObj[key]=args[id][key]}id++}return newObj}exports.replacer=replacer;exports.flip=flip;exports.merge=merge},{}],112:[function(require,module,exports){(function(Buffer){var WordNetFile=require("./wordnet_file"),fs=require("fs"),util=require("util");function get(location,callback){var buff=new Buffer(4096);this.open(function(err,fd,done){WordNetFile.appendLineChar(fd,location,0,buff,function(line){done();var data=line.split("| ");var tokens=data[0].split(/\s+/);var ptrs=[];var wCnt=parseInt(tokens[3],16);var synonyms=[];for(var i=0;i<wCnt;i++){synonyms.push(tokens[4+i*2])}var ptrOffset=(wCnt-1)*2+6;for(var i=0;i<parseInt(tokens[ptrOffset],10);i++){ptrs.push({pointerSymbol:tokens[ptrOffset+1+i*4],synsetOffset:parseInt(tokens[ptrOffset+2+i*4],10),pos:tokens[ptrOffset+3+i*4],sourceTarget:tokens[ptrOffset+4+i*4]})}var glossArray=data[1].split("; ");var definition=glossArray[0];var examples=glossArray.slice(1);for(var k=0;k<examples.length;k++){examples[k]=examples[k].replace(/\"/g,"").replace(/\s\s+/g,"")}callback({synsetOffset:parseInt(tokens[0],10),lexFilenum:parseInt(tokens[1],10),pos:tokens[2],wCnt:wCnt,lemma:tokens[4],synonyms:synonyms,lexId:tokens[5],ptrs:ptrs,gloss:data[1],def:definition,exp:examples})})})}var DataFile=function(dataDir,name){WordNetFile.call(this,dataDir,"data."+name)};util.inherits(DataFile,WordNetFile);DataFile.prototype.get=get;module.exports=DataFile}).call(this,require("buffer").Buffer)},{"./wordnet_file":115,buffer:3,fs:1,util:13}],113:[function(require,module,exports){(function(Buffer){var WordNetFile=require("./wordnet_file"),fs=require("fs"),util=require("util");function getFileSize(path){var stat=fs.statSync(path);return stat.size}function findPrevEOL(fd,pos,callback){var buff=new Buffer(1024);if(pos==0)callback(0);else{fs.read(fd,buff,0,1,pos,function(err,count){if(buff[0]==10)callback(pos+1);else findPrevEOL(fd,pos-1,callback)})}}function readLine(fd,pos,callback){var buff=new Buffer(1024);findPrevEOL(fd,pos,function(pos){WordNetFile.appendLineChar(fd,pos,0,buff,callback)})}function miss(callback){callback({status:"miss"})}function findAt(fd,size,pos,lastPos,adjustment,searchKey,callback,lastKey){if(lastPos==pos||pos>=size){miss(callback)}else{readLine(fd,pos,function(line){var tokens=line.split(/\s+/);var key=tokens[0];if(key==searchKey){callback({status:"hit",key:key,line:line,tokens:tokens})}else if(adjustment==1||key==lastKey){miss(callback)}else{adjustment=Math.ceil(adjustment*.5);if(key<searchKey){findAt(fd,size,pos+adjustment,pos,adjustment,searchKey,callback,key)}else{findAt(fd,size,pos-adjustment,pos,adjustment,searchKey,callback,key)}}})}}function find(searchKey,callback){var indexFile=this;indexFile.open(function(err,fd,done){if(err){console.log(err)}else{var size=getFileSize(indexFile.filePath)-1;var pos=Math.ceil(size/2);findAt(fd,size,pos,null,pos,searchKey,function(result){callback(result);done()})}})}function lookupFromFile(word,callback){this.find(word,function(record){var indexRecord=null;if(record.status=="hit"){var ptrs=[],offsets=[];for(var i=0;i<parseInt(record.tokens[3]);i++)ptrs.push(record.tokens[i]);for(var i=0;i<parseInt(record.tokens[2]);i++)offsets.push(parseInt(record.tokens[ptrs.length+6+i],10));indexRecord={lemma:record.tokens[0],pos:record.tokens[1],ptrSymbol:ptrs,senseCnt:parseInt(record.tokens[ptrs.length+4],10),tagsenseCnt:parseInt(record.tokens[ptrs.length+5],10),synsetOffset:offsets}}callback(indexRecord)})}function lookup(word,callback){this.lookupFromFile(word,callback)}var IndexFile=function(dataDir,name){WordNetFile.call(this,dataDir,"index."+name)};util.inherits(IndexFile,WordNetFile);IndexFile.prototype.lookupFromFile=lookupFromFile;IndexFile.prototype.lookup=lookup;IndexFile.prototype.find=find;IndexFile.prototype._findAt=findAt;module.exports=IndexFile}).call(this,require("buffer").Buffer)},{"./wordnet_file":115,buffer:3,fs:1,util:13}],114:[function(require,module,exports){var IndexFile=require("./index_file"),DataFile=require("./data_file");function pushResults(data,results,offsets,callback){var wordnet=this;if(offsets.length==0){callback(results)}else{data.get(offsets.pop(),function(record){results.push(record);wordnet.pushResults(data,results,offsets,callback)})}}function lookupFromFiles(files,results,word,callback){var wordnet=this;if(files.length==0)callback(results);else{var file=files.pop();file.index.lookup(word,function(record){if(record){wordnet.pushResults(file.data,results,record.synsetOffset,function(){wordnet.lookupFromFiles(files,results,word,callback)})}else{wordnet.lookupFromFiles(files,results,word,callback)}})}}function lookup(word,callback){word=word.toLowerCase().replace(/\s+/g,"_");this.lookupFromFiles([{index:this.nounIndex,data:this.nounData},{index:this.verbIndex,data:this.verbData},{index:this.adjIndex,data:this.adjData},{index:this.advIndex,data:this.advData}],[],word,callback)}function get(synsetOffset,pos,callback){var dataFile=this.getDataFile(pos);var wordnet=this;dataFile.get(synsetOffset,function(result){callback(result)})}function getDataFile(pos){switch(pos){case"n":return this.nounData;case"v":return this.verbData;case"a":case"s":return this.adjData;case"r":return this.advData}}function loadSynonyms(synonyms,results,ptrs,callback){var wordnet=this;if(ptrs.length>0){var ptr=ptrs.pop();this.get(ptr.synsetOffset,ptr.pos,function(result){synonyms.push(result);wordnet.loadSynonyms(synonyms,results,ptrs,callback)})}else{wordnet.loadResultSynonyms(synonyms,results,callback)}}function loadResultSynonyms(synonyms,results,callback){var wordnet=this;if(results.length>0){var result=results.pop();wordnet.loadSynonyms(synonyms,results,result.ptrs,callback)}else callback(synonyms)}function lookupSynonyms(word,callback){var wordnet=this;wordnet.lookup(word,function(results){wordnet.loadResultSynonyms([],results,callback)})}function getSynonyms(){var wordnet=this;var callback=arguments[2]?arguments[2]:arguments[1];var pos=arguments[0].pos?arguments[0].pos:arguments[1];var synsetOffset=arguments[0].synsetOffset?arguments[0].synsetOffset:arguments[0];this.get(synsetOffset,pos,function(result){wordnet.loadSynonyms([],[],result.ptrs,callback)})}function WordNet(dataDir){if(!dataDir){try{var WNdb=require("WNdb")}catch(e){console.error("Please 'npm install WNdb' before using WordNet module or specify a dict directory.");
throw e}dataDir=WNdb.path}this.nounIndex=new IndexFile(dataDir,"noun");this.verbIndex=new IndexFile(dataDir,"verb");this.adjIndex=new IndexFile(dataDir,"adj");this.advIndex=new IndexFile(dataDir,"adv");this.nounData=new DataFile(dataDir,"noun");this.verbData=new DataFile(dataDir,"verb");this.adjData=new DataFile(dataDir,"adj");this.advData=new DataFile(dataDir,"adv");this.get=get;this.lookup=lookup;this.lookupFromFiles=lookupFromFiles;this.pushResults=pushResults;this.loadResultSynonyms=loadResultSynonyms;this.loadSynonyms=loadSynonyms;this.lookupSynonyms=lookupSynonyms;this.getSynonyms=getSynonyms;this.getDataFile=getDataFile}module.exports=WordNet},{"./data_file":112,"./index_file":113,WNdb:1}],115:[function(require,module,exports){(function(Buffer){var fs=require("fs"),path=require("path"),util=require("util");function appendLineChar(fd,pos,buffPos,buff,callback){if(buffPos>=buff.length){var newBuff=new Buffer(buff.length*2);buff.copy(newBuff,0,0,buff.length);buff=newBuff}fs.read(fd,buff,buffPos,1,pos,function(err,count){if(err)console.log(err);else{if(buff[buffPos]==10||buffPos==buff.length)callback(buff.slice(0,buffPos).toString("ASCII"));else{appendLineChar(fd,pos+1,buffPos+1,buff,callback)}}})}function open(callback){var filePath=this.filePath;fs.open(filePath,"r",null,function(err,fd){if(err){console.log("Unable to open %s",filePath);return}callback(err,fd,function(){fs.close(fd)})})}var WordNetFile=function(dataDir,fileName){this.dataDir=dataDir;this.fileName=fileName;this.filePath=require("path").join(this.dataDir,this.fileName)};WordNetFile.prototype.open=open;WordNetFile.appendLineChar=appendLineChar;module.exports=WordNetFile}).call(this,require("buffer").Buffer)},{buffer:3,fs:1,path:10,util:13}],116:[function(require,module,exports){var util=require("util"),Classifier=require("./classifier");var BayesClassifier=function(smoothing){Classifier.call(this);this.classFeatures={};this.classTotals={};this.totalExamples=1;this.smoothing=smoothing===undefined?1:smoothing};util.inherits(BayesClassifier,Classifier);function addExample(observation,label){if(!this.classFeatures[label]){this.classFeatures[label]={};this.classTotals[label]=1}if(observation instanceof Array){var i=observation.length;this.totalExamples++;this.classTotals[label]++;while(i--){if(observation[i]){if(this.classFeatures[label][i]){this.classFeatures[label][i]++}else{this.classFeatures[label][i]=1+this.smoothing}}}}else{for(var key in observation){value=observation[key];if(this.classFeatures[label][value]){this.classFeatures[label][value]++}else{this.classFeatures[label][value]=1+this.smoothing}}}}function train(){}function probabilityOfClass(observation,label){var prob=0;if(observation instanceof Array){var i=observation.length;while(i--){if(observation[i]){var count=this.classFeatures[label][i]||this.smoothing;prob+=Math.log(count/this.classTotals[label])}}}else{for(var key in observation){var count=this.classFeatures[label][observation[key]]||this.smoothing;prob+=Math.log(count/this.classTotals[label])}}prob=this.classTotals[label]/this.totalExamples*Math.exp(prob);return prob}function getClassifications(observation){var classifier=this;var labels=[];for(var className in this.classFeatures){labels.push({label:className,value:classifier.probabilityOfClass(observation,className)})}return labels.sort(function(x,y){return y.value-x.value})}function restore(classifier){classifier=Classifier.restore(classifier);classifier.__proto__=BayesClassifier.prototype;return classifier}BayesClassifier.prototype.addExample=addExample;BayesClassifier.prototype.train=train;BayesClassifier.prototype.getClassifications=getClassifications;BayesClassifier.prototype.probabilityOfClass=probabilityOfClass;BayesClassifier.restore=restore;module.exports=BayesClassifier},{"./classifier":117,util:13}],117:[function(require,module,exports){function Classifier(){}function restore(classifier){classifier=typeof classifier=="string"?JSON.parse(classifier):classifier;return classifier}function addExample(observation,classification){throw"Not implemented"}function classify(observation){var classifications=this.getClassifications(observation);if(!classifications||classifications.length===0){throw"Not Trained"}return this.getClassifications(observation)[0].label}function train(){throw"Not implemented"}Classifier.prototype.addExample=addExample;Classifier.prototype.train=train;Classifier.prototype.classify=classify;Classifier.restore=restore;module.exports=Classifier},{}],118:[function(require,module,exports){var util=require("util"),Classifier=require("./classifier");var sylvester=require("sylvester"),Matrix=sylvester.Matrix,Vector=sylvester.Vector;function sigmoid(z){return 1/(1+Math.exp(0-z))}function hypothesis(theta,Observations){return Observations.x(theta).map(sigmoid)}function cost(theta,Examples,classifications){var hypothesisResult=hypothesis(theta,Examples);var ones=Vector.One(Examples.rows());var cost_1=Vector.Zero(Examples.rows()).subtract(classifications).elementMultiply(hypothesisResult.log());var cost_0=ones.subtract(classifications).elementMultiply(ones.subtract(hypothesisResult).log());return 1/Examples.rows()*cost_1.subtract(cost_0).sum()}function descendGradient(theta,Examples,classifications){var maxIt=500*Examples.rows();var last;var current;var learningRate=3;var learningRateFound=false;Examples=Matrix.One(Examples.rows(),1).augment(Examples);theta=theta.augment([0]);while(!learningRateFound){var i=0;last=null;while(true){var hypothesisResult=hypothesis(theta,Examples);theta=theta.subtract(Examples.transpose().x(hypothesisResult.subtract(classifications)).x(1/Examples.rows()).x(learningRate));current=cost(theta,Examples,classifications);i++;if(last){if(current<last)learningRateFound=true;else break;if(last-current<1e-4)break}if(i>=maxIt){throw"unable to find minimum"}last=current}learningRate/=3}return theta.chomp(1)}var LogisticRegressionClassifier=function(){Classifier.call(this);this.examples={};this.features=[];this.featurePositions={};this.maxFeaturePosition=0;this.classifications=[];this.exampleCount=0};util.inherits(LogisticRegressionClassifier,Classifier);function createClassifications(){var classifications=[];for(var i=0;i<this.exampleCount;i++){var classification=[];for(var _ in this.examples){classification.push(0)}classifications.push(classification)}return classifications}function computeThetas(Examples,Classifications){this.theta=[];var zero=function(){return 0};for(var i=1;i<=this.classifications.length;i++){var theta=Examples.row(1).map(zero);this.theta.push(descendGradient(theta,Examples,Classifications.column(i)))}}function train(){var examples=[];var classifications=this.createClassifications();var d=0,c=0;for(var classification in this.examples){for(var i=0;i<this.examples[classification].length;i++){var doc=this.examples[classification][i];var example=doc;examples.push(example);classifications[d][c]=1;d++}c++}this.computeThetas($M(examples),$M(classifications))}function addExample(data,classification){if(!this.examples[classification]){this.examples[classification]=[];this.classifications.push(classification)}this.examples[classification].push(data);this.exampleCount++}function getClassifications(observation){observation=$V(observation);var classifications=[];for(var i=0;i<this.theta.length;i++){classifications.push({label:this.classifications[i],value:sigmoid(observation.dot(this.theta[i]))})}return classifications.sort(function(x,y){return y.value-x.value})}function restore(classifier){classifier=Classifier.restore(classifier);classifier.__proto__=LogisticRegressionClassifier.prototype;return classifier}LogisticRegressionClassifier.prototype.addExample=addExample;LogisticRegressionClassifier.prototype.restore=restore;LogisticRegressionClassifier.prototype.train=train;LogisticRegressionClassifier.prototype.createClassifications=createClassifications;LogisticRegressionClassifier.prototype.computeThetas=computeThetas;LogisticRegressionClassifier.prototype.getClassifications=getClassifications;LogisticRegressionClassifier.restore=restore;module.exports=LogisticRegressionClassifier},{"./classifier":117,sylvester:121,util:13}],119:[function(require,module,exports){var Sylvester=require("sylvester"),Matrix=Sylvester.Matrix,Vector=Sylvester.Vector;function KMeans(Observations){if(!Observations.elements)Observations=$M(Observations);this.Observations=Observations}function createCentroids(k){var Centroid=[];var maxes=this.Observations.maxColumns();for(var i=1;i<=k;i++){var centroid=[];for(var j=1;j<=this.Observations.cols();j++){centroid.push(Math.random()*maxes.e(j))}Centroid.push(centroid)}return $M(Centroid)}function distanceFrom(Centroids){var distances=[];for(var i=1;i<=this.Observations.rows();i++){var distance=[];for(var j=1;j<=Centroids.rows();j++){distance.push(this.Observations.row(i).distanceFrom(Centroids.row(j)))}distances.push(distance)}return $M(distances)}function cluster(k){var Centroids=this.createCentroids(k);var LastDistances=Matrix.Zero(this.Observations.rows(),this.Observations.cols());var Distances=this.distanceFrom(Centroids);var Groups;while(!LastDistances.eql(Distances)){Groups=Distances.minColumnIndexes();LastDistances=Distances;var newCentroids=[];for(var i=1;i<=Centroids.rows();i++){var centroid=[];for(var j=1;j<=Centroids.cols();j++){var sum=0;var count=0;for(var l=1;l<=this.Observations.rows();l++){if(Groups.e(l)==i){count++;sum+=this.Observations.e(l,j)}}centroid.push(sum/count)}newCentroids.push(centroid)}Centroids=$M(newCentroids);Distances=this.distanceFrom(Centroids)}return Groups}KMeans.prototype.createCentroids=createCentroids;KMeans.prototype.distanceFrom=distanceFrom;KMeans.prototype.cluster=cluster;module.exports=KMeans},{sylvester:121}],120:[function(require,module,exports){exports.BayesClassifier=require("./classifier/bayes_classifier");exports.LogisticRegressionClassifier=require("./classifier/logistic_regression_classifier");exports.KMeans=require("./clusterer/kmeans")},{"./classifier/bayes_classifier":116,"./classifier/logistic_regression_classifier":118,"./clusterer/kmeans":119}],121:[function(require,module,exports){(function(global){exports.Vector=require("./vector");global.$V=exports.Vector.create;exports.Matrix=require("./matrix");global.$M=exports.Matrix.create;exports.Line=require("./line");global.$L=exports.Line.create;exports.Plane=require("./plane");global.$P=exports.Plane.create;exports.Line.Segment=require("./line.segment");exports.Sylvester=require("./sylvester")}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./line":122,"./line.segment":123,"./matrix":124,"./plane":125,"./sylvester":126,"./vector":127}],122:[function(require,module,exports){var Vector=require("./vector");var Matrix=require("./matrix");var Plane=require("./plane");var Sylvester=require("./sylvester");function Line(){}Line.prototype={eql:function(line){return this.isParallelTo(line)&&this.contains(line.anchor)},dup:function(){return Line.create(this.anchor,this.direction)},translate:function(vector){var V=vector.elements||vector;return Line.create([this.anchor.elements[0]+V[0],this.anchor.elements[1]+V[1],this.anchor.elements[2]+(V[2]||0)],this.direction)},isParallelTo:function(obj){if(obj.normal||obj.start&&obj.end){return obj.isParallelTo(this)}var theta=this.direction.angleFrom(obj.direction);return Math.abs(theta)<=Sylvester.precision||Math.abs(theta-Math.PI)<=Sylvester.precision},distanceFrom:function(obj){if(obj.normal||obj.start&&obj.end){return obj.distanceFrom(this)}if(obj.direction){if(this.isParallelTo(obj)){return this.distanceFrom(obj.anchor)}var N=this.direction.cross(obj.direction).toUnitVector().elements;var A=this.anchor.elements,B=obj.anchor.elements;return Math.abs((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}else{var P=obj.elements||obj;var A=this.anchor.elements,D=this.direction.elements;var PA1=P[0]-A[0],PA2=P[1]-A[1],PA3=(P[2]||0)-A[2];var modPA=Math.sqrt(PA1*PA1+PA2*PA2+PA3*PA3);if(modPA===0)return 0;var cosTheta=(PA1*D[0]+PA2*D[1]+PA3*D[2])/modPA;var sin2=1-cosTheta*cosTheta;return Math.abs(modPA*Math.sqrt(sin2<0?0:sin2))}},contains:function(obj){if(obj.start&&obj.end){return this.contains(obj.start)&&this.contains(obj.end)}var dist=this.distanceFrom(obj);return dist!==null&&dist<=Sylvester.precision},positionOf:function(point){if(!this.contains(point)){return null}var P=point.elements||point;var A=this.anchor.elements,D=this.direction.elements;return(P[0]-A[0])*D[0]+(P[1]-A[1])*D[1]+((P[2]||0)-A[2])*D[2]},liesIn:function(plane){return plane.contains(this)},intersects:function(obj){if(obj.normal){return obj.intersects(this)}return!this.isParallelTo(obj)&&this.distanceFrom(obj)<=Sylvester.precision},intersectionWith:function(obj){if(obj.normal||obj.start&&obj.end){return obj.intersectionWith(this)}if(!this.intersects(obj)){return null}var P=this.anchor.elements,X=this.direction.elements,Q=obj.anchor.elements,Y=obj.direction.elements;var X1=X[0],X2=X[1],X3=X[2],Y1=Y[0],Y2=Y[1],Y3=Y[2];var PsubQ1=P[0]-Q[0],PsubQ2=P[1]-Q[1],PsubQ3=P[2]-Q[2];var XdotQsubP=-X1*PsubQ1-X2*PsubQ2-X3*PsubQ3;var YdotPsubQ=Y1*PsubQ1+Y2*PsubQ2+Y3*PsubQ3;var XdotX=X1*X1+X2*X2+X3*X3;var YdotY=Y1*Y1+Y2*Y2+Y3*Y3;var XdotY=X1*Y1+X2*Y2+X3*Y3;var k=(XdotQsubP*YdotY/XdotX+XdotY*YdotPsubQ)/(YdotY-XdotY*XdotY);return Vector.create([P[0]+k*X1,P[1]+k*X2,P[2]+k*X3])},pointClosestTo:function(obj){if(obj.start&&obj.end){var P=obj.pointClosestTo(this);return P===null?null:this.pointClosestTo(P)}else if(obj.direction){if(this.intersects(obj)){return this.intersectionWith(obj)}if(this.isParallelTo(obj)){return null}var D=this.direction.elements,E=obj.direction.elements;var D1=D[0],D2=D[1],D3=D[2],E1=E[0],E2=E[1],E3=E[2];var x=D3*E1-D1*E3,y=D1*E2-D2*E1,z=D2*E3-D3*E2;var N=[x*E3-y*E2,y*E1-z*E3,z*E2-x*E1];var P=Plane.create(obj.anchor,N);return P.intersectionWith(this)}else{var P=obj.elements||obj;if(this.contains(P)){return Vector.create(P)}var A=this.anchor.elements,D=this.direction.elements;var D1=D[0],D2=D[1],D3=D[2],A1=A[0],A2=A[1],A3=A[2];var x=D1*(P[1]-A2)-D2*(P[0]-A1),y=D2*((P[2]||0)-A3)-D3*(P[1]-A2),z=D3*(P[0]-A1)-D1*((P[2]||0)-A3);var V=Vector.create([D2*x-D3*z,D3*y-D1*x,D1*z-D2*y]);var k=this.distanceFrom(P)/V.modulus();return Vector.create([P[0]+V.elements[0]*k,P[1]+V.elements[1]*k,(P[2]||0)+V.elements[2]*k])}},rotate:function(t,line){if(typeof line.direction=="undefined"){line=Line.create(line.to3D(),Vector.k)}var R=Matrix.Rotation(t,line.direction).elements;var C=line.pointClosestTo(this.anchor).elements;var A=this.anchor.elements,D=this.direction.elements;var C1=C[0],C2=C[1],C3=C[2],A1=A[0],A2=A[1],A3=A[2];var x=A1-C1,y=A2-C2,z=A3-C3;return Line.create([C1+R[0][0]*x+R[0][1]*y+R[0][2]*z,C2+R[1][0]*x+R[1][1]*y+R[1][2]*z,C3+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},reverse:function(){return Line.create(this.anchor,this.direction.x(-1))},reflectionIn:function(obj){if(obj.normal){var A=this.anchor.elements,D=this.direction.elements;var A1=A[0],A2=A[1],A3=A[2],D1=D[0],D2=D[1],D3=D[2];var newA=this.anchor.reflectionIn(obj).elements;var AD1=A1+D1,AD2=A2+D2,AD3=A3+D3;var Q=obj.pointClosestTo([AD1,AD2,AD3]).elements;var newD=[Q[0]+(Q[0]-AD1)-newA[0],Q[1]+(Q[1]-AD2)-newA[1],Q[2]+(Q[2]-AD3)-newA[2]];return Line.create(newA,newD)}else if(obj.direction){return this.rotate(Math.PI,obj)}else{var P=obj.elements||obj;return Line.create(this.anchor.reflectionIn([P[0],P[1],P[2]||0]),this.direction)}},setVectors:function(anchor,direction){anchor=Vector.create(anchor);direction=Vector.create(direction);if(anchor.elements.length==2){anchor.elements.push(0)}if(direction.elements.length==2){direction.elements.push(0)}if(anchor.elements.length>3||direction.elements.length>3){return null}var mod=direction.modulus();if(mod===0){return null}this.anchor=anchor;this.direction=Vector.create([direction.elements[0]/mod,direction.elements[1]/mod,direction.elements[2]/mod]);return this}};Line.create=function(anchor,direction){var L=new Line;return L.setVectors(anchor,direction)};Line.X=Line.create(Vector.Zero(3),Vector.i);Line.Y=Line.create(Vector.Zero(3),Vector.j);Line.Z=Line.create(Vector.Zero(3),Vector.k);module.exports=Line},{"./matrix":124,"./plane":125,"./sylvester":126,"./vector":127}],123:[function(require,module,exports){var Line=require("./line");var Vector=require("./vector");Line.Segment=function(){};Line.Segment.prototype={eql:function(segment){return this.start.eql(segment.start)&&this.end.eql(segment.end)||this.start.eql(segment.end)&&this.end.eql(segment.start)},dup:function(){return Line.Segment.create(this.start,this.end)},length:function(){var A=this.start.elements,B=this.end.elements;var C1=B[0]-A[0],C2=B[1]-A[1],C3=B[2]-A[2];return Math.sqrt(C1*C1+C2*C2+C3*C3)},toVector:function(){var A=this.start.elements,B=this.end.elements;return Vector.create([B[0]-A[0],B[1]-A[1],B[2]-A[2]])},midpoint:function(){var A=this.start.elements,B=this.end.elements;return Vector.create([(B[0]+A[0])/2,(B[1]+A[1])/2,(B[2]+A[2])/2])},bisectingPlane:function(){return Plane.create(this.midpoint(),this.toVector())},translate:function(vector){var V=vector.elements||vector;var S=this.start.elements,E=this.end.elements;return Line.Segment.create([S[0]+V[0],S[1]+V[1],S[2]+(V[2]||0)],[E[0]+V[0],E[1]+V[1],E[2]+(V[2]||0)])},isParallelTo:function(obj){return this.line.isParallelTo(obj)},distanceFrom:function(obj){var P=this.pointClosestTo(obj);return P===null?null:P.distanceFrom(obj)},contains:function(obj){if(obj.start&&obj.end){return this.contains(obj.start)&&this.contains(obj.end)}var P=(obj.elements||obj).slice();if(P.length==2){P.push(0)}if(this.start.eql(P)){return true}var S=this.start.elements;var V=Vector.create([S[0]-P[0],S[1]-P[1],S[2]-(P[2]||0)]);var vect=this.toVector();return V.isAntiparallelTo(vect)&&V.modulus()<=vect.modulus()},intersects:function(obj){return this.intersectionWith(obj)!==null},intersectionWith:function(obj){if(!this.line.intersects(obj)){return null}var P=this.line.intersectionWith(obj);return this.contains(P)?P:null},pointClosestTo:function(obj){if(obj.normal){var V=this.line.intersectionWith(obj);if(V===null){return null}return this.pointClosestTo(V)}else{var P=this.line.pointClosestTo(obj);if(P===null){return null}if(this.contains(P)){return P}return(this.line.positionOf(P)<0?this.start:this.end).dup()}},setPoints:function(startPoint,endPoint){startPoint=Vector.create(startPoint).to3D();endPoint=Vector.create(endPoint).to3D();if(startPoint===null||endPoint===null){return null}this.line=Line.create(startPoint,endPoint.subtract(startPoint));this.start=startPoint;this.end=endPoint;return this}};Line.Segment.create=function(v1,v2){var S=new Line.Segment;return S.setPoints(v1,v2)};module.exports=Line.Segment},{"./line":122,"./vector":127}],124:[function(require,module,exports){var fs=require("fs");var Sylvester=require("./sylvester");var Vector=require("./vector");function identSize(M,m,n,k){var e=M.elements;var i=k-1;while(i--){var row=[];for(var j=0;j<n;j++)row.push(j==i?1:0);e.unshift(row)}for(var i=k-1;i<m;i++){while(e[i].length<n)e[i].unshift(0)}return $M(e)}function pca(X){var Sigma=X.transpose().x(X).x(1/X.rows());var svd=Sigma.svd();return{U:svd.U,S:svd.S}}function svdJs(){var A=this;var V=Matrix.I(A.rows());var S=A.transpose();var U=Matrix.I(A.cols());var err=Number.MAX_VALUE;var i=0;var maxLoop=100;while(err>2.2737e-13&&i<maxLoop){var qr=S.transpose().qrJs();S=qr.R;V=V.x(qr.Q);qr=S.transpose().qrJs();U=U.x(qr.Q);S=qr.R;var e=S.triu(1).unroll().norm();var f=S.diagonal().norm();if(f==0)f=1;err=e/f;i++}var ss=S.diagonal();var s=[];for(var i=1;i<=ss.cols();i++){var ssn=ss.e(i);s.push(Math.abs(ssn));if(ssn<0){for(var j=0;j<U.rows();j++){V.elements[j][i-1]=-V.elements[j][i-1]}}}return{U:U,S:$V(s).toDiagonalMatrix(),V:V}}function svdPack(){var result=lapack.sgesvd("A","A",this.elements);return{U:$M(result.U),S:$M(result.S).column(1).toDiagonalMatrix(),V:$M(result.VT).transpose()}}function qrJs(){var m=this.rows();var n=this.cols();var Q=Matrix.I(m);var A=this;for(var k=1;k<Math.min(m,n);k++){var ak=A.slice(k,0,k,k).col(1);var oneZero=[1];while(oneZero.length<=m-k)oneZero.push(0);oneZero=$V(oneZero);var vk=ak.add(oneZero.x(ak.norm()*Math.sign(ak.e(1))));var Vk=$M(vk);var Hk=Matrix.I(m-k+1).subtract(Vk.x(2).x(Vk.transpose()).div(Vk.transpose().x(Vk).e(1,1)));var Qk=identSize(Hk,m,n,k);A=Qk.x(A);Q=Q.x(Qk)}return{Q:Q,R:A}}function qrPack(){var qr=lapack.qr(this.elements);return{Q:$M(qr.Q),R:$M(qr.R)}}function Matrix(){}Matrix.prototype={solve:function(b){var lu=this.lu();b=lu.P.x(b);var y=lu.L.forwardSubstitute(b);var x=lu.U.backSubstitute(y);return lu.P.x(x)},pcaProject:function(k,U){var U=U||pca(this).U;var Ureduce=U.slice(1,U.rows(),1,k);return{Z:this.x(Ureduce),U:U}},pcaRecover:function(U){var k=this.cols();var Ureduce=U.slice(1,U.rows(),1,k);return this.x(Ureduce.transpose())},triu:function(k){if(!k)k=0;return this.map(function(x,i,j){return j-i>=k?x:0})},unroll:function(){var v=[];for(var i=1;i<=this.cols();i++){for(var j=1;j<=this.rows();j++){v.push(this.e(j,i))}}return $V(v)},slice:function(startRow,endRow,startCol,endCol){var x=[];if(endRow==0)endRow=this.rows();if(endCol==0)endCol=this.cols();for(i=startRow;i<=endRow;i++){var row=[];for(j=startCol;j<=endCol;j++){row.push(this.e(i,j))}x.push(row)}return $M(x)},e:function(i,j){if(i<1||i>this.elements.length||j<1||j>this.elements[0].length){return null}return this.elements[i-1][j-1]},row:function(i){if(i>this.elements.length){return null}return $V(this.elements[i-1])},col:function(j){if(j>this.elements[0].length){return null}var col=[],n=this.elements.length;for(var i=0;i<n;i++){col.push(this.elements[i][j-1])}return $V(col)},dimensions:function(){return{rows:this.elements.length,cols:this.elements[0].length}},rows:function(){return this.elements.length},cols:function(){return this.elements[0].length},approxEql:function(matrix){return this.eql(matrix,Sylvester.approxPrecision)},eql:function(matrix,precision){var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}if(this.elements.length!=M.length||this.elements[0].length!=M[0].length){return false}var i=this.elements.length,nj=this.elements[0].length,j;while(i--){j=nj;while(j--){if(Math.abs(this.elements[i][j]-M[i][j])>(precision||Sylvester.precision)){return false}}}return true},dup:function(){return Matrix.create(this.elements)},map:function(fn){var els=[],i=this.elements.length,nj=this.elements[0].length,j;while(i--){j=nj;els[i]=[];while(j--){els[i][j]=fn(this.elements[i][j],i+1,j+1)}}return Matrix.create(els)},isSameSizeAs:function(matrix){var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}return this.elements.length==M.length&&this.elements[0].length==M[0].length},add:function(matrix){if(typeof matrix=="number"){return this.map(function(x,i,j){return x+matrix})}else{var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}if(!this.isSameSizeAs(M)){return null}return this.map(function(x,i,j){return x+M[i-1][j-1]})}},subtract:function(matrix){if(typeof matrix=="number"){return this.map(function(x,i,j){return x-matrix})}else{var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}if(!this.isSameSizeAs(M)){return null}return this.map(function(x,i,j){return x-M[i-1][j-1]})}},canMultiplyFromLeft:function(matrix){var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}return this.elements[0].length==M.length},mulOp:function(matrix,op){if(!matrix.elements){return this.map(function(x){return op(x,matrix)})}var returnVector=matrix.modulus?true:false;var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined")M=Matrix.create(M).elements;if(!this.canMultiplyFromLeft(M))return null;var e=this.elements,rowThis,rowElem,elements=[],sum,m=e.length,n=M[0].length,o=e[0].length,i=m,j,k;while(i--){rowElem=[];rowThis=e[i];j=n;while(j--){sum=0;k=o;while(k--){sum+=op(rowThis[k],M[k][j])}rowElem[j]=sum}elements[i]=rowElem}var M=Matrix.create(elements);return returnVector?M.col(1):M},div:function(matrix){return this.mulOp(matrix,function(x,y){return x/y})},multiply:function(matrix){return this.mulOp(matrix,function(x,y){return x*y})},x:function(matrix){return this.multiply(matrix)},elementMultiply:function(v){return this.map(function(k,i,j){return v.e(i,j)*k})},sum:function(){var sum=0;this.map(function(x){sum+=x});return sum},mean:function(){var dim=this.dimensions();var r=[];for(var i=1;i<=dim.cols;i++){r.push(this.col(i).sum()/dim.rows)}return $V(r)},column:function(n){return this.col(n)},log:function(){return this.map(function(x){return Math.log(x)})},minor:function(a,b,c,d){var elements=[],ni=c,i,nj,j;var rows=this.elements.length,cols=this.elements[0].length;while(ni--){i=c-ni-1;elements[i]=[];nj=d;while(nj--){j=d-nj-1;elements[i][j]=this.elements[(a+i-1)%rows][(b+j-1)%cols]}}return Matrix.create(elements)},transpose:function(){var rows=this.elements.length,i,cols=this.elements[0].length,j;var elements=[],i=cols;while(i--){j=rows;elements[i]=[];while(j--){elements[i][j]=this.elements[j][i]}}return Matrix.create(elements)},isSquare:function(){return this.elements.length==this.elements[0].length},max:function(){var m=0,i=this.elements.length,nj=this.elements[0].length,j;while(i--){j=nj;while(j--){if(Math.abs(this.elements[i][j])>Math.abs(m)){m=this.elements[i][j]}}}return m},indexOf:function(x){var index=null,ni=this.elements.length,i,nj=this.elements[0].length,j;for(i=0;i<ni;i++){for(j=0;j<nj;j++){if(this.elements[i][j]==x){return{i:i+1,j:j+1}}}}return null},diagonal:function(){if(!this.isSquare){return null}var els=[],n=this.elements.length;for(var i=0;i<n;i++){els.push(this.elements[i][i])}return $V(els)},toRightTriangular:function(){var M=this.dup(),els;var n=this.elements.length,i,j,np=this.elements[0].length,p;for(i=0;i<n;i++){if(M.elements[i][i]==0){for(j=i+1;j<n;j++){if(M.elements[j][i]!=0){els=[];for(p=0;p<np;p++){els.push(M.elements[i][p]+M.elements[j][p])}M.elements[i]=els;break}}}if(M.elements[i][i]!=0){for(j=i+1;j<n;j++){var multiplier=M.elements[j][i]/M.elements[i][i];els=[];for(p=0;p<np;p++){els.push(p<=i?0:M.elements[j][p]-M.elements[i][p]*multiplier)}M.elements[j]=els}}}return M},toUpperTriangular:function(){return this.toRightTriangular()},determinant:function(){if(!this.isSquare()){return null}if(this.cols==1&&this.rows==1){return this.row(1)}if(this.cols==0&&this.rows==0){return 1}var M=this.toRightTriangular();var det=M.elements[0][0],n=M.elements.length;for(var i=1;i<n;i++){det=det*M.elements[i][i]}return det},det:function(){return this.determinant()},isSingular:function(){return this.isSquare()&&this.determinant()===0},trace:function(){if(!this.isSquare()){return null}var tr=this.elements[0][0],n=this.elements.length;for(var i=1;i<n;i++){tr+=this.elements[i][i]}return tr},tr:function(){return this.trace()},rank:function(){var M=this.toRightTriangular(),rank=0;var i=this.elements.length,nj=this.elements[0].length,j;while(i--){j=nj;while(j--){if(Math.abs(M.elements[i][j])>Sylvester.precision){rank++;break}}}return rank},rk:function(){return this.rank()},augment:function(matrix){var M=matrix.elements||matrix;if(typeof M[0][0]=="undefined"){M=Matrix.create(M).elements}var T=this.dup(),cols=T.elements[0].length;var i=T.elements.length,nj=M[0].length,j;if(i!=M.length){return null}while(i--){j=nj;while(j--){T.elements[i][cols+j]=M[i][j]}}return T},inverse:function(){if(!this.isSquare()||this.isSingular()){return null}var n=this.elements.length,i=n,j;var M=this.augment(Matrix.I(n)).toRightTriangular();var np=M.elements[0].length,p,els,divisor;var inverse_elements=[],new_element;while(i--){els=[];inverse_elements[i]=[];divisor=M.elements[i][i];for(p=0;p<np;p++){new_element=M.elements[i][p]/divisor;els.push(new_element);if(p>=n){inverse_elements[i].push(new_element)}}M.elements[i]=els;j=i;while(j--){els=[];for(p=0;p<np;p++){els.push(M.elements[j][p]-M.elements[i][p]*M.elements[j][i])}M.elements[j]=els}}return Matrix.create(inverse_elements)},inv:function(){return this.inverse()},round:function(){return this.map(function(x){return Math.round(x)})},snapTo:function(x){return this.map(function(p){return Math.abs(p-x)<=Sylvester.precision?x:p})},inspect:function(){var matrix_rows=[];var n=this.elements.length;for(var i=0;i<n;i++){matrix_rows.push($V(this.elements[i]).inspect())}return matrix_rows.join("\n")},toArray:function(){var matrix_rows=[];var n=this.elements.length;for(var i=0;i<n;i++){matrix_rows.push(this.elements[i])}return matrix_rows},setElements:function(els){var i,j,elements=els.elements||els;if(typeof elements[0][0]!="undefined"){i=elements.length;this.elements=[];while(i--){j=elements[i].length;this.elements[i]=[];while(j--){this.elements[i][j]=elements[i][j]}}return this}var n=elements.length;this.elements=[];for(i=0;i<n;i++){this.elements.push([elements[i]])}return this},maxColumnIndexes:function(){var maxes=[];for(var i=1;i<=this.rows();i++){var max=null;var maxIndex=-1;for(var j=1;j<=this.cols();j++){if(max===null||this.e(i,j)>max){max=this.e(i,j);maxIndex=j}}maxes.push(maxIndex)}return $V(maxes)},maxColumns:function(){var maxes=[];for(var i=1;i<=this.rows();i++){var max=null;for(var j=1;j<=this.cols();j++){if(max===null||this.e(i,j)>max){max=this.e(i,j)}}maxes.push(max)}return $V(maxes)},minColumnIndexes:function(){var mins=[];for(var i=1;i<=this.rows();i++){var min=null;var minIndex=-1;for(var j=1;j<=this.cols();j++){if(min===null||this.e(i,j)<min){min=this.e(i,j);minIndex=j}}mins.push(minIndex)}return $V(mins)},minColumns:function(){var mins=[];for(var i=1;i<=this.rows();i++){var min=null;for(var j=1;j<=this.cols();j++){if(min===null||this.e(i,j)<min){min=this.e(i,j)}}mins.push(min)}return $V(mins)},partialPivot:function(k,j,P,A,L){var maxIndex=0;var maxValue=0;for(var i=k;i<=A.rows();i++){if(Math.abs(A.e(i,j))>maxValue){maxValue=Math.abs(A.e(k,j));maxIndex=i}}if(maxIndex!=k){var tmp=A.elements[k-1];A.elements[k-1]=A.elements[maxIndex-1];A.elements[maxIndex-1]=tmp;P.elements[k-1][k-1]=0;P.elements[k-1][maxIndex-1]=1;P.elements[maxIndex-1][maxIndex-1]=0;P.elements[maxIndex-1][k-1]=1}return P},forwardSubstitute:function(b){var xa=[];for(var i=1;i<=this.rows();i++){var w=0;for(var j=1;j<i;j++){w+=this.e(i,j)*xa[j-1]}xa.push((b.e(i)-w)/this.e(i,i))}return $V(xa)},backSubstitute:function(b){var xa=[];for(var i=this.rows();i>0;i--){var w=0;for(var j=this.cols();j>i;j--){w+=this.e(i,j)*xa[this.rows()-j]}xa.push((b.e(i)-w)/this.e(i,i))}return $V(xa.reverse())},luPack:luPack,luJs:luJs,svdJs:svdJs,svdPack:svdPack,qrJs:qrJs,qrPack:qrPack};function luPack(){var lu=lapack.lu(this.elements);return{L:$M(lu.L),U:$M(lu.U),P:$M(lu.P)}}var tolerance=1.4901e-8;function luJs(){var A=this.dup();var L=Matrix.I(A.rows());var P=Matrix.I(A.rows());var U=Matrix.Zeros(A.rows(),A.cols());var p=1;for(var k=1;k<=Math.min(A.cols(),A.rows());k++){P=A.partialPivot(k,p,P,A,L);for(var i=k+1;i<=A.rows();i++){var l=A.e(i,p)/A.e(k,p);L.elements[i-1][k-1]=l;for(var j=k+1;j<=A.cols();j++){A.elements[i-1][j-1]-=A.e(k,j)*l}}for(var j=k;j<=A.cols();j++){U.elements[k-1][j-1]=A.e(k,j)}if(p<A.cols())p++}return{L:L,U:U,P:P}}function getLapack(){try{return require("lapack")}catch(e){}}var lapack;if(lapack=getLapack()){Matrix.prototype.svd=svdPack;Matrix.prototype.qr=qrPack;Matrix.prototype.lu=luPack}else{Matrix.prototype.svd=svdJs;Matrix.prototype.qr=qrJs;Matrix.prototype.lu=luJs}Matrix.create=function(aElements,ignoreLapack){var M=(new Matrix).setElements(aElements);return M};Matrix.I=function(n){var els=[],i=n,j;while(i--){j=n;els[i]=[];while(j--){els[i][j]=i==j?1:0}}return Matrix.create(els)};Matrix.loadFile=function(file){var contents=fs.readFileSync(file,"utf-8");var matrix=[];var rowArray=contents.split("\n");for(var i=0;i<rowArray.length;i++){var d=rowArray[i].split(",");if(d.length>1){matrix.push(d)}}var M=new Matrix;return M.setElements(matrix)};Matrix.Diagonal=function(elements){
var i=elements.length;var M=Matrix.I(i);while(i--){M.elements[i][i]=elements[i]}return M};Matrix.Rotation=function(theta,a){if(!a){return Matrix.create([[Math.cos(theta),-Math.sin(theta)],[Math.sin(theta),Math.cos(theta)]])}var axis=a.dup();if(axis.elements.length!=3){return null}var mod=axis.modulus();var x=axis.elements[0]/mod,y=axis.elements[1]/mod,z=axis.elements[2]/mod;var s=Math.sin(theta),c=Math.cos(theta),t=1-c;return Matrix.create([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};Matrix.RotationX=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[1,0,0],[0,c,-s],[0,s,c]])};Matrix.RotationY=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[c,0,s],[0,1,0],[-s,0,c]])};Matrix.RotationZ=function(t){var c=Math.cos(t),s=Math.sin(t);return Matrix.create([[c,-s,0],[s,c,0],[0,0,1]])};Matrix.Random=function(n,m){if(arguments.length===1)m=n;return Matrix.Zero(n,m).map(function(){return Math.random()})};Matrix.Fill=function(n,m,v){if(arguments.length===2){v=m;m=n}var els=[],i=n,j;while(i--){j=m;els[i]=[];while(j--){els[i][j]=v}}return Matrix.create(els)};Matrix.Zero=function(n,m){return Matrix.Fill(n,m,0)};Matrix.Zeros=function(n,m){return Matrix.Zero(n,m)};Matrix.One=function(n,m){return Matrix.Fill(n,m,1)};Matrix.Ones=function(n,m){return Matrix.One(n,m)};module.exports=Matrix},{"./sylvester":126,"./vector":127,fs:1,lapack:15}],125:[function(require,module,exports){var Vector=require("./vector");var Matrix=require("./matrix");var Line=require("./line");var Sylvester=require("./sylvester");function Plane(){}Plane.prototype={eql:function(plane){return this.contains(plane.anchor)&&this.isParallelTo(plane)},dup:function(){return Plane.create(this.anchor,this.normal)},translate:function(vector){var V=vector.elements||vector;return Plane.create([this.anchor.elements[0]+V[0],this.anchor.elements[1]+V[1],this.anchor.elements[2]+(V[2]||0)],this.normal)},isParallelTo:function(obj){var theta;if(obj.normal){theta=this.normal.angleFrom(obj.normal);return Math.abs(theta)<=Sylvester.precision||Math.abs(Math.PI-theta)<=Sylvester.precision}else if(obj.direction){return this.normal.isPerpendicularTo(obj.direction)}return null},isPerpendicularTo:function(plane){var theta=this.normal.angleFrom(plane.normal);return Math.abs(Math.PI/2-theta)<=Sylvester.precision},distanceFrom:function(obj){if(this.intersects(obj)||this.contains(obj)){return 0}if(obj.anchor){var A=this.anchor.elements,B=obj.anchor.elements,N=this.normal.elements;return Math.abs((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}else{var P=obj.elements||obj;var A=this.anchor.elements,N=this.normal.elements;return Math.abs((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},contains:function(obj){if(obj.normal){return null}if(obj.direction){return this.contains(obj.anchor)&&this.contains(obj.anchor.add(obj.direction))}else{var P=obj.elements||obj;var A=this.anchor.elements,N=this.normal.elements;var diff=Math.abs(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));return diff<=Sylvester.precision}},intersects:function(obj){if(typeof obj.direction=="undefined"&&typeof obj.normal=="undefined"){return null}return!this.isParallelTo(obj)},intersectionWith:function(obj){if(!this.intersects(obj)){return null}if(obj.direction){var A=obj.anchor.elements,D=obj.direction.elements,P=this.anchor.elements,N=this.normal.elements;var multiplier=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);return Vector.create([A[0]+D[0]*multiplier,A[1]+D[1]*multiplier,A[2]+D[2]*multiplier])}else if(obj.normal){var direction=this.normal.cross(obj.normal).toUnitVector();var N=this.normal.elements,A=this.anchor.elements,O=obj.normal.elements,B=obj.anchor.elements;var solver=Matrix.Zero(2,2),i=0;while(solver.isSingular()){i++;solver=Matrix.create([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}var inverse=solver.inverse().elements;var x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];var y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];var intersection=[inverse[0][0]*x+inverse[0][1]*y,inverse[1][0]*x+inverse[1][1]*y];var anchor=[];for(var j=1;j<=3;j++){anchor.push(i==j?0:intersection[(j+(5-i)%3)%3])}return Line.create(anchor,direction)}},pointClosestTo:function(point){var P=point.elements||point;var A=this.anchor.elements,N=this.normal.elements;var dot=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];return Vector.create([P[0]+N[0]*dot,P[1]+N[1]*dot,(P[2]||0)+N[2]*dot])},rotate:function(t,line){var R=t.determinant?t.elements:Matrix.Rotation(t,line.direction).elements;var C=line.pointClosestTo(this.anchor).elements;var A=this.anchor.elements,N=this.normal.elements;var C1=C[0],C2=C[1],C3=C[2],A1=A[0],A2=A[1],A3=A[2];var x=A1-C1,y=A2-C2,z=A3-C3;return Plane.create([C1+R[0][0]*x+R[0][1]*y+R[0][2]*z,C2+R[1][0]*x+R[1][1]*y+R[1][2]*z,C3+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},reflectionIn:function(obj){if(obj.normal){var A=this.anchor.elements,N=this.normal.elements;var A1=A[0],A2=A[1],A3=A[2],N1=N[0],N2=N[1],N3=N[2];var newA=this.anchor.reflectionIn(obj).elements;var AN1=A1+N1,AN2=A2+N2,AN3=A3+N3;var Q=obj.pointClosestTo([AN1,AN2,AN3]).elements;var newN=[Q[0]+(Q[0]-AN1)-newA[0],Q[1]+(Q[1]-AN2)-newA[1],Q[2]+(Q[2]-AN3)-newA[2]];return Plane.create(newA,newN)}else if(obj.direction){return this.rotate(Math.PI,obj)}else{var P=obj.elements||obj;return Plane.create(this.anchor.reflectionIn([P[0],P[1],P[2]||0]),this.normal)}},setVectors:function(anchor,v1,v2){anchor=Vector.create(anchor);anchor=anchor.to3D();if(anchor===null){return null}v1=Vector.create(v1);v1=v1.to3D();if(v1===null){return null}if(typeof v2=="undefined"){v2=null}else{v2=Vector.create(v2);v2=v2.to3D();if(v2===null){return null}}var A1=anchor.elements[0],A2=anchor.elements[1],A3=anchor.elements[2];var v11=v1.elements[0],v12=v1.elements[1],v13=v1.elements[2];var normal,mod;if(v2!==null){var v21=v2.elements[0],v22=v2.elements[1],v23=v2.elements[2];normal=Vector.create([(v12-A2)*(v23-A3)-(v13-A3)*(v22-A2),(v13-A3)*(v21-A1)-(v11-A1)*(v23-A3),(v11-A1)*(v22-A2)-(v12-A2)*(v21-A1)]);mod=normal.modulus();if(mod===0){return null}normal=Vector.create([normal.elements[0]/mod,normal.elements[1]/mod,normal.elements[2]/mod])}else{mod=Math.sqrt(v11*v11+v12*v12+v13*v13);if(mod===0){return null}normal=Vector.create([v1.elements[0]/mod,v1.elements[1]/mod,v1.elements[2]/mod])}this.anchor=anchor;this.normal=normal;return this}};Plane.create=function(anchor,v1,v2){var P=new Plane;return P.setVectors(anchor,v1,v2)};Plane.XY=Plane.create(Vector.Zero(3),Vector.k);Plane.YZ=Plane.create(Vector.Zero(3),Vector.i);Plane.ZX=Plane.create(Vector.Zero(3),Vector.j);Plane.YX=Plane.XY;Plane.ZY=Plane.YZ;Plane.XZ=Plane.ZX;Plane.fromPoints=function(points){var np=points.length,list=[],i,P,n,N,A,B,C,D,theta,prevN,totalN=Vector.Zero(3);for(i=0;i<np;i++){P=Vector.create(points[i]).to3D();if(P===null){return null}list.push(P);n=list.length;if(n>2){A=list[n-1].elements;B=list[n-2].elements;C=list[n-3].elements;N=Vector.create([(A[1]-B[1])*(C[2]-B[2])-(A[2]-B[2])*(C[1]-B[1]),(A[2]-B[2])*(C[0]-B[0])-(A[0]-B[0])*(C[2]-B[2]),(A[0]-B[0])*(C[1]-B[1])-(A[1]-B[1])*(C[0]-B[0])]).toUnitVector();if(n>3){theta=N.angleFrom(prevN);if(theta!==null){if(!(Math.abs(theta)<=Sylvester.precision||Math.abs(theta-Math.PI)<=Sylvester.precision)){return null}}}totalN=totalN.add(N);prevN=N}}A=list[1].elements;B=list[0].elements;C=list[n-1].elements;D=list[n-2].elements;totalN=totalN.add(Vector.create([(A[1]-B[1])*(C[2]-B[2])-(A[2]-B[2])*(C[1]-B[1]),(A[2]-B[2])*(C[0]-B[0])-(A[0]-B[0])*(C[2]-B[2]),(A[0]-B[0])*(C[1]-B[1])-(A[1]-B[1])*(C[0]-B[0])]).toUnitVector()).add(Vector.create([(B[1]-C[1])*(D[2]-C[2])-(B[2]-C[2])*(D[1]-C[1]),(B[2]-C[2])*(D[0]-C[0])-(B[0]-C[0])*(D[2]-C[2]),(B[0]-C[0])*(D[1]-C[1])-(B[1]-C[1])*(D[0]-C[0])]).toUnitVector());return Plane.create(list[0],totalN)};module.exports=Plane},{"./line":122,"./matrix":124,"./sylvester":126,"./vector":127}],126:[function(require,module,exports){Math.sign=function(x){return x<0?-1:1};var Sylvester={precision:1e-6,approxPrecision:1e-5};module.exports=Sylvester},{}],127:[function(require,module,exports){var Sylvester=require("./sylvester"),Matrix=require("./matrix");function Vector(){}Vector.prototype={norm:function(){var n=this.elements.length;var sum=0;while(n--){sum+=Math.pow(this.elements[n],2)}return Math.sqrt(sum)},e:function(i){return i<1||i>this.elements.length?null:this.elements[i-1]},dimensions:function(){return{rows:1,cols:this.elements.length}},rows:function(){return 1},cols:function(){return this.elements.length},modulus:function(){return Math.sqrt(this.dot(this))},eql:function(vector){var n=this.elements.length;var V=vector.elements||vector;if(n!=V.length){return false}while(n--){if(Math.abs(this.elements[n]-V[n])>Sylvester.precision){return false}}return true},dup:function(){return Vector.create(this.elements)},map:function(fn){var elements=[];this.each(function(x,i){elements.push(fn(x,i))});return Vector.create(elements)},each:function(fn){var n=this.elements.length;for(var i=0;i<n;i++){fn(this.elements[i],i+1)}},toUnitVector:function(){var r=this.modulus();if(r===0){return this.dup()}return this.map(function(x){return x/r})},angleFrom:function(vector){var V=vector.elements||vector;var n=this.elements.length,k=n,i;if(n!=V.length){return null}var dot=0,mod1=0,mod2=0;this.each(function(x,i){dot+=x*V[i-1];mod1+=x*x;mod2+=V[i-1]*V[i-1]});mod1=Math.sqrt(mod1);mod2=Math.sqrt(mod2);if(mod1*mod2===0){return null}var theta=dot/(mod1*mod2);if(theta<-1){theta=-1}if(theta>1){theta=1}return Math.acos(theta)},isParallelTo:function(vector){var angle=this.angleFrom(vector);return angle===null?null:angle<=Sylvester.precision},isAntiparallelTo:function(vector){var angle=this.angleFrom(vector);return angle===null?null:Math.abs(angle-Math.PI)<=Sylvester.precision},isPerpendicularTo:function(vector){var dot=this.dot(vector);return dot===null?null:Math.abs(dot)<=Sylvester.precision},add:function(value){var V=value.elements||value;if(this.elements.length!=V.length)return this.map(function(v){return v+value});else return this.map(function(x,i){return x+V[i-1]})},subtract:function(v){if(typeof v=="number")return this.map(function(k){return k-v});var V=v.elements||v;if(this.elements.length!=V.length){return null}return this.map(function(x,i){return x-V[i-1]})},multiply:function(k){return this.map(function(x){return x*k})},elementMultiply:function(v){return this.map(function(k,i){return v.e(i)*k})},sum:function(){var sum=0;this.map(function(x){sum+=x});return sum},chomp:function(n){var elements=[];for(var i=n;i<this.elements.length;i++){elements.push(this.elements[i])}return Vector.create(elements)},top:function(n){var elements=[];for(var i=0;i<n;i++){elements.push(this.elements[i])}return Vector.create(elements)},augment:function(elements){var newElements=this.elements;for(var i=0;i<elements.length;i++){newElements.push(elements[i])}return Vector.create(newElements)},x:function(k){return this.multiply(k)},log:function(){return Vector.log(this)},elementDivide:function(vector){return this.map(function(v,i){return v/vector.e(i)})},product:function(){var p=1;this.map(function(v){p*=v});return p},dot:function(vector){var V=vector.elements||vector;var i,product=0,n=this.elements.length;if(n!=V.length){return null}while(n--){product+=this.elements[n]*V[n]}return product},cross:function(vector){var B=vector.elements||vector;if(this.elements.length!=3||B.length!=3){return null}var A=this.elements;return Vector.create([A[1]*B[2]-A[2]*B[1],A[2]*B[0]-A[0]*B[2],A[0]*B[1]-A[1]*B[0]])},max:function(){var m=0,i=this.elements.length;while(i--){if(Math.abs(this.elements[i])>Math.abs(m)){m=this.elements[i]}}return m},maxIndex:function(){var m=0,i=this.elements.length;var maxIndex=-1;while(i--){if(Math.abs(this.elements[i])>Math.abs(m)){m=this.elements[i];maxIndex=i+1}}return maxIndex},indexOf:function(x){var index=null,n=this.elements.length;for(var i=0;i<n;i++){if(index===null&&this.elements[i]==x){index=i+1}}return index},toDiagonalMatrix:function(){return Matrix.Diagonal(this.elements)},round:function(){return this.map(function(x){return Math.round(x)})},transpose:function(){var rows=this.elements.length;var elements=[];for(var i=0;i<rows;i++){elements.push([this.elements[i]])}return Matrix.create(elements)},snapTo:function(x){return this.map(function(y){return Math.abs(y-x)<=Sylvester.precision?x:y})},distanceFrom:function(obj){if(obj.anchor||obj.start&&obj.end){return obj.distanceFrom(this)}var V=obj.elements||obj;if(V.length!=this.elements.length){return null}var sum=0,part;this.each(function(x,i){part=x-V[i-1];sum+=part*part});return Math.sqrt(sum)},liesOn:function(line){return line.contains(this)},liesIn:function(plane){return plane.contains(this)},rotate:function(t,obj){var V,R=null,x,y,z;if(t.determinant){R=t.elements}switch(this.elements.length){case 2:V=obj.elements||obj;if(V.length!=2){return null}if(!R){R=Matrix.Rotation(t).elements}x=this.elements[0]-V[0];y=this.elements[1]-V[1];return Vector.create([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);break;case 3:if(!obj.direction){return null}var C=obj.pointClosestTo(this).elements;if(!R){R=Matrix.Rotation(t,obj.direction).elements}x=this.elements[0]-C[0];y=this.elements[1]-C[1];z=this.elements[2]-C[2];return Vector.create([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);break;default:return null}},reflectionIn:function(obj){if(obj.anchor){var P=this.elements.slice();var C=obj.pointClosestTo(P).elements;return Vector.create([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}else{var Q=obj.elements||obj;if(this.elements.length!=Q.length){return null}return this.map(function(x,i){return Q[i-1]+(Q[i-1]-x)})}},to3D:function(){var V=this.dup();switch(V.elements.length){case 3:break;case 2:V.elements.push(0);break;default:return null}return V},inspect:function(){return"["+this.elements.join(", ")+"]"},setElements:function(els){this.elements=(els.elements||els).slice();return this}};Vector.create=function(elements){var V=new Vector;return V.setElements(elements)};Vector.i=Vector.create([1,0,0]);Vector.j=Vector.create([0,1,0]);Vector.k=Vector.create([0,0,1]);Vector.Random=function(n){var elements=[];while(n--){elements.push(Math.random())}return Vector.create(elements)};Vector.Fill=function(n,v){var elements=[];while(n--){elements.push(v)}return Vector.create(elements)};Vector.Zero=function(n){return Vector.Fill(n,0)};Vector.One=function(n){return Vector.Fill(n,1)};Vector.log=function(v){return v.map(function(x){return Math.log(x)})};module.exports=Vector},{"./matrix":124,"./sylvester":126}],128:[function(require,module,exports){(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);
_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(typeof define==="function"&&define.amd){define("underscore",[],function(){return _})}}).call(this)},{}],129:[function(require,module,exports){"use strict";var natural=require("natural");module.exports=function(config){var NGrams=natural.NGrams;return function(scribe){var unWords=[function(text){return text.replace(/ the /g," ")},function(text){return text.replace(/ and /g," ")},function(text){return text.replace(/ but /g," ")},function(text){return text.replace(/ then /g," ")},function(text){return text.replace(/ a /g," ")},function(text){return text.replace(/ of /g," ")},function(text){return text.replace(/ an /g," ")},function(text){return text.replace(/ in /g," ")},function(text){return text.replace(/ on /g," ")},function(text){return text.replace(/ by /g," ")},function(text){return text.replace(/ he /g," ")},function(text){return text.replace(/ she /g," ")},function(text){return text.replace(/ had /g," ")},function(text){return text.replace(/ gone /g," ")},function(text){return text.replace(/ that /g," ")},function(text){return text.replace(/ from /g," ")},function(text){return text.replace(/ to /g," ")}];var nGramsCommand=new scribe.api.Command("ngrams");nGramsCommand.execute=function(){var text=unWords.reduce(function(val,fn){return fn(val)},scribe.el.innerText);var bigrams=NGrams.bigrams(text);var ngrams=NGrams.ngrams(text,1);return{bigrams:bigrams,ngrams:ngrams}};nGramsCommand.queryEnable=function(){return true};scribe.commands["ngrams"]=nGramsCommand}}},{natural:43}]},{},[129])(129)});
